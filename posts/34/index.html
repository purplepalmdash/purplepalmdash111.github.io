
<!DOCTYPE html>
<!--[if IEMobile 7 ]><html class="no-js iem7"><![endif]-->
<!--[if lt IE 9]><html class="no-js lte-ie8"><![endif]-->
<!--[if (gt IE 8)|(gt IEMobile 7)|!(IEMobile)|!(IE)]><!--><html class="no-js" lang="en"><!--<![endif]-->
<head>
  <meta charset="utf-8">
  <title>Dash</title>
  <meta name="author" content="Dash">

  
  <meta name="description" content="1. Know the System Installation Date You can use tune2fs to know the installation date of your Linux System, be ware the /dev/sda[] should be the &hellip;">
  

  <!-- http://t.co/dKP3o1e -->
  <meta name="HandheldFriendly" content="True">
  <meta name="MobileOptimized" content="320">
  <meta name="viewport" content="width=device-width, initial-scale=1">

  
  <link rel="canonical" href="http://purplepalmdash.github.io/posts/34">
  <link href="/favicon.ico" rel="icon">
  <link href="/stylesheets/screen.css" media="screen, projection" rel="stylesheet" type="text/css">
  <link href="/purplepalmdash/atom.xml" rel="alternate" title="Dash" type="application/atom+xml">
  <script src="/javascripts/modernizr-2.0.js"></script>
  <script src="//fonts.googleapis.com/js/jquery/1.9.1/jquery.min.js"></script>
  <script>!window.jQuery && document.write(unescape('%3Cscript src="./javascripts/libs/jquery.min.js"%3E%3C/script%3E'))</script>
  <script src="/javascripts/octopress.js" type="text/javascript"></script>
  <!--Fonts from Google"s Web font directory at http://google.com/webfonts -->
<link href="//fonts.googleapis.com/css?family=PT+Serif:regular,italic,bold,bolditalic" rel="stylesheet" type="text/css">
<link href="//fonts.googleapis.com/css?family=PT+Sans:regular,italic,bold,bolditalic" rel="stylesheet" type="text/css">

  

</head>

<body    class="collapse-sidebar sidebar-footer" >
  <header role="banner"><hgroup>
  <h1><a href="/">Dash</a></h1>
  
    <h2>Get busy living, or get busy dying.</h2>
  
</hgroup>

</header>
  <nav role="navigation"><ul class="subscription" data-subscription="rss">
  <li><a href="/purplepalmdash/atom.xml" rel="subscribe-rss" title="subscribe via RSS">RSS</a></li>
  
</ul>
  
<form action="https://www.google.com/search" method="get">
  <fieldset role="search">
    <input type="hidden" name="q" value="site:purplepalmdash.github.io" />
    <input class="search" type="text" name="q" results="0" placeholder="Search"/>
  </fieldset>
</form>
  
<ul class="main-navigation">
  <li><a href="/">Blog</a></li>
  <li><a href="/blog/archives">Archives</a></li>
</ul>

</nav>
  <div id="main">
    <div id="content">
      <div class="blog-index">
  
  
  
    <article>
      
  <header>
    
      <h1 class="entry-title"><a href="/blog/2014/10/18/linux-tips/">Linux Tips</a></h1>
    
    
      <p class="meta">
        




<time class='entry-date' datetime='2014-10-18T19:21:00+08:00'><span class='date'><span class='date-month'>Oct</span> <span class='date-day'>18</span><span class='date-suffix'>th</span>, <span class='date-year'>2014</span></span> <span class='time'>7:21 pm</span></time>
        
         | <a href="/blog/2014/10/18/linux-tips/#disqus_thread">Comments</a>
        
      </p>
    
  </header>


  <div class="entry-content"><h3>1. Know the System Installation Date</h3>

<p>You can use tune2fs to know the installation date of your Linux System, be ware the /dev/sda[] should be the root partition of your disk. See my following example:</p>

<figure class='code'><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
<span class='line-number'>3</span>
</pre></td><td class='code'><pre><code class=''><span class='line'>tune2fs -l /dev/sda1 or /dev/sdb1* | grep 'Filesystem created:'
</span><span class='line'>$ sudo tune2fs -l /dev/sda2  | grep 'Filesystem created:' 
</span><span class='line'>Filesystem created:       Mon May  5 17:31:40 2014
</span></code></pre></td></tr></table></div></figure>


<h3>2. View Thread Status</h3>

<p>View the thread status via proc filesystem.</p>

<figure class='code'><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
<span class='line-number'>3</span>
<span class='line-number'>4</span>
<span class='line-number'>5</span>
<span class='line-number'>6</span>
<span class='line-number'>7</span>
<span class='line-number'>8</span>
</pre></td><td class='code'><pre><code class=''><span class='line'>$ ps -ef | grep conky
</span><span class='line'>Trusty      1396     1  0 19:15 ?        00:00:03 conky
</span><span class='line'>Trusty      7410  6161  0 19:23 pts/5    00:00:00 grep --color=always conky
</span><span class='line'>$ cd /proc/1396/task
</span><span class='line'>$ ls
</span><span class='line'>1396  1397  1398  1399  1400  1401  1402  1403
</span><span class='line'>$ cat 1396/status| grep "State"
</span><span class='line'>State:    S (sleeping)
</span></code></pre></td></tr></table></div></figure>


<h3>3. Write to other users</h3>

<p>Use w to get the tty, then write to other users.</p>

<figure class='code'><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
<span class='line-number'>3</span>
<span class='line-number'>4</span>
<span class='line-number'>5</span>
<span class='line-number'>6</span>
<span class='line-number'>7</span>
</pre></td><td class='code'><pre><code class=''><span class='line'>root@lilimarleen:/# w
</span><span class='line'> 00:47:04 up 28 min,  2 users,  load average: 0.00, 0.01, 0.02
</span><span class='line'>USER     TTY      FROM             LOGIN@   IDLE   JCPU   PCPU WHAT
</span><span class='line'>root     pts/0    1xx.xxx.xxx.xxx  00:26    0.00s  0.08s  0.00s w
</span><span class='line'>root     pts/2    18x.xxx.xxx.xx   00:40   32.00s  0.03s  0.03s -bash
</span><span class='line'>root@lilimarleen:/# echo "Hi, LiliMarleen"&gt;/dev/pts/2
</span><span class='line'>root@lilimarleen:/# echo "Do you have lunch"&gt;/dev/pts/2
</span></code></pre></td></tr></table></div></figure>


<h3>4. Share Terminals</h3>

<p>Make sure the screen command is available on your machine, then:  <br/>
Server side:</p>

<figure class='code'><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
</pre></td><td class='code'><pre><code class=''><span class='line'>$ screen -S share
</span></code></pre></td></tr></table></div></figure>


<p>Client side:</p>

<figure class='code'><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
</pre></td><td class='code'><pre><code class=''><span class='line'>$ screen -x share
</span></code></pre></td></tr></table></div></figure>


<p>Now both side input could be seen.</p>

<h3>5. Create xz file</h3>

<p>xz file will greatly decrease the file size, we use following command for create a xz file:</p>

<figure class='code'><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
</pre></td><td class='code'><pre><code class=''><span class='line'>tar cvfJ tar_xz_file.tar.xz folder_or_file
</span></code></pre></td></tr></table></div></figure>


<p>extract from xz from could be:</p>

<figure class='code'><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
</pre></td><td class='code'><pre><code class=''><span class='line'>tar -xJf tar_xz_file.tar.xz
</span></code></pre></td></tr></table></div></figure>


<h3>6. Login issue</h3>

<p>When you met</p>

<figure class='code'><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
</pre></td><td class='code'><pre><code class=''><span class='line'>file /home/xxx/.Xauthority does not exist
</span></code></pre></td></tr></table></div></figure>


<p>simply run following command once you login:</p>

<figure class='code'><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
</pre></td><td class='code'><pre><code class=''><span class='line'>$ startx
</span></code></pre></td></tr></table></div></figure>


<p>Next time you won&rsquo;t met this complains.</p>

<h3>7. Execution priviledge</h3>

<p>Login to Opensuse, run ifconfig will complains it needs root priviledge:</p>

<figure class='code'><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
</pre></td><td class='code'><pre><code class=''><span class='line'>Absolute path to 'ifconfig' is '/sbin/ifconfig', so running it may require superuser privileges (eg. root)
</span></code></pre></td></tr></table></div></figure>


<p>Simply add one line to the end of your ~/.bashrc file:</p>

<figure class='code'><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
</pre></td><td class='code'><pre><code class=''><span class='line'>export PATH=/sbin/:$PATH
</span></code></pre></td></tr></table></div></figure>


<p>Next time you could directly run <code>ifconfig</code>, or if you don&rsquo;t want to change your .bashrc file, do <code>/sbin/ifconfig</code>.</p>

<h3>8. Show history timestap</h3>

<figure class='code'><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
<span class='line-number'>3</span>
<span class='line-number'>4</span>
<span class='line-number'>5</span>
<span class='line-number'>6</span>
</pre></td><td class='code'><pre><code class=''><span class='line'>[Trusty@Linux01 ~]$  export HISTTIMEFORMAT="%F %T `whoami` "
</span><span class='line'>[Trusty@Linux01 ~]$ history | more
</span><span class='line'>    6  2014-10-29 03:33:01 Trusty ls | grep trb
</span><span class='line'>    7  2014-10-29 03:33:01 Trusty ./trbTest.py 
</span><span class='line'>    8  2014-10-29 03:33:01 Trusty history |grep export
</span><span class='line'>    9  2014-10-29 03:33:01 Trusty su root
</span></code></pre></td></tr></table></div></figure>


<h3>9. Vrome setting</h3>

<p>Chromium install the vrome then set the options of</p>

<figure class='code'><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
</pre></td><td class='code'><pre><code class=''><span class='line'>set useletters=0
</span></code></pre></td></tr></table></div></figure>


<p>The keyshorts: go to address line Ctrl+L, in MAC Win+L.</p>

<h3>10. Replace the word until end of the line</h3>

<p>In vim by following command:</p>

<figure class='code'><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
</pre></td><td class='code'><pre><code class=''><span class='line'>:%s/\&lt;foo\&gt;.*//
</span><span class='line'>On each line, delete the whole word "foo" and all following text (to end of line).
</span></code></pre></td></tr></table></div></figure>


<h3>11. Managing all of the running vagrants</h3>

<p>See following command:</p>

<figure class='code'><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
<span class='line-number'>3</span>
<span class='line-number'>4</span>
</pre></td><td class='code'><pre><code class=''><span class='line'>[Trusty@/media/y/Vagrant/vccw/myproxy/vccw-1.9.1]$ VBoxManage list runningvms
</span><span class='line'>"vccw-191_default_1417846604747_55987" {7b802d9e-dee2-4662-9694-e7cff6cbc49b}
</span><span class='line'>[Trusty@/media/y/Vagrant/vccw/myproxy/vccw-1.9.1]$ VBoxManage controlvm vccw-191_default_1417846604747_55987 savestate
</span><span class='line'>0%...10%...20%...30%...40%...50%...60%...70%...80%...90%...100%
</span></code></pre></td></tr></table></div></figure>


<h3>12. Battery</h3>

<p>To know the current battery via acpi, run:</p>

<figure class='code'><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
</pre></td><td class='code'><pre><code class=''><span class='line'>$ acpi -b
</span></code></pre></td></tr></table></div></figure>


<p>To know the more detailed info of Battery, goto:</p>

<figure class='code'><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
</pre></td><td class='code'><pre><code class=''><span class='line'>$ cd /sys/class/power_supply/BAT0
</span></code></pre></td></tr></table></div></figure>


<h3>13. Add arp entry</h3>

<p>So if you have rebooted the existing testing environment, your arp entries may be lost, simply use following command for adding it:</p>

<figure class='code'><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
</pre></td><td class='code'><pre><code class=''><span class='line'>$ arp -s 192.168.1.10 00:01:02:03:04:05
</span></code></pre></td></tr></table></div></figure>


<p>Now you will directly reached 192.168.1.10 via the specified mac address.</p>

<h3>14. Enable opera proxy</h3>

<p>After Opera upgraded to latest version its configuration for proxy is failed, so I change the startup command from <code>opera</code> to:</p>

<figure class='code'><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
</pre></td><td class='code'><pre><code class=''><span class='line'>$ opera --proxy-server="socks://127.0.0.1:1395"
</span><span class='line'>$ alias opera='opera --proxy-server="socks://127.0.0.1:1395"'
</span></code></pre></td></tr></table></div></figure>


<h3>15. Delete a package and its configuration file</h3>

<p>Use <code>pacman -R --help</code> for more detailed infos, so remove the vagrant including its configuration will be:</p>

<figure class='code'><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
</pre></td><td class='code'><pre><code class=''><span class='line'>$ sudo pacman -R vagrant -n
</span></code></pre></td></tr></table></div></figure>


<h3>16. Install rar/unrar on CentOS</h3>

<p>Install the rar/unrar via following command:</p>

<figure class='code'><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
<span class='line-number'>3</span>
</pre></td><td class='code'><pre><code class=''><span class='line'>#  wget http://pkgs.repoforge.org/rpmforge-release/rpmforge-release-0.5.2-2.el6.rf.i686.rpm
</span><span class='line'>#  sudo rpm -ivh rpmforge-release-0.5.2-2.el6.rf.i686.rpm
</span><span class='line'>#  sudo yum install rar unrar
</span></code></pre></td></tr></table></div></figure>


<p></p>

<h3>17. zsh History</h3>

<p>The default installed zsh has no history record, thus we have to enable the history via following setting:</p>

<figure class='code'><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
<span class='line-number'>3</span>
<span class='line-number'>4</span>
<span class='line-number'>5</span>
<span class='line-number'>6</span>
<span class='line-number'>7</span>
<span class='line-number'>8</span>
</pre></td><td class='code'><pre><code class=''><span class='line'>$ touch $HOME/.zsh_history
</span><span class='line'>$ tail ~/.zshrc
</span><span class='line'># For setting zsh history
</span><span class='line'>HISTFILE=$HOME/.zsh_history
</span><span class='line'>setopt INC_APPEND_HISTORY
</span><span class='line'>setopt SHARE_HISTORY
</span><span class='line'>HISTSIZE=5000
</span><span class='line'>SAVEHIST=5000
</span></code></pre></td></tr></table></div></figure>


<p>Now you will got the history recorded for 5000 lines, and each of them could be shared to each other.</p>

<h3>18. Calculate Code Lines</h3>

<p>We could use cloc for calculate the code lines. In Ubuntu, simply run following commands for installing cloc:</p>

<figure class='code'><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
</pre></td><td class='code'><pre><code class=''><span class='line'>$ sudo apt-get install cloc
</span></code></pre></td></tr></table></div></figure>


<p>cloc via following command:</p>

<figure class='code'><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
</pre></td><td class='code'><pre><code class=''><span class='line'>$ cloc Your_Source_Code_Directory
</span></code></pre></td></tr></table></div></figure>


<p>After a while your statistics result will be displayed on the screen.</p>

<h3>19. CMAKE prefix</h3>

<p>For specify the cmake&rsquo;s prefix we use following command:</p>

<figure class='code'><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
</pre></td><td class='code'><pre><code class=''><span class='line'>$ cmake -DCMAKE_INSTALL_PREFIX:PATH=/usr ./ && make && sudo make install
</span></code></pre></td></tr></table></div></figure>


<h3>20. xclip</h3>

<p>Sometimes we have to quickly redirect some output from the system output to system clipboard, we use xclip, add following alias to your ~/.bashrc or ~/.zshrc:</p>

<figure class='code'><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
</pre></td><td class='code'><pre><code class=''><span class='line'># Alias the xclip for directly to my system buffer, thus we could use shift+insert for copy the content.
</span><span class='line'>alias myclip='xclip -selection clipboard'
</span></code></pre></td></tr></table></div></figure>


<h3>21. Virtualbox Fixed Address</h3>

<p>The host-only adapter should have the static addresses, thus you won&rsquo;t mix each other.</p>

<figure class='code'><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
<span class='line-number'>3</span>
<span class='line-number'>4</span>
<span class='line-number'>5</span>
<span class='line-number'>6</span>
</pre></td><td class='code'><pre><code class=''><span class='line'>$ sudo vim /etc/network/interfaces
</span><span class='line'>auto eth1
</span><span class='line'>iface eth1 inet static
</span><span class='line'>    address 192.168.56.101
</span><span class='line'>    netmask 255.255.255.0
</span><span class='line'>    gateway 192.168.56.1
</span></code></pre></td></tr></table></div></figure>


<h3>22. Autologin Using ssh</h3>

<p>When you add the rsa content into the ~/.ssh/authorized_keys, but you still can&rsquo;t auto-login, then you have to consider the priviledge problem:</p>

<figure class='code'><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
<span class='line-number'>3</span>
</pre></td><td class='code'><pre><code class=''><span class='line'>$ ls ~/.ssh/authorized_keys  -l 
</span><span class='line'>-rw-r--r--. 1 Trusty Trusty 392 Feb 11 11:36 /home/Trusty/.ssh/authorized_keys
</span><span class='line'>$ chmod g-w ~/.ssh/authorized_keys
</span></code></pre></td></tr></table></div></figure>


<p>Now you could reach the machine without inputting password.</p>

<h3>23. Change Static Address For CentOS</h3>

<p>Change the following file:</p>

<figure class='code'><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
<span class='line-number'>3</span>
<span class='line-number'>4</span>
<span class='line-number'>5</span>
<span class='line-number'>6</span>
<span class='line-number'>7</span>
<span class='line-number'>8</span>
</pre></td><td class='code'><pre><code class=''><span class='line'>$ sudo vim /etc/sysconfig/network-scripts/ifcfg-eth*
</span><span class='line'>DEVICE=eth0 
</span><span class='line'>BOOTPROTO=none 
</span><span class='line'>ONBOOT=yes 
</span><span class='line'>NETWORK=10.0.1.0 
</span><span class='line'>NETMASK=255.255.255.0 
</span><span class='line'>IPADDR=10.0.1.27 
</span><span class='line'>USERCTL=no
</span></code></pre></td></tr></table></div></figure>


<p>Restart and then you could find your CentOS have static address.</p>

<h3>24. Disable Touchpad</h3>

<p>First use <code>xinput list</code> for list all of the input devices for X, then set the property of them via:</p>

<figure class='code'><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
<span class='line-number'>3</span>
<span class='line-number'>4</span>
<span class='line-number'>5</span>
<span class='line-number'>6</span>
<span class='line-number'>7</span>
<span class='line-number'>8</span>
<span class='line-number'>9</span>
<span class='line-number'>10</span>
<span class='line-number'>11</span>
</pre></td><td class='code'><pre><code class=''><span class='line'>$ xinput list
</span><span class='line'>⎡ Virtual core pointer                          id=2    [master pointer  (3)]
</span><span class='line'>⎜   ↳ Virtual core XTEST pointer                id=4    [slave  pointer  (2)]
</span><span class='line'>⎜   ↳ Logitech USB Optical Mouse                id=9    [slave  pointer  (2)]
</span><span class='line'>⎜   ↳ PS/2 Generic Mouse                        id=12   [slave  pointer  (2)]
</span><span class='line'>⎜   ↳ SynPS/2 Synaptics TouchPad                id=13   [slave  pointer  (2)]
</span><span class='line'>
</span><span class='line'>......
</span><span class='line'>
</span><span class='line'>$ xinput set-prop 13 "Device Enabled" 0
</span><span class='line'>
</span></code></pre></td></tr></table></div></figure>


<h3>25. visudo</h3>

<p>Sometimes in the visudo we set NOPASSWD, but it didn&rsquo;t take effects, why? because you are belong to some groups, while these group rules overwrite the previous rules you set, simply change all of the corresponding rules to:</p>

<figure class='code'><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
</pre></td><td class='code'><pre><code class=''><span class='line'>NOPASSWD:ALL
</span></code></pre></td></tr></table></div></figure>


<p>Save the file and now you will see <code>sudo command</code> won&rsquo;t ask you input anything.</p>

<h3>26. Youtube download</h3>

<p>Ubuntu could directly download youtube videos via install youtube-dl:</p>

<figure class='code'><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
</pre></td><td class='code'><pre><code class=''><span class='line'>$ sudo apt-get install youtube-dl
</span></code></pre></td></tr></table></div></figure>


<h3>27. perl-rename</h3>

<p>As ArchLinux&rsquo;s default rename tool is very simple use following rename tools provided via perl:</p>

<figure class='code'><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
<span class='line-number'>3</span>
<span class='line-number'>4</span>
<span class='line-number'>5</span>
</pre></td><td class='code'><pre><code class=''><span class='line'>$ sudo pacman -S perl-rename
</span><span class='line'>$  vim ~/.zshrc
</span><span class='line'>### The default rename didn't support regex, use perl-rename instead.
</span><span class='line'>alias rename='perl-rename'
</span><span class='line'>
</span></code></pre></td></tr></table></div></figure>


<h3>28. udiskie</h3>

<p>udiskie is for automatically mount/umount usb disks, but the ubuntu won&rsquo;t support it in official repository, we could install it via:</p>

<figure class='code'><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
</pre></td><td class='code'><pre><code class=''><span class='line'>$ sudo pip install udiskie
</span></code></pre></td></tr></table></div></figure>


<p>mount and umount disks via:</p>

<figure class='code'><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
</pre></td><td class='code'><pre><code class=''><span class='line'>$ sudo udiskie-mount -a
</span><span class='line'>$ sudo udiskie-umount -a
</span></code></pre></td></tr></table></div></figure>


<h3>29. git merge conflicts</h3>

<p>Sometimes when you <code>git pull</code> from remote repository, you will got some anoying hint messages which shows you have merge conflicts, following is the steps for solving this issue:</p>

<figure class='code'><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
<span class='line-number'>3</span>
</pre></td><td class='code'><pre><code class=''><span class='line'>$ git pull
</span><span class='line'>$ git stash
</span><span class='line'>$ git pull
</span></code></pre></td></tr></table></div></figure>


<p>Now you are ready to work under merged trees.</p>

<h3>30. Git remote repository</h3>

<p>When first git clone to local, then git push origin master, it will complains:</p>

<figure class='code'><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
<span class='line-number'>3</span>
<span class='line-number'>4</span>
<span class='line-number'>5</span>
<span class='line-number'>6</span>
<span class='line-number'>7</span>
<span class='line-number'>8</span>
</pre></td><td class='code'><pre><code class=''><span class='line'>[Trusty@~/Code/herokublog]$ git push origin master
</span><span class='line'>fatal: remote error: 
</span><span class='line'>  You can't push to git://github.com/xxxx/herokublog.git
</span><span class='line'>  Use https://github.com/xxxx/herokublog.git
</span><span class='line'>[Trusty@~/Code/herokublog]$ ssh -T git@github.com
</span><span class='line'>X11 forwarding request failed on channel 0
</span><span class='line'>Hi xxxx! You've successfully authenticated, but GitHub does not provide shell access.
</span><span class='line'>[Trusty@~/Code/herokublog]$ git remote set-url origin git@github.com:xxxx/herokublog.git
</span></code></pre></td></tr></table></div></figure>


<p>After setting this, we could use <code>git push origin master</code> for submitting our changes.</p>

<h3>31. Replace all of the strings under one folder</h3>

<p>Simply use sed for replacing these strings:</p>

<figure class='code'><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
<span class='line-number'>3</span>
<span class='line-number'>4</span>
<span class='line-number'>5</span>
<span class='line-number'>6</span>
<span class='line-number'>7</span>
</pre></td><td class='code'><pre><code class=''><span class='line'>Trusty@MassTestOnUbuntu1404:~/charms/trusty$ grep -rl "http://archive.ubuntu.com" ./ | wc -l
</span><span class='line'>3
</span><span class='line'>Trusty@MassTestOnUbuntu1404:~/charms/trusty$ grep -rl "http://archive.ubuntu.com" ./ | xargs sed -i 's|http://archive.ubuntu.com|http://http://mirrors.aliyun.com|g'
</span><span class='line'>Trusty@MassTestOnUbuntu1404:~/charms/trusty$ grep -rl "http://archive.ubuntu.com" ./ | wc -l
</span><span class='line'>0
</span><span class='line'>Trusty@MassTestOnUbuntu1404:~/charms/trusty$ grep -rl "http://mirrors" ./ | wc -l
</span><span class='line'>3
</span></code></pre></td></tr></table></div></figure>


<h3>32. Use local LXC repository</h3>

<figure class='code'><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
<span class='line-number'>3</span>
<span class='line-number'>4</span>
<span class='line-number'>5</span>
</pre></td><td class='code'><pre><code class=''><span class='line'>So, let's say you downloaded the ubuntu trusty amd64 tarballs, you need to do:
</span><span class='line'> - mkdir -p /var/cache/lxc/download/ubuntu/trusty/amd64/default/
</span><span class='line'> - copy rootfs.tar.xz in /var/cache/lxc/download/ubuntu/trusty/amd64/default/
</span><span class='line'> - unpack the content of meta.tar.xz in /var/cache/lxc/download/ubuntu/trusty/amd64/default/
</span><span class='line'> - Then run the download template with: -d ubuntu -r trusty -a amd64
</span></code></pre></td></tr></table></div></figure>


<h3>33. Use rsync for syncing the files</h3>

<figure class='code'><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
<span class='line-number'>3</span>
</pre></td><td class='code'><pre><code class=''><span class='line'>$ rsync -e 'ssh -p 1234' username@hostname:SourceFile DestFile
</span><span class='line'>Example:    
</span><span class='line'>$ rsync -avH --progress '-e ssh -p 2223' Trusty@1xx.xxx.xxx.xxx:/home/Trusty/charms/trusty/ ~/charms/trusty/
</span></code></pre></td></tr></table></div></figure>


<h3>34. Use dmidecode to view your hardware configuration</h3>

<p>dmidecode is a tool-set for dump out your SMIBIOS configuration in readable format, use following command for readout the maximum support moemory of your system, and the already installed memory information on your system:</p>

<figure class='code'><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
</pre></td><td class='code'><pre><code class=''><span class='line'>$ sudo dmidecode -t 16
</span><span class='line'>$ sudo dmidecode -t 17
</span></code></pre></td></tr></table></div></figure>


<h3>35. Use fslint for searching out the duplicated files</h3>

<p>fslint could search the directory and find out the duplicated files. <br/>
Install it via:</p>

<figure class='code'><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
</pre></td><td class='code'><pre><code class=''><span class='line'>$ sudo apt-get install fslint
</span><span class='line'>$ fslint-gui
</span></code></pre></td></tr></table></div></figure>


<h3>36. Limitation Bandwidth</h3>

<p>Use following command could limit the specified userspace programs' bandwidth:</p>

<figure class='code'><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
</pre></td><td class='code'><pre><code class=''><span class='line'>$ trickle -s -d 50 -w 100 firefox
</span><span class='line'>http://stackoverflow.com/questions/10328568/simulate-limited-bandwidth-from-within-chrome
</span></code></pre></td></tr></table></div></figure>


<h3>37. Grep with color</h3>

<p>grep&rsquo;s default output is without colorful output, do following for enable the colorful output:</p>

<figure class='code'><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
</pre></td><td class='code'><pre><code class=''><span class='line'>alias grep='grep --color=always'
</span></code></pre></td></tr></table></div></figure>


<p>Add this into your .zshrc, so everytime it boots up the grep will output with colors.</p>

<h3>38. RaspberryPI items</h3>

<p>For optimize the RaspberryPI, need to do following:</p>

<figure class='code'><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
<span class='line-number'>3</span>
<span class='line-number'>4</span>
<span class='line-number'>5</span>
</pre></td><td class='code'><pre><code class=''><span class='line'>relatime/atime, use relatime
</span><span class='line'>cat /sys/block/mmcblk0/queue/scheduler/
</span><span class='line'>noop deadline cfq
</span><span class='line'>use noop
</span><span class='line'>[noop] deadline cfq
</span></code></pre></td></tr></table></div></figure>


<h3>39. Install OpenStack On CentOS</h3>

<p>The following tips:</p>

<figure class='code'><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
<span class='line-number'>3</span>
<span class='line-number'>4</span>
</pre></td><td class='code'><pre><code class=''><span class='line'>   35  packstack --answer-file=/root/answer.txt
</span><span class='line'>   41  cat /etc/sysconfig/selinux
</span><span class='line'>   42  vim /etc/selinux/config
</span><span class='line'>Disable selinux, then try it again
</span></code></pre></td></tr></table></div></figure>


<p>&lt;&lt;&lt;&lt;&lt;&lt;&lt; HEAD</p>

<h3>40. Install OpenContrail/OpenStack</h3>

<p><a href="https://fosskb.wordpress.com/2014/10/18/openstack-juno-on-ubuntu-14-10/">https://fosskb.wordpress.com/2014/10/18/openstack-juno-on-ubuntu-14-10/</a></p>

<h1><a href="https://techwiki.juniper.net/Documentation/Contrail/Contrail_Controller_Getting_Started_Guide/10_In_Context%3A_Contrail_Controller_Getting_Started_Guide">https://techwiki.juniper.net/Documentation/Contrail/Contrail_Controller_Getting_Started_Guide/10_In_Context%3A_Contrail_Controller_Getting_Started_Guide</a>     </h1>

<h3>40. Docker save/load</h3>

<p>In the server, do:</p>

<figure class='code'><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
</pre></td><td class='code'><pre><code class=''><span class='line'>docker save ubuntu&gt;/root/myubuntu.tar
</span></code></pre></td></tr></table></div></figure>


<p>Scp it to client machine, and in client machine, do:</p>

<figure class='code'><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
</pre></td><td class='code'><pre><code class=''><span class='line'>docker load&lt;/root/myubuntu.tar
</span></code></pre></td></tr></table></div></figure>


<p>Examine it via:</p>

<figure class='code'><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
<span class='line-number'>3</span>
</pre></td><td class='code'><pre><code class=''><span class='line'>[root@10-17-17-183 ~]# docker images
</span><span class='line'>REPOSITORY          TAG                 IMAGE ID            CREATED             VIRTUAL SIZE
</span><span class='line'>ubuntu              latest              d0955f21bf24        2 weeks ago         188.3 MB
</span></code></pre></td></tr></table></div></figure>


<h3>41. Build Maas Based CentOS Image</h3>

<p>Following is just the commands:</p>

<figure class='code'><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
<span class='line-number'>3</span>
<span class='line-number'>4</span>
</pre></td><td class='code'><pre><code class=''><span class='line'>root@pc121:~/iso/CentOSImage/maas-image-builder# #./bin/maas-image-builder -o centos6-amd64-root-tgz centos --edition 6                        
</span><span class='line'>root@pc121:~/iso/CentOSImage/maas-image-builder# pwd
</span><span class='line'>/home/clouder/iso/CentOSImage/maas-image-builder
</span><span class='line'>
</span></code></pre></td></tr></table></div></figure>


<blockquote><blockquote><blockquote><blockquote><blockquote><blockquote><blockquote><p>58372fecc80eeda12cddd4001534fc541cab8f30</p></blockquote></blockquote></blockquote></blockquote></blockquote></blockquote></blockquote>

<h3>42. View multiply errors</h3>

<p>For displaying all of the error/warnings.</p>

<figure class='code'><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
</pre></td><td class='code'><pre><code class=''><span class='line'>for file in $(ls /var/log/nova/); do cat /var/log/nova/$file | grep -iE 'error|warn' ; done
</span></code></pre></td></tr></table></div></figure>


<h3>43. Reference for docker and contrail</h3>

<p><a href="http://www.opencontrail.org/docker-with-opencontrail/">http://www.opencontrail.org/docker-with-opencontrail/</a></p>

<h3>44. Run Jobs at certain time</h3>

<p>Following is an example for automatically download the iso file at the spare time of the office network.</p>

<figure class='code'><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
</pre></td><td class='code'><pre><code class=''><span class='line'># echo "wget http://mirrors.aliyun.com/ubuntu-releases/15.04/ubuntu-15.04-server-amd64.iso -O /home/juju/iso/ubuntu-15.04-server-amd64.iso " | at 12:27
</span></code></pre></td></tr></table></div></figure>


<h3>45. Check kvm</h3>

<p>We could use <code>kvm-ok</code> for checking your cpu is compatible for use kvm acceleration.</p>

<figure class='code'><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
</pre></td><td class='code'><pre><code class=''><span class='line'>$ sudo apt-get install cpu-checker
</span><span class='line'>$ kvm-ok
</span></code></pre></td></tr></table></div></figure>


<p>The output will shows whether your cpu support kvm or not.</p>

<h3>46. Quickly Installation the Desktop</h3>

<p>Turn your minimal CentOS into a full Desktop:</p>

<figure class='code'><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
<span class='line-number'>3</span>
</pre></td><td class='code'><pre><code class=''><span class='line'>$  sudo yum install system-config-kickstart
</span><span class='line'>$  sudo yum install gnome-desktop
</span><span class='line'>$  sudo yum -y groupinstall "X Window System" "Desktop"
</span></code></pre></td></tr></table></div></figure>


<p>Enter the desktop via <code>startx</code></p>

<h3>47. Restart bluetooth in Ubuntu</h3>

<p>Sometimes the bluetooth will fail on Ubuntu, using following command for restart the bluetooth service:</p>

<figure class='code'><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
</pre></td><td class='code'><pre><code class=''><span class='line'>$ sudo /etc/init.d/bluetooth restart
</span></code></pre></td></tr></table></div></figure>


<p>Now you could continue to detect the devices and setup the configuration.</p>

<h3>48. Control the network flow</h3>

<p>Use wondershapt for controlling the network flow:</p>

<figure class='code'><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
</pre></td><td class='code'><pre><code class=''><span class='line'># wondershaper eth0 3000 500</span></code></pre></td></tr></table></div></figure>


<p>The first parameter is the download rate, while the second parameter is the upload rate..</p>

<h3>49. Can&rsquo;t git remote</h3>

<p>You should edit the remote branch like following to enable the git push origin:</p>

<figure class='code'><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
<span class='line-number'>3</span>
<span class='line-number'>4</span>
<span class='line-number'>5</span>
<span class='line-number'>6</span>
<span class='line-number'>7</span>
<span class='line-number'>8</span>
</pre></td><td class='code'><pre><code class=''><span class='line'>$ git push origin master
</span><span class='line'>fatal: remote error: 
</span><span class='line'>  You can't push to git://github.com/User/xxx.git
</span><span class='line'>  Use https://github.com/User/xxx.git
</span><span class='line'>  Use https://github.com/purplepalmdash/NewBlog.git
</span><span class='line'>$ git remote rm origin
</span><span class='line'>$ git remote add origin git@github.com:User/xxx.git
</span><span class='line'>$ git push origin master
</span></code></pre></td></tr></table></div></figure>


<h3>50. Quickly Setup NFS Server</h3>

<p>On Ubuntu, first install the nfs-server:</p>

<figure class='code'><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
<span class='line-number'>3</span>
<span class='line-number'>4</span>
</pre></td><td class='code'><pre><code class=''><span class='line'>$ sudo apt-get install nfs-kernel-server
</span><span class='line'>$ sudo vim /etc/exports 
</span><span class='line'>/media/repo     192.168.1.0/255.255.255.0(rw,sync,no_subtree_check)
</span><span class='line'>$ sudo /etc/init.d/nfs-kernel-server restart</span></code></pre></td></tr></table></div></figure>


<p>Mount it via:</p>

<figure class='code'><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
</pre></td><td class='code'><pre><code class=''><span class='line'>$ sudo mount -t nfs 192.168.1.13:/media/repo /mnt</span></code></pre></td></tr></table></div></figure>


<h3>51. Set Aliyun For CentOS7</h3>

<p>Run following commands will update the CentOS repository and import the epel repository for CentOS7</p>

<figure class='code'><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
<span class='line-number'>3</span>
<span class='line-number'>4</span>
<span class='line-number'>5</span>
</pre></td><td class='code'><pre><code class=''><span class='line'># mv /etc/yum.repos.d/CentOS-Base.repo /etc/yum.repos.d/CentOS-Base.repo.backup
</span><span class='line'># wget -O /etc/yum.repos.d/CentOS-Base.repo http://mirrors.aliyun.com/repo/Centos-7.repo
</span><span class='line'># yum makecache
</span><span class='line'>wget -O /etc/yum.repos.d/epel.repo http://mirrors.aliyun.com/repo/epel-7.repo
</span><span class='line'># yum  -y  update</span></code></pre></td></tr></table></div></figure>


<h3>52. Set apt-proxy for Ubuntu</h3>

<p>If you have set the apt-proxy, remember the listening port is:</p>

<figure class='code'><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
</pre></td><td class='code'><pre><code class=''><span class='line'>$ cat /etc/apt/apt.conf
</span><span class='line'>Acquire::http::Proxy "http://10.3.3.5:3142"</span></code></pre></td></tr></table></div></figure>


<p>The configuration for apt-proxy could be found via google.</p>

<h3>54. Use gem taobao source</h3>

<p>For avoiding the GFW.</p>

<figure class='code'><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
</pre></td><td class='code'><pre><code class=''><span class='line'>/opt/chef/embedded/bin/gemsources -a http://ruby.taobao.org/</span></code></pre></td></tr></table></div></figure>


<h3>53. Use Aliyun Repository</h3>

<figure class='code'><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
</pre></td><td class='code'><pre><code class=''><span class='line'>gem source -r https://rubygems.org/
</span><span class='line'>gem source -a http://mirrors.aliyun.com/rubygems/</span></code></pre></td></tr></table></div></figure>


<h3>54. XDMCP Error</h3>

<figure class='code'><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
<span class='line-number'>3</span>
<span class='line-number'>4</span>
<span class='line-number'>5</span>
<span class='line-number'>6</span>
<span class='line-number'>7</span>
<span class='line-number'>8</span>
<span class='line-number'>9</span>
</pre></td><td class='code'><pre><code class=''><span class='line'> XDMCP fatal error: Session declined Maximum number of open sessions from your host reached from .
</span><span class='line'>
</span><span class='line'>[root:~]# cat /etc/gdm/custom.conf
</span><span class='line'>[xdmcp]
</span><span class='line'>Port=177
</span><span class='line'>+ DisplaysPerHost=5
</span><span class='line'>Enable=true
</span><span class='line'>
</span><span class='line'># reboot</span></code></pre></td></tr></table></div></figure>


<p>Now your client will successfully login to the remote server.</p>

<h3>55. Upgrade Ubuntu14.04.2 Kernel</h3>

<p>For upgrade it to 3.16.xxx, simplying use following command:</p>

<figure class='code'><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
</pre></td><td class='code'><pre><code class=''><span class='line'>$ sudo apt-get install linux-image-generic-lts-utopic</span></code></pre></td></tr></table></div></figure>


<h3>56. Install Docker on Ubuntu</h3>

<figure class='code'><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
</pre></td><td class='code'><pre><code class=''><span class='line'>$ wget -qO- https://get.docker.com/ | sh</span></code></pre></td></tr></table></div></figure>


<h3>57. Permanent Change Hostname on Fedora</h3>

<figure class='code'><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
</pre></td><td class='code'><pre><code class=''><span class='line'>$ sudo hostnamectl set-hostname --static "YOUR-HOSTNAME-HERE"</span></code></pre></td></tr></table></div></figure>


<h3>58. Remote VNC via SSH</h3>

<figure class='code'><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
<span class='line-number'>3</span>
<span class='line-number'>4</span>
<span class='line-number'>5</span>
<span class='line-number'>6</span>
<span class='line-number'>7</span>
<span class='line-number'>8</span>
</pre></td><td class='code'><pre><code class=''><span class='line'>Home machine:     
</span><span class='line'>ssh -R *:6234:localhost:5901 xxxx@1xxx.xxx.xxx.xxx -p xxxx4
</span><span class='line'>
</span><span class='line'>Server, forward 6234 to 16234:    
</span><span class='line'>ssh -NfL *:16234:localhost:6234 localhost -p xxxx4
</span><span class='line'>
</span><span class='line'>Company:    
</span><span class='line'>vncviewer 1zxxx.xxx.xxx.xxx:16234</span></code></pre></td></tr></table></div></figure>


<h3>59. Disable byobu from scrolling</h3>

<p>This is because the byobu use tmux for the backend. Change it into screen.</p>

<figure class='code'><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
</pre></td><td class='code'><pre><code class=''><span class='line'>$ byobu-select-backend 
</span><span class='line'># and selecting screen (option 2).</span></code></pre></td></tr></table></div></figure>


<h3>60. Add items into the host file</h3>

<figure class='code'><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
</pre></td><td class='code'><pre><code class=''><span class='line'># ifconfig | awk -v MYHOST=$(hostname) '/inet addr/{print substr($2,6),"\t",MYHOST}'&gt;&gt;/etc/hosts</span></code></pre></td></tr></table></div></figure>


<h3>61. GPG Issues</h3>

<figure class='code'><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
</pre></td><td class='code'><pre><code class=''><span class='line'>https://help.ubuntu.com/community/GnuPrivacyGuardHowto#Using_GnuPG_to_generate_a_key</span></code></pre></td></tr></table></div></figure>


<h3>62. Mirror Whole Website</h3>

<p>Use Wget for retrieving all of the items:</p>

<figure class='code'><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
</pre></td><td class='code'><pre><code class=''><span class='line'>[root:/home/juju/Fuel61Repository]# wget --recursive -c -np -k -L http://mirror.fuel-infra.org/</span></code></pre></td></tr></table></div></figure>


<h3>63. Grouplist for yum</h3>

<p>yum install the group of the X window System, thus we could forwarding X11.</p>

<figure class='code'><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
</pre></td><td class='code'><pre><code class=''><span class='line'>$ sudo yum grouplist
</span><span class='line'>$ sudo yum groupinstall "X Window System"</span></code></pre></td></tr></table></div></figure>

</div>
  
  


    </article>
  
  
    <article>
      
  <header>
    
      <h1 class="entry-title"><a href="/blog/2014/10/18/linux2-dot-6-39-for-utu2440/">Linux2.6.39 for Utu2440</a></h1>
    
    
      <p class="meta">
        




<time class='entry-date' datetime='2014-10-18T16:33:00+08:00'><span class='date'><span class='date-month'>Oct</span> <span class='date-day'>18</span><span class='date-suffix'>th</span>, <span class='date-year'>2014</span></span> <span class='time'>4:33 pm</span></time>
        
         | <a href="/blog/2014/10/18/linux2-dot-6-39-for-utu2440/#disqus_thread">Comments</a>
        
      </p>
    
  </header>


  <div class="entry-content"><h3>Kernel Preparation</h3>

<p>First download the kernel source from kernel.org:</p>

<figure class='code'><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
</pre></td><td class='code'><pre><code class=''><span class='line'>$ wget https://www.kernel.org/pub/linux/kernel/v2.6/linux-2.6.39.tar.bz2
</span><span class='line'>$ tar xjvf lnux-2.6.39.tar.bz2
</span></code></pre></td></tr></table></div></figure>


<p>Change the Makefile:</p>

<figure class='code'><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
<span class='line-number'>3</span>
<span class='line-number'>4</span>
<span class='line-number'>5</span>
<span class='line-number'>6</span>
<span class='line-number'>7</span>
<span class='line-number'>8</span>
<span class='line-number'>9</span>
</pre></td><td class='code'><pre><code class=''><span class='line'>$ cat Makefile
</span><span class='line'>export KBUILD_BUILDHOST := $(SUBARCH)
</span><span class='line'>ARCH      ?= $(SUBARCH)
</span><span class='line'>CROSS_COMPILE ?= $(CONFIG_CROSS_COMPILE:"%"=%)
</span><span class='line'>
</span><span class='line'># Added our own cross-compiler here.
</span><span class='line'>ARCH      ?= arm
</span><span class='line'>CROSS_COMPILE ?= arm-linux-
</span><span class='line'># End of added own cross-compiler. 
</span></code></pre></td></tr></table></div></figure>


<p>Change the pltf input clock:</p>

<figure class='code'><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
<span class='line-number'>3</span>
<span class='line-number'>4</span>
<span class='line-number'>5</span>
<span class='line-number'>6</span>
<span class='line-number'>7</span>
<span class='line-number'>8</span>
<span class='line-number'>9</span>
</pre></td><td class='code'><pre><code class=''><span class='line'>$ vim  arch/arm/mach-s3c2440/mach-smdk2440.c
</span><span class='line'>static void __init smdk2440_map_io(void)
</span><span class='line'>{
</span><span class='line'>  s3c24xx_init_io(smdk2440_iodesc, ARRAY_SIZE(smdk2440_iodesc));
</span><span class='line'>  //s3c24xx_init_clocks(16934400);
</span><span class='line'>  // Change the input clock adjust to utu2440
</span><span class='line'>  s3c24xx_init_clocks(12000000);
</span><span class='line'>  s3c24xx_init_uarts(smdk2440_uartcfgs, ARRAY_SIZE(smdk2440_uartcfgs));
</span><span class='line'>}
</span></code></pre></td></tr></table></div></figure>


<p>Change the machine code(this code is the same as the bootloader&rsquo;s parameter, bootloader transfer 5244 to Linux Kernel.</p>

<figure class='code'><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
</pre></td><td class='code'><pre><code class=''><span class='line'>$ vim arch/arm/tools/mach-types 
</span><span class='line'>s3c2440           ARCH_S3C2440        S3C2440         5244
</span></code></pre></td></tr></table></div></figure>


<p>Change the Nand flash partitions:</p>

<figure class='code'><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
<span class='line-number'>3</span>
<span class='line-number'>4</span>
<span class='line-number'>5</span>
<span class='line-number'>6</span>
<span class='line-number'>7</span>
<span class='line-number'>8</span>
<span class='line-number'>9</span>
<span class='line-number'>10</span>
<span class='line-number'>11</span>
<span class='line-number'>12</span>
<span class='line-number'>13</span>
<span class='line-number'>14</span>
<span class='line-number'>15</span>
<span class='line-number'>16</span>
<span class='line-number'>17</span>
<span class='line-number'>18</span>
<span class='line-number'>19</span>
<span class='line-number'>20</span>
<span class='line-number'>21</span>
<span class='line-number'>22</span>
<span class='line-number'>23</span>
<span class='line-number'>24</span>
<span class='line-number'>25</span>
<span class='line-number'>26</span>
<span class='line-number'>27</span>
</pre></td><td class='code'><pre><code class=''><span class='line'>$ vim  arch/arm/plat-s3c24xx/common-smdk.c
</span><span class='line'>static struct mtd_partition smdk_default_nand_part[] = {
</span><span class='line'>  // partition for utu2440
</span><span class='line'>  [0]= {
</span><span class='line'>      .name = "bootloader", 
</span><span class='line'>      .size = 0x00040000,
</span><span class='line'>      .offset = 0x00000000,
</span><span class='line'>  },
</span><span class='line'>  [1]= {
</span><span class='line'>      .name = "kernel", 
</span><span class='line'>      .size = 0x00060000,
</span><span class='line'>      .offset = 0x00200000,
</span><span class='line'>  },
</span><span class='line'>  [2]= {
</span><span class='line'>      .name = "root", 
</span><span class='line'>      .size = 0x00260000,
</span><span class='line'>      .offset = 0x03dac000,
</span><span class='line'>  }
</span><span class='line'>  
</span><span class='line'>
</span><span class='line'>};
</span><span class='line'>
</span><span class='line'>static struct s3c2410_platform_nand smdk_nand_info = {
</span><span class='line'>  .tacls      = 0,
</span><span class='line'>  .twrph0     = 30,
</span><span class='line'>  .twrph1     = 0,
</span><span class='line'>
</span></code></pre></td></tr></table></div></figure>


<p>Begin to configure:</p>

<figure class='code'><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
<span class='line-number'>3</span>
<span class='line-number'>4</span>
<span class='line-number'>5</span>
<span class='line-number'>6</span>
<span class='line-number'>7</span>
<span class='line-number'>8</span>
<span class='line-number'>9</span>
<span class='line-number'>10</span>
<span class='line-number'>11</span>
<span class='line-number'>12</span>
</pre></td><td class='code'><pre><code class=''><span class='line'># export PATH=/opt/cross/arm-linux-gcc_4.3.2/bin:$PATH
</span><span class='line'># vim Makefile
</span><span class='line'>//ARCH                 ?= $(SUBARCH)
</span><span class='line'>//CROSS_COMPILE     ?=
</span><span class='line'>ARCH                 ?= arm
</span><span class='line'>CROSS_COMPILE     ?= arm-linux-
</span><span class='line'># make s3c2410_defconfig
</span><span class='line'># make menuconfig
</span><span class='line'>System Type-&gt; ARM system type(Samsung S3C2410, S3C2412, ......
</span><span class='line'>S3C2410 Machines  ---&gt;    [*] SMDK2410/A9M2410
</span><span class='line'>S3C2440 AND S3C2442 Machines ---&gt; [*] SMDK2440     [*] SMDK2440 with S3C2440 CPU module 
</span><span class='line'>Kernel Features  ---&gt;   [*] Use the ARM EABI to compile the kernel
</span></code></pre></td></tr></table></div></figure>


<p>Then <code>make all V=1</code>  <br/>
Generate uImage:</p>

<figure class='code'><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
<span class='line-number'>3</span>
<span class='line-number'>4</span>
<span class='line-number'>5</span>
<span class='line-number'>6</span>
<span class='line-number'>7</span>
<span class='line-number'>8</span>
</pre></td><td class='code'><pre><code class=''><span class='line'># cp arch/arm/boot/zImage ./
</span><span class='line'>[root@TrustyArch linux-2.6.39]# mkimage -A arm -O linux -n $(date --iso-8601=seconds) -C NONE -a 0x30008000 -e 0x30008000 -d zImage uImage
</span><span class='line'>Image Name:   2014-10-18T20:27:54+0800
</span><span class='line'>Created:      Sat Oct 18 20:27:54 2014
</span><span class='line'>Image Type:   ARM Linux Kernel Image (uncompressed)
</span><span class='line'>Data Size:    2094940 Bytes = 2045.84 kB = 2.00 MB
</span><span class='line'>Load Address: 30008000
</span><span class='line'>Entry Point:  30008000
</span></code></pre></td></tr></table></div></figure>


<p>Now copy the uImage to the tftp directory for testing</p>
</div>
  
  


    </article>
  
  
    <article>
      
  <header>
    
      <h1 class="entry-title"><a href="/blog/2014/10/18/cross-compile-the-kernel-for-utu2440/">Cross-compile the Kernel for Utu2440</a></h1>
    
    
      <p class="meta">
        




<time class='entry-date' datetime='2014-10-18T16:09:00+08:00'><span class='date'><span class='date-month'>Oct</span> <span class='date-day'>18</span><span class='date-suffix'>th</span>, <span class='date-year'>2014</span></span> <span class='time'>4:09 pm</span></time>
        
         | <a href="/blog/2014/10/18/cross-compile-the-kernel-for-utu2440/#disqus_thread">Comments</a>
        
      </p>
    
  </header>


  <div class="entry-content"><h3>Cross-compiler Preparation</h3>

<p>The official documentation said use gcc-3.4.1 for compiling the kernel.</p>

<figure class='code'><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
<span class='line-number'>3</span>
<span class='line-number'>4</span>
<span class='line-number'>5</span>
<span class='line-number'>6</span>
<span class='line-number'>7</span>
<span class='line-number'>8</span>
<span class='line-number'>9</span>
<span class='line-number'>10</span>
</pre></td><td class='code'><pre><code class=''><span class='line'>$ cat ~/.zshrc | grep -i set341
</span><span class='line'>alias set341='export PATH=/opt/cross/arm-linux-gcc_3.4.1/bin:$PATH'
</span><span class='line'>$ set341
</span><span class='line'>$ pwd
</span><span class='line'>/media/y/embedded/utu2440/UTU2440-F-T1-20080328/YC2440CDROM_DM9000_080328/utuLinuxfor2440V1.5.8/utu-linux_for_s3c2440_dm9000_V1.5.8
</span><span class='line'>$ arm-linux-gcc -v
</span><span class='line'>Reading specs from /opt/cross/arm-linux-gcc_3.4.1/bin/../lib/gcc/arm-linux/3.4.1/specs
</span><span class='line'>Configured with: /work/crosstool-0.27/build/arm-linux/gcc-3.4.1-glibc-2.3.2/gcc-3.4.1/configure --target=arm-linux --host=i686-host_pc-linux-gnu --prefix=/usr/local/arm/3.4.1 --with-headers=/usr/local/arm/3.4.1/arm-linux/include --with-local-prefix=/usr/local/arm/3.4.1/arm-linux --disable-nls --enable-threads=posix --enable-symvers=gnu --enable-__cxa_atexit --enable-languages=c,c++ --enable-shared --enable-c99 --enable-long-long
</span><span class='line'>Thread model: posix
</span><span class='line'>gcc version 3.4.1
</span></code></pre></td></tr></table></div></figure>


<h3>Kernel Compilation</h3>

<p>Compile the kernel via:</p>

<figure class='code'><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
<span class='line-number'>3</span>
</pre></td><td class='code'><pre><code class=''><span class='line'>$ make menuconfig
</span><span class='line'>"Load an Alternate Configuration File"-&gt; config_480272_ts
</span><span class='line'>$ make uImage -j4
</span></code></pre></td></tr></table></div></figure>


<p>Trouble shooting: in ArchLinux, install uboot&rsquo;s mkimage tool via:</p>

<figure class='code'><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
</pre></td><td class='code'><pre><code class=''><span class='line'>$ yaourt -S uboot-mkimage
</span></code></pre></td></tr></table></div></figure>


<p>After compilation finished, copy it to tftpd server and test:</p>

<figure class='code'><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
<span class='line-number'>3</span>
<span class='line-number'>4</span>
<span class='line-number'>5</span>
</pre></td><td class='code'><pre><code class=''><span class='line'>$ cp arch/arm/boot/uImage /media/nfs/rootfs/
</span><span class='line'>$ ls -l uImage 
</span><span class='line'>-rwxrwxrwx 1 root root 1483696 Oct 19  2014 uImage
</span><span class='line'>$ ls -l s3c_kernel/uImage_T5_480x272_ts 
</span><span class='line'>-rw------- 1 nobody nobody 1483468 Oct 19  2014 s3c_kernel/uImage_T5_480x272_ts
</span></code></pre></td></tr></table></div></figure>


<p>We use the compiled kernel and let it runs into the system. Next step we will upgrade the Linux kernel, this may lead to some kernel driver related working.      <br/>
Current kernel is:</p>

<figure class='code'><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
</pre></td><td class='code'><pre><code class=''><span class='line'>[root@utu-linux /]# uname -a
</span><span class='line'>Linux utu-linux 2.6.13-utulinux2440 #380 Sat Oct 18 16:14:06 CST 2014 armv4tl unknown
</span></code></pre></td></tr></table></div></figure>



</div>
  
  


    </article>
  
  
    <article>
      
  <header>
    
      <h1 class="entry-title"><a href="/blog/2014/10/18/tftpd-on-ubuntu/">Tftpd on Ubuntu</a></h1>
    
    
      <p class="meta">
        




<time class='entry-date' datetime='2014-10-18T15:24:00+08:00'><span class='date'><span class='date-month'>Oct</span> <span class='date-day'>18</span><span class='date-suffix'>th</span>, <span class='date-year'>2014</span></span> <span class='time'>3:24 pm</span></time>
        
         | <a href="/blog/2014/10/18/tftpd-on-ubuntu/#disqus_thread">Comments</a>
        
      </p>
    
  </header>


  <div class="entry-content"><p>For updating the kernel on s3c2440 board, I have to setup the tftpd server.</p>

<h3>tftpd server</h3>

<p>Install tfpd-hpa:</p>

<figure class='code'><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
</pre></td><td class='code'><pre><code class=''><span class='line'>sudo apt-get install tftpd-hpa
</span></code></pre></td></tr></table></div></figure>


<p>Setup the directory name and edit the /etc/default/tftpd-hpa:</p>

<figure class='code'><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
<span class='line-number'>3</span>
<span class='line-number'>4</span>
<span class='line-number'>5</span>
<span class='line-number'>6</span>
<span class='line-number'>7</span>
</pre></td><td class='code'><pre><code class=''><span class='line'>root@joggler:/etc# cat /etc/default/tftpd-hpa 
</span><span class='line'># /etc/default/tftpd-hpa
</span><span class='line'>
</span><span class='line'>TFTP_USERNAME="tftp"
</span><span class='line'>TFTP_DIRECTORY="/media/nfs/rootfs"
</span><span class='line'>TFTP_ADDRESS="0.0.0.0:69"
</span><span class='line'>TFTP_OPTIONS="--secure"
</span></code></pre></td></tr></table></div></figure>


<p>Then restart the server:</p>

<figure class='code'><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
</pre></td><td class='code'><pre><code class=''><span class='line'>service tftpd-hpa restart
</span></code></pre></td></tr></table></div></figure>


<p>Other commands:</p>

<figure class='code'><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
<span class='line-number'>3</span>
<span class='line-number'>4</span>
<span class='line-number'>5</span>
</pre></td><td class='code'><pre><code class=''><span class='line'>service tftpd-hpa status
</span><span class='line'>service tftpd-hpa stop
</span><span class='line'>service tftpd-hpa start
</span><span class='line'>service tftpd-hpa restart
</span><span class='line'>service tftpd-hpa force-reload
</span></code></pre></td></tr></table></div></figure>


<h3>Testing</h3>

<p>In the same machine, use following commands for testing the tftpd server(Make sure you have the get.txt under the root directory of your tftpd specified directory):</p>

<figure class='code'><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
<span class='line-number'>3</span>
</pre></td><td class='code'><pre><code class=''><span class='line'>$ tftp localhost
</span><span class='line'>tftp&gt; get get.txt
</span><span class='line'>tftp&gt; quit
</span></code></pre></td></tr></table></div></figure>


<h3>utu2440</h3>

<p>Test the utu2440&rsquo;s load_kernel function.   <br/>
Copy the corresponding kernel file in tftpd server:</p>

<figure class='code'><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
</pre></td><td class='code'><pre><code class=''><span class='line'>$ cp s3c_kernel/uImage_T5_480x272_ts ./uImage
</span><span class='line'>$ chmod 777 uImage
</span></code></pre></td></tr></table></div></figure>


<p>First set the ipaddr for utu2440&rsquo;s uboot:</p>

<figure class='code'><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
<span class='line-number'>3</span>
<span class='line-number'>4</span>
<span class='line-number'>5</span>
</pre></td><td class='code'><pre><code class=''><span class='line'>utu-bootloader=&gt;&gt;&gt;setenv ipaddr 10.0.0.15
</span><span class='line'>utu-bootloader=&gt;&gt;&gt;ping 10.0.0.1
</span><span class='line'>dm9000 i/o: 0x18000300, id: 0x90000a46 
</span><span class='line'>MAC: 00:0c:20:02:0a:5b
</span><span class='line'>host 10.0.0.1 is alive
</span></code></pre></td></tr></table></div></figure>


<p>then set the server&rsquo;s address to 10.0.0.11(that&rsquo;s joggler with tftpd server enabled), use <code>printenv</code> for inspecting your configuration:</p>

<figure class='code'><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
<span class='line-number'>3</span>
<span class='line-number'>4</span>
</pre></td><td class='code'><pre><code class=''><span class='line'>utu-bootloader=&gt;&gt;&gt;setenv ipaddr 10.0.0.15
</span><span class='line'>utu-bootloader=&gt;&gt;&gt;printenv
</span><span class='line'>ipaddr=10.0.0.15
</span><span class='line'>serverip=10.0.0.11
</span></code></pre></td></tr></table></div></figure>


<p>View the embedded &lsquo;install-kernel&rsquo; command:</p>

<figure class='code'><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
<span class='line-number'>3</span>
<span class='line-number'>4</span>
<span class='line-number'>5</span>
<span class='line-number'>6</span>
<span class='line-number'>7</span>
<span class='line-number'>8</span>
<span class='line-number'>9</span>
<span class='line-number'>10</span>
<span class='line-number'>11</span>
<span class='line-number'>12</span>
<span class='line-number'>13</span>
<span class='line-number'>14</span>
<span class='line-number'>15</span>
<span class='line-number'>16</span>
<span class='line-number'>17</span>
<span class='line-number'>18</span>
<span class='line-number'>19</span>
<span class='line-number'>20</span>
<span class='line-number'>21</span>
<span class='line-number'>22</span>
<span class='line-number'>23</span>
<span class='line-number'>24</span>
<span class='line-number'>25</span>
</pre></td><td class='code'><pre><code class=''><span class='line'>utu-bootloader=&gt;&gt;&gt;printenv
</span><span class='line'>install-kernel=tftp 30000000 uImage;nand erase 60000 200000;nand write.i 30000000 60000 0
</span><span class='line'>utu-bootloader=&gt;&gt;&gt;run install-kernel
</span><span class='line'>dm9000 i/o: 0x18000300, id: 0x90000a46 
</span><span class='line'>MAC: 00:0c:20:02:0a:5b
</span><span class='line'>TFTP from server 10.0.0.11; our IP address is 10.0.0.15
</span><span class='line'>Filename 'uImage'.
</span><span class='line'>Load address: 0x30000000
</span><span class='line'>Loading: #################################################################
</span><span class='line'>         #################################################################
</span><span class='line'>         #################################################################
</span><span class='line'>         #################################################################
</span><span class='line'>         ##############################
</span><span class='line'>done
</span><span class='line'>Bytes transferred = 1483468 (16a2cc hex)
</span><span class='line'>
</span><span class='line'>NAND erase: device 0 offset 0x60000, size 0x200000
</span><span class='line'>Erasing at 0x25c000 -- 100% complete.
</span><span class='line'>OK
</span><span class='line'>
</span><span class='line'>NAND write: device 0 offset 0x60000, size 0x0
</span><span class='line'>
</span><span class='line'>Writing data at 0x1ca200 -- 100% complete.
</span><span class='line'> 1483776 bytes written: OK
</span><span class='line'>utu-bootloader=&gt;&gt;&gt;boot
</span></code></pre></td></tr></table></div></figure>


<p>Yes now you could compile your own kernel for utu2440.</p>
</div>
  
  


    </article>
  
  
    <article>
      
  <header>
    
      <h1 class="entry-title"><a href="/blog/2014/10/18/autorestart-autrace/">AutoRestart Autrace</a></h1>
    
    
      <p class="meta">
        




<time class='entry-date' datetime='2014-10-18T11:07:00+08:00'><span class='date'><span class='date-month'>Oct</span> <span class='date-day'>18</span><span class='date-suffix'>th</span>, <span class='date-year'>2014</span></span> <span class='time'>11:07 am</span></time>
        
         | <a href="/blog/2014/10/18/autorestart-autrace/#disqus_thread">Comments</a>
        
      </p>
    
  </header>


  <div class="entry-content"><p>autrace is a proxy tool which I used for auto-converting the proxy for cross the firewall, it runs in remote server but sometimes it will runs into crash condition. Following is the command for auto-restart this proxy tool.</p>

<figure class='code'><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
<span class='line-number'>3</span>
<span class='line-number'>4</span>
<span class='line-number'>5</span>
</pre></td><td class='code'><pre><code class=''><span class='line'>$ cat autrace.sh
</span><span class='line'>#!/bin/sh
</span><span class='line'>while true; do
</span><span class='line'>   /home/xxxxxxxx/code/autrace -s 
</span><span class='line'>done
</span></code></pre></td></tr></table></div></figure>


<p>Everytime we run autrace.sh like following:</p>

<figure class='code'><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
</pre></td><td class='code'><pre><code class=''><span class='line'>/home/xxxxx/code/autrace.sh &
</span></code></pre></td></tr></table></div></figure>


<p>thus autrace will automatically be restart if it crashes.</p>
</div>
  
  


    </article>
  
  
    <article>
      
  <header>
    
      <h1 class="entry-title"><a href="/blog/2014/10/18/ethernet-wakeup/">Ethernet Wakeup</a></h1>
    
    
      <p class="meta">
        




<time class='entry-date' datetime='2014-10-18T09:48:00+08:00'><span class='date'><span class='date-month'>Oct</span> <span class='date-day'>18</span><span class='date-suffix'>th</span>, <span class='date-year'>2014</span></span> <span class='time'>9:48 am</span></time>
        
         | <a href="/blog/2014/10/18/ethernet-wakeup/#disqus_thread">Comments</a>
        
      </p>
    
  </header>


  <div class="entry-content"><h3>Purpose</h3>

<p>I want to wake up my laotop via RaspberryPi, since Rpi&rsquo;s power consumption is extremely low, so this will greatly save the power for laptop.</p>

<h3>Check Status</h3>

<p>On laptop, type following command to see whether your ethernet card support Wake-On-LAN or not:</p>

<figure class='code'><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
<span class='line-number'>3</span>
</pre></td><td class='code'><pre><code class=''><span class='line'>[Trusty@~]$ sudo ethtool enp0s25 | grep Wake-on
</span><span class='line'>  Supports Wake-on: pumbg
</span><span class='line'>  Wake-on: g
</span></code></pre></td></tr></table></div></figure>


<p>The values define what activity to wake on: p (PHY activity), u (unicast activity), m (multicast activity), b (broadcast activity), a (ARP activity), and g (magic packet activity).We need g for WOL to work.</p>

<h3>RaspberryPI Configuration</h3>

<p>Make sure <code>wol</code> is installed, then you should know the target PC&rsquo;s ipaddress and mac address.   <br/>
Wakeup the remote machine via:</p>

<figure class='code'><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
</pre></td><td class='code'><pre><code class=''><span class='line'>$ wol -i 10.0.0.230 c8:xx:xx:xx:xx:xx
</span></code></pre></td></tr></table></div></figure>


<p>You could also set this command into a alias in ~/.bashrc.</p>
</div>
  
  


    </article>
  
  
    <article>
      
  <header>
    
      <h1 class="entry-title"><a href="/blog/2014/10/16/blueman/">Blueman</a></h1>
    
    
      <p class="meta">
        




<time class='entry-date' datetime='2014-10-16T21:14:00+08:00'><span class='date'><span class='date-month'>Oct</span> <span class='date-day'>16</span><span class='date-suffix'>th</span>, <span class='date-year'>2014</span></span> <span class='time'>9:14 pm</span></time>
        
         | <a href="/blog/2014/10/16/blueman/#disqus_thread">Comments</a>
        
      </p>
    
  </header>


  <div class="entry-content"><p>Since I installed the ArchLinux around 3 months ago, but I am too busy to enable the bluetooth headset, now I am free finally, so this is the steps for enable the bluetooth headset.</p>

<h3>Software Installation</h3>

<p>Install blueman:</p>

<figure class='code'><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
</pre></td><td class='code'><pre><code class=''><span class='line'>$ sudo pacman -S blueman
</span><span class='line'>$ sudo pacman -S bluez-utils bluez-libs python2-pybluez
</span></code></pre></td></tr></table></div></figure>


<p>Wait, this method is not OK for current bluez5, so I need to switch to other method.  <br/>
Use official website,  named"Bluetooth headset" on ArchLinux Wiki.</p>

<h3>Bluez5/Pulseaudio</h3>

<p>Install packages:</p>

<figure class='code'><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
</pre></td><td class='code'><pre><code class=''><span class='line'>$ sudo pacman -S pulseaudio-alsa bluez bluez-libs bluez-utils
</span><span class='line'>$ systemctl start bluetooth
</span></code></pre></td></tr></table></div></figure>



</div>
  
  


    </article>
  
  
    <article>
      
  <header>
    
      <h1 class="entry-title"><a href="/blog/2014/10/15/trouble-shooting-on-docker/">Trouble-Shooting on Docker</a></h1>
    
    
      <p class="meta">
        




<time class='entry-date' datetime='2014-10-15T19:07:00+08:00'><span class='date'><span class='date-month'>Oct</span> <span class='date-day'>15</span><span class='date-suffix'>th</span>, <span class='date-year'>2014</span></span> <span class='time'>7:07 pm</span></time>
        
         | <a href="/blog/2014/10/15/trouble-shooting-on-docker/#disqus_thread">Comments</a>
        
      </p>
    
  </header>


  <div class="entry-content"><p>The guideline I follow is from :   <br/>
<a href="https://wiki.archlinux.org/index.php/Docker">https://wiki.archlinux.org/index.php/Docker</a></p>

<h3>Working behind Proxy</h3>

<p>When docker runs under the proxy, it will be blocked by the firewall, thus in the ArchLinux we have to kill the systemd started docker daemon, and manually set the proxy configuration for the docker daemon, following is the tips:</p>

<figure class='code'><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
</pre></td><td class='code'><pre><code class=''><span class='line'>$ systemctl stop docker.service
</span><span class='line'>$ sudo HTTP_PROXY=http://1xx.*.*.2xx:2xx3 docker -d &
</span></code></pre></td></tr></table></div></figure>


<p>Then you run the docker for create the new machine  will be OK.</p>

<h3>Default Configuration</h3>

<p>That leads me for thinking the default configuration of ArchLinux , change it to :</p>

<figure class='code'><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
<span class='line-number'>3</span>
<span class='line-number'>4</span>
<span class='line-number'>5</span>
<span class='line-number'>6</span>
<span class='line-number'>7</span>
<span class='line-number'>8</span>
<span class='line-number'>9</span>
<span class='line-number'>10</span>
<span class='line-number'>11</span>
<span class='line-number'>12</span>
<span class='line-number'>13</span>
<span class='line-number'>14</span>
</pre></td><td class='code'><pre><code class=''><span class='line'>$ cat /usr/lib/systemd/system/docker.service
</span><span class='line'>[Unit]
</span><span class='line'>Description=Docker Application Container Engine
</span><span class='line'>Documentation=http://docs.docker.com
</span><span class='line'>After=network.target docker.socket
</span><span class='line'>Requires=docker.socket
</span><span class='line'>
</span><span class='line'>[Service]
</span><span class='line'>ExecStart=/usr/bin/docker -d 
</span><span class='line'>LimitNOFILE=1048576
</span><span class='line'>LimitNPROC=1048576
</span><span class='line'>
</span><span class='line'>[Install]
</span><span class='line'>Also=docker.socket
</span></code></pre></td></tr></table></div></figure>


<p>Add following line, but failed, Arch Wiki also indicates its failure:</p>

<figure class='code'><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
<span class='line-number'>3</span>
<span class='line-number'>4</span>
</pre></td><td class='code'><pre><code class=''><span class='line'>[Service]
</span><span class='line'>Environment="http_proxy=192.168.1.1:3128"
</span><span class='line'>ExecStart=
</span><span class='line'>ExecStart=/usr/bin/docker -d -g /var/yourDockerDir
</span></code></pre></td></tr></table></div></figure>


<p>So everytime you want to enable proxy, simply manually reload it.</p>

<p>Then reload the service status and restart the docker.service:</p>

<figure class='code'><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
</pre></td><td class='code'><pre><code class=''><span class='line'>sudo systemctl daemon-reload
</span><span class='line'>sudo systemctl restart docker.service
</span></code></pre></td></tr></table></div></figure>


<p>Test the docker to view if it runs well:</p>

<figure class='code'><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
</pre></td><td class='code'><pre><code class=''><span class='line'>$ docker info
</span></code></pre></td></tr></table></div></figure>


<h3>Docker Management</h3>

<p>List the installed images:</p>

<figure class='code'><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
<span class='line-number'>3</span>
<span class='line-number'>4</span>
<span class='line-number'>5</span>
<span class='line-number'>6</span>
<span class='line-number'>7</span>
</pre></td><td class='code'><pre><code class=''><span class='line'>[Trusty@~/code/octo/heroku/Tomcat]$ sudo docker images
</span><span class='line'>REPOSITORY          TAG                 IMAGE ID            CREATED             VIRTUAL SIZE
</span><span class='line'>archlinux           latest              a063a516f4c7        About an hour ago   293 MB
</span><span class='line'>busybox             latest              e72ac664f4f0        13 days ago         2.433 MB
</span><span class='line'>base/archlinux      2014.07.03          ea234cde99e6        12 weeks ago        282.9 MB
</span><span class='line'>base/archlinux      2014.04.01          56c61f5c2920        12 weeks ago        293.3 MB
</span><span class='line'>base/archlinux      latest              dce0559daa1b        12 weeks ago        282.9 MB
</span></code></pre></td></tr></table></div></figure>


<p>List Containers:</p>

<figure class='code'><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
<span class='line-number'>3</span>
<span class='line-number'>4</span>
</pre></td><td class='code'><pre><code class=''><span class='line'>[Trusty@~/code/octo/heroku/Tomcat]$ sudo docker ps -a
</span><span class='line'>CONTAINER ID        IMAGE               COMMAND                CREATED             STATUS                         PORTS               NAMES
</span><span class='line'>50baf5783c6e        busybox:latest      "/bin/echo hello wor   6 minutes ago       Exited (0) 6 minutes ago                           mad_carson          
</span><span class='line'>2f7108d2ee0e        archlinux:latest    "echo Success."        About an hour ago   Exited (0) About an hour ago                       jolly_galileo       
</span></code></pre></td></tr></table></div></figure>


<p>List the running Containers:</p>

<figure class='code'><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
</pre></td><td class='code'><pre><code class=''><span class='line'>[Trusty@~/code/octo/heroku/Tomcat]$ docker ps
</span><span class='line'>CONTAINER ID        IMAGE               COMMAND             CREATED             STATUS              PORTS               NAMES
</span></code></pre></td></tr></table></div></figure>


<p>Now start a container via(This command will run into the container and execute the /bin/bash):</p>

<figure class='code'><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
</pre></td><td class='code'><pre><code class=''><span class='line'>$ docker run -i -t archlinux /bin/bash
</span><span class='line'>[root@b6ab14b2ce65 /]# 
</span></code></pre></td></tr></table></div></figure>


<p>Check the container status:</p>

<figure class='code'><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
<span class='line-number'>3</span>
</pre></td><td class='code'><pre><code class=''><span class='line'>$ docker ps
</span><span class='line'>CONTAINER ID        IMAGE               COMMAND             CREATED             STATUS              PORTS               NAMES
</span><span class='line'>b6ab14b2ce65        archlinux:latest    "/bin/bash"         27 seconds ago      Up 25 seconds                           high_wright   
</span></code></pre></td></tr></table></div></figure>


<p>When you exit, then the ps won&rsquo;t display the corresponding items.</p>

<h3>Install More Images</h3>

<p>Install via:</p>

<figure class='code'><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
</pre></td><td class='code'><pre><code class=''><span class='line'>$ docker run ubuntu /bin/echo hello world
</span><span class='line'>$ docker run centos /bin/echo hello world
</span></code></pre></td></tr></table></div></figure>


<p>Run it ubuntu:</p>

<figure class='code'><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
<span class='line-number'>3</span>
</pre></td><td class='code'><pre><code class=''><span class='line'>$ docker run -i -t ubuntu /bin/bash   
</span><span class='line'>root@34b68719493b:/# cat /etc/issue
</span><span class='line'>Ubuntu 14.04.1 LTS \n \l
</span></code></pre></td></tr></table></div></figure>


<p>Run into centos:</p>

<figure class='code'><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
<span class='line-number'>3</span>
<span class='line-number'>4</span>
<span class='line-number'>5</span>
<span class='line-number'>6</span>
<span class='line-number'>7</span>
<span class='line-number'>8</span>
<span class='line-number'>9</span>
</pre></td><td class='code'><pre><code class=''><span class='line'>$ docker run -i -t centos /bin/bash   
</span><span class='line'>bash-4.2# uname -a
</span><span class='line'>Linux e3ec1911331b 3.16.4-1-ARCH #1 SMP PREEMPT Mon Oct 6 08:22:27 CEST 2014 x86_64 x86_64 x86_64 GNU/Linux
</span><span class='line'>bash-4.2# cat /etc/issue
</span><span class='line'>\S
</span><span class='line'>Kernel \r on an \m
</span><span class='line'>
</span><span class='line'>bash-4.2# which yum
</span><span class='line'>/usr/bin/yum
</span></code></pre></td></tr></table></div></figure>

</div>
  
  


    </article>
  
  
    <article>
      
  <header>
    
      <h1 class="entry-title"><a href="/blog/2014/10/15/building-android-on-server/">Building Android on Server</a></h1>
    
    
      <p class="meta">
        




<time class='entry-date' datetime='2014-10-15T10:41:00+08:00'><span class='date'><span class='date-month'>Oct</span> <span class='date-day'>15</span><span class='date-suffix'>th</span>, <span class='date-year'>2014</span></span> <span class='time'>10:41 am</span></time>
        
         | <a href="/blog/2014/10/15/building-android-on-server/#disqus_thread">Comments</a>
        
      </p>
    
  </header>


  <div class="entry-content"><h3>New LXC Machine</h3>

<p>Building Android need a Ubuntu machine, so I created the LXC machine which runs Ubuntu.  <br/>
Install the bootstrap:</p>

<figure class='code'><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
</pre></td><td class='code'><pre><code class=''><span class='line'>zypper in bootstrap
</span></code></pre></td></tr></table></div></figure>


<p>Then create the Ubuntu LXC via:</p>

<figure class='code'><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
</pre></td><td class='code'><pre><code class=''><span class='line'>export LANG=en_US.UTF-8
</span><span class='line'>Linux59:~ # lxc-create -n Ubuntu_Container -t /usr/share/lxc/templates/lxc-ubuntu
</span></code></pre></td></tr></table></div></figure>


<p>Start the container, username and password are ubuntu:</p>

<figure class='code'><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
</pre></td><td class='code'><pre><code class=''><span class='line'>lxc-start -n Ubuntu_Container
</span></code></pre></td></tr></table></div></figure>


<h3>Configure the LXC Machine</h3>

<p>Better we have the static IP, and let the Container startup when machine boot.</p>

<h4>Static IP Configuration</h4>

<p>Change the network configuration via modifying the /etc/network/interfaces:</p>

<figure class='code'><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
<span class='line-number'>3</span>
<span class='line-number'>4</span>
<span class='line-number'>5</span>
<span class='line-number'>6</span>
<span class='line-number'>7</span>
<span class='line-number'>8</span>
<span class='line-number'>9</span>
<span class='line-number'>10</span>
<span class='line-number'>11</span>
<span class='line-number'>12</span>
</pre></td><td class='code'><pre><code class=''><span class='line'>auto eth0
</span><span class='line'>
</span><span class='line'># Enable it for dhcp
</span><span class='line'>#iface eth0 inet dhcp
</span><span class='line'>
</span><span class='line'># Enable them for static IP address
</span><span class='line'>iface eth0 inet static
</span><span class='line'>address 1xx.xxx.xxx.159
</span><span class='line'>netmask 255.255.255.0
</span><span class='line'>network 1xx.xxx.xxx.0
</span><span class='line'>broadcast 1xx.xxx.xxx.255
</span><span class='line'>gateway 1xx.xxx.xxx.1
</span></code></pre></td></tr></table></div></figure>


<p>Then next time you login into the machine, it hold the address of 159.</p>

<h4>Start Together With Host Machine</h4>

<p>Create a new definition file of systemd under the /usr/lib/systemd/system directory:</p>

<figure class='code'><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
<span class='line-number'>3</span>
<span class='line-number'>4</span>
<span class='line-number'>5</span>
<span class='line-number'>6</span>
<span class='line-number'>7</span>
<span class='line-number'>8</span>
<span class='line-number'>9</span>
<span class='line-number'>10</span>
<span class='line-number'>11</span>
<span class='line-number'>12</span>
<span class='line-number'>13</span>
<span class='line-number'>14</span>
<span class='line-number'>15</span>
</pre></td><td class='code'><pre><code class=''><span class='line'>Linux59:/usr/lib/systemd/system # cat lxc\@.service
</span><span class='line'>[Unit]
</span><span class='line'>Description=%i LXC
</span><span class='line'>After=network.target
</span><span class='line'>
</span><span class='line'>[Service]
</span><span class='line'>Type=forking
</span><span class='line'>ExecStart=/usr/bin/lxc-start -d -n %i
</span><span class='line'>ExecStop=/usr/bin/lxc-stop -n %i
</span><span class='line'>
</span><span class='line'>[Install]
</span><span class='line'>WantedBy=multi-user.target
</span><span class='line'>
</span><span class='line'>Linux59:/usr/lib/systemd/system # pwd
</span><span class='line'>/usr/lib/systemd/system
</span></code></pre></td></tr></table></div></figure>


<p>Let <code>Ubuntu_Container</code> runs when system bootup.</p>

<figure class='code'><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
</pre></td><td class='code'><pre><code class=''><span class='line'># systemctl enable lxc@Ubuntu_Container.service
</span><span class='line'>ln -s '/usr/lib/systemd/system/lxc@.service' '/etc/systemd/system/multi-user.target.wants/lxc@Ubuntu_Container.service'
</span></code></pre></td></tr></table></div></figure>


<h4>Update</h4>

<p>visudo to change the settings:</p>

<figure class='code'><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
</pre></td><td class='code'><pre><code class=''><span class='line'>ubuntu  ALL=(ALL:ALL) ALL
</span><span class='line'>Defaults env_keep = "http_proxy https_proxy ftp_proxy"
</span></code></pre></td></tr></table></div></figure>


<p>Enable proxy for apt-get:</p>

<figure class='code'><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
</pre></td><td class='code'><pre><code class=''><span class='line'>$ cat /etc/apt/apt.conf
</span><span class='line'>Acquire::http::Proxy "http://127.0.0.1:9001";
</span></code></pre></td></tr></table></div></figure>


<p>Update the system and install some packages:</p>

<figure class='code'><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
<span class='line-number'>3</span>
<span class='line-number'>4</span>
<span class='line-number'>5</span>
<span class='line-number'>6</span>
<span class='line-number'>7</span>
</pre></td><td class='code'><pre><code class=''><span class='line'>$ sudo apt-get update
</span><span class='line'>$ sudo apt-get install tmux openjdk-7-jdk
</span><span class='line'>$ sudo update-alternatives --config java && sudo update-alternatives --config javac
</span><span class='line'>$ sudo apt-get install git gnupg flex bison gperf    zip curl libc6-dev libncurses5-dev:i386 x11proto-core-dev   libx11-dev:i386 libreadline6-dev:i386 libgl1-mesa-glx:i386   libgl1-mesa-dev  mingw32 tofrodos   python-markdown libxml2-utils xsltproc zlib1g-dev:i386
</span><span class='line'>$ sudo apt-get install build-essential 
</span><span class='line'>$ sudo apt-get install g++-multilib
</span><span class='line'>$ sudo ln -s /usr/lib/i386-linux-gnu/mesa/libGL.so.1 /usr/lib/i386-linux-gnu/libGL.so
</span></code></pre></td></tr></table></div></figure>


<h4>Configuration on USB</h4>

<p>Create following file:</p>

<figure class='code'><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
<span class='line-number'>3</span>
<span class='line-number'>4</span>
<span class='line-number'>5</span>
<span class='line-number'>6</span>
<span class='line-number'>7</span>
<span class='line-number'>8</span>
<span class='line-number'>9</span>
<span class='line-number'>10</span>
<span class='line-number'>11</span>
<span class='line-number'>12</span>
<span class='line-number'>13</span>
<span class='line-number'>14</span>
<span class='line-number'>15</span>
<span class='line-number'>16</span>
<span class='line-number'>17</span>
<span class='line-number'>18</span>
<span class='line-number'>19</span>
<span class='line-number'>20</span>
<span class='line-number'>21</span>
<span class='line-number'>22</span>
<span class='line-number'>23</span>
<span class='line-number'>24</span>
<span class='line-number'>25</span>
<span class='line-number'>26</span>
<span class='line-number'>27</span>
<span class='line-number'>28</span>
<span class='line-number'>29</span>
<span class='line-number'>30</span>
<span class='line-number'>31</span>
<span class='line-number'>32</span>
<span class='line-number'>33</span>
<span class='line-number'>34</span>
<span class='line-number'>35</span>
</pre></td><td class='code'><pre><code class=''><span class='line'>ubuntu@Ubuntu_Container:~$ cat /etc/udev/rules.d/51-android.rules 
</span><span class='line'># adb protocol on passion (Nexus One)
</span><span class='line'>SUBSYSTEM=="usb", ATTR{idVendor}=="18d1", ATTR{idProduct}=="4e12", MODE="0600", OWNER="ubuntu"
</span><span class='line'># fastboot protocol on passion (Nexus One)
</span><span class='line'>SUBSYSTEM=="usb", ATTR{idVendor}=="0bb4", ATTR{idProduct}=="0fff", MODE="0600", OWNER="ubuntu"
</span><span class='line'># adb protocol on crespo/crespo4g (Nexus S)
</span><span class='line'>SUBSYSTEM=="usb", ATTR{idVendor}=="18d1", ATTR{idProduct}=="4e22", MODE="0600", OWNER="ubuntu"
</span><span class='line'># fastboot protocol on crespo/crespo4g (Nexus S)
</span><span class='line'>SUBSYSTEM=="usb", ATTR{idVendor}=="18d1", ATTR{idProduct}=="4e20", MODE="0600", OWNER="ubuntu"
</span><span class='line'># adb protocol on stingray/wingray (Xoom)
</span><span class='line'>SUBSYSTEM=="usb", ATTR{idVendor}=="22b8", ATTR{idProduct}=="70a9", MODE="0600", OWNER="ubuntu"
</span><span class='line'># fastboot protocol on stingray/wingray (Xoom)
</span><span class='line'>SUBSYSTEM=="usb", ATTR{idVendor}=="18d1", ATTR{idProduct}=="708c", MODE="0600", OWNER="ubuntu"
</span><span class='line'># adb protocol on maguro/toro (Galaxy Nexus)
</span><span class='line'>SUBSYSTEM=="usb", ATTR{idVendor}=="04e8", ATTR{idProduct}=="6860", MODE="0600", OWNER="ubuntu"
</span><span class='line'># fastboot protocol on maguro/toro (Galaxy Nexus)
</span><span class='line'>SUBSYSTEM=="usb", ATTR{idVendor}=="18d1", ATTR{idProduct}=="4e30", MODE="0600", OWNER="ubuntu"
</span><span class='line'># adb protocol on panda (PandaBoard)
</span><span class='line'>SUBSYSTEM=="usb", ATTR{idVendor}=="0451", ATTR{idProduct}=="d101", MODE="0600", OWNER="ubuntu"
</span><span class='line'># adb protocol on panda (PandaBoard ES)
</span><span class='line'>SUBSYSTEM=="usb", ATTR{idVendor}=="18d1", ATTR{idProduct}=="d002", MODE="0600", OWNER="ubuntu"
</span><span class='line'># fastboot protocol on panda (PandaBoard)
</span><span class='line'>SUBSYSTEM=="usb", ATTR{idVendor}=="0451", ATTR{idProduct}=="d022", MODE="0600", OWNER="ubuntu"
</span><span class='line'># usbboot protocol on panda (PandaBoard)
</span><span class='line'>SUBSYSTEM=="usb", ATTR{idVendor}=="0451", ATTR{idProduct}=="d00f", MODE="0600", OWNER="ubuntu"
</span><span class='line'># usbboot protocol on panda (PandaBoard ES)
</span><span class='line'>SUBSYSTEM=="usb", ATTR{idVendor}=="0451", ATTR{idProduct}=="d010", MODE="0600", OWNER="ubuntu"
</span><span class='line'># adb protocol on grouper/tilapia (Nexus 7)
</span><span class='line'>SUBSYSTEM=="usb", ATTR{idVendor}=="18d1", ATTR{idProduct}=="4e42", MODE="0600", OWNER="ubuntu"
</span><span class='line'># fastboot protocol on grouper/tilapia (Nexus 7)
</span><span class='line'>SUBSYSTEM=="usb", ATTR{idVendor}=="18d1", ATTR{idProduct}=="4e40", MODE="0600", OWNER="ubuntu"
</span><span class='line'># adb protocol on manta (Nexus 10)
</span><span class='line'>SUBSYSTEM=="usb", ATTR{idVendor}=="18d1", ATTR{idProduct}=="4ee2", MODE="0600", OWNER="ubuntu"
</span><span class='line'># fastboot protocol on manta (Nexus 10)
</span><span class='line'>SUBSYSTEM=="usb", ATTR{idVendor}=="18d1", ATTR{idProduct}=="4ee0", MODE="0600", OWNER="ubuntu"
</span></code></pre></td></tr></table></div></figure>


<h3>Building</h3>

<h4>Enable git proxy</h4>

<p>Configure the git configuration:</p>

<figure class='code'><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
</pre></td><td class='code'><pre><code class=''><span class='line'>ubuntu@Ubuntu_Container:~$ git config --global user.email "xxx@gmail.com"
</span><span class='line'>ubuntu@Ubuntu_Container:~$ git config --global user.name "xxx"
</span></code></pre></td></tr></table></div></figure>


<p>Compile the connect.c for getting the cross-firewall tool.</p>

<figure class='code'><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
<span class='line-number'>3</span>
<span class='line-number'>4</span>
<span class='line-number'>5</span>
<span class='line-number'>6</span>
</pre></td><td class='code'><pre><code class=''><span class='line'>$ gcc -o connect connect.c
</span><span class='line'>$ sudo mv connect /usr/bin
</span><span class='line'>$ sudo chmod  777 /usr/bin/connect
</span><span class='line'>$ cat /usr/bin/myproxy 
</span><span class='line'>/usr/bin/connect -H 127.0.0.1:9001 $@
</span><span class='line'>$ sudo chmod 777 /usr/bin/myproxy
</span></code></pre></td></tr></table></div></figure>


<p>Let your git authenticated by github, please refers to the following article:  <br/>
<a href="http://kkkttt.github.io/blog/2014/10/14/verified-to-github/">http://kkkttt.github.io/blog/2014/10/14/verified-to-github/</a></p>

<p>Then add the proxy setting in .gitconfig:</p>

<figure class='code'><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
<span class='line-number'>3</span>
</pre></td><td class='code'><pre><code class=''><span class='line'>[core]
</span><span class='line'>  gitproxy = /usr/bin/myproxy
</span><span class='line'>
</span></code></pre></td></tr></table></div></figure>


<h4>Preparation</h4>

<p>Install repo:</p>

<figure class='code'><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
<span class='line-number'>3</span>
<span class='line-number'>4</span>
</pre></td><td class='code'><pre><code class=''><span class='line'>   57  echo $PATH
</span><span class='line'>/home/ubuntu/bin:/usr/local/sbin:/usr/local/bin:/usr/sbin:/usr/bin:/sbin:/bin:/usr/games
</span><span class='line'>   58  curl https://storage.googleapis.com/git-repo-downloads/repo &gt; ~/bin/repo
</span><span class='line'>   59  chmod a+x ~/bin/repo
</span></code></pre></td></tr></table></div></figure>


<p>Make a new directory for holding the source code:</p>

<figure class='code'><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
</pre></td><td class='code'><pre><code class=''><span class='line'>$ mkdir ~/code
</span><span class='line'>$ repo init -u https://android.googlesource.com/platform/manifest
</span></code></pre></td></tr></table></div></figure>


<p>sync the repository:</p>

<figure class='code'><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
</pre></td><td class='code'><pre><code class=''><span class='line'>$ repo sync
</span></code></pre></td></tr></table></div></figure>


<h4>Build</h4>

<p>Set the environment variables:</p>

<figure class='code'><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
</pre></td><td class='code'><pre><code class=''><span class='line'>. build/envsetup.sh
</span><span class='line'>lunch 
</span></code></pre></td></tr></table></div></figure>


<p>In lunch you could select whatever you like.  <br/>
Then make via following command:</p>

<figure class='code'><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
</pre></td><td class='code'><pre><code class=''><span class='line'>make -j 8
</span></code></pre></td></tr></table></div></figure>


<p>Trouble-shooting:</p>

<figure class='code'><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
</pre></td><td class='code'><pre><code class=''><span class='line'>Your version is: java version "1.7.0_65".
</span><span class='line'>The correct version is: Java SE 1.6.
</span></code></pre></td></tr></table></div></figure>


<p>Ok, we change the java version via:</p>

<figure class='code'><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
<span class='line-number'>3</span>
<span class='line-number'>4</span>
<span class='line-number'>5</span>
<span class='line-number'>6</span>
<span class='line-number'>7</span>
</pre></td><td class='code'><pre><code class=''><span class='line'>$ sudo apt-get install software-properties-common
</span><span class='line'>$ sudo apt-get install python-software-properties
</span><span class='line'>Add the PPA:
</span><span class='line'>$ sudo add-apt-repository ppa:webupd8team/java
</span><span class='line'>Update the repo index:
</span><span class='line'>$ sudo apt-get update
</span><span class='line'>$ sudo apt-get install oracle-java6-installer
</span></code></pre></td></tr></table></div></figure>


<p>After installation, update the java version via:</p>

<figure class='code'><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
<span class='line-number'>3</span>
<span class='line-number'>4</span>
<span class='line-number'>5</span>
<span class='line-number'>6</span>
<span class='line-number'>7</span>
<span class='line-number'>8</span>
<span class='line-number'>9</span>
<span class='line-number'>10</span>
<span class='line-number'>11</span>
<span class='line-number'>12</span>
<span class='line-number'>13</span>
</pre></td><td class='code'><pre><code class=''><span class='line'>
</span><span class='line'>$ sudo update-alternatives --config java
</span><span class='line'>[sudo] password for ubuntu: 
</span><span class='line'>There are 3 choices for the alternative java (providing /usr/bin/java).
</span><span class='line'>
</span><span class='line'>  Selection    Path                                            Priority   Status
</span><span class='line'>------------------------------------------------------------
</span><span class='line'>* 0            /usr/lib/jvm/java-6-oracle/jre/bin/java          1062      auto mode
</span><span class='line'>  1            /usr/lib/jvm/java-6-openjdk-amd64/jre/bin/java   1061      manual mode
</span><span class='line'>  2            /usr/lib/jvm/java-6-oracle/jre/bin/java          1062      manual mode
</span><span class='line'>  3            /usr/lib/jvm/java-7-openjdk-amd64/jre/bin/java   1051      manual mode
</span><span class='line'>
</span><span class='line'>Press enter to keep the current choice[*], or type selection number: 
</span></code></pre></td></tr></table></div></figure>


<p>Now you could run building.</p>

<h3>Trouble Shooting</h3>

<p>Build error:</p>

<figure class='code'><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
<span class='line-number'>3</span>
<span class='line-number'>4</span>
<span class='line-number'>5</span>
<span class='line-number'>6</span>
<span class='line-number'>7</span>
<span class='line-number'>8</span>
<span class='line-number'>9</span>
<span class='line-number'>10</span>
<span class='line-number'>11</span>
<span class='line-number'>12</span>
<span class='line-number'>13</span>
</pre></td><td class='code'><pre><code class=''><span class='line'>If you are building an old version of android probably you’ll have this error
</span><span class='line'>
</span><span class='line'>host C++: obbtool &lt;= frameworks/base/tools/obbtool/Main.cpp
</span><span class='line'>:0:0: error: “_FORTIFY_SOURCE” redefined [-Werror]
</span><span class='line'>:0:0: note: this is the location of the previous definition
</span><span class='line'>cc1plus: all warnings being treated as errors
</span><span class='line'>To fix this, edit build/core/combo/HOST_linux-x86.mk and replace:
</span><span class='line'>
</span><span class='line'>HOST_GLOBAL_CFLAGS += -D_FORTIFY_SOURCE=0
</span><span class='line'>with
</span><span class='line'>
</span><span class='line'>HOST_GLOBAL_CFLAGS += -U_FORTIFY_SOURCE -D_FORTIFY_SOURCE=0
</span><span class='line'>And that’s it.
</span></code></pre></td></tr></table></div></figure>


<p>When you meet &ldquo;error: reference ‘counts’ cannot be declared ‘mutable’&rdquo;, install gcc/g++ 4.4 and re-compiling.</p>

<figure class='code'><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
</pre></td><td class='code'><pre><code class=''><span class='line'>$ sudo apt-get install gcc-4.4 g++-4.4  g++-4.4-multilib gcc-4.4-multilib
</span><span class='line'>make CC=gcc-4.4 CXX=g++-4.4
</span></code></pre></td></tr></table></div></figure>


<p>View the CPU ranking:  <br/>
<img src="http://itianti.sinaapp.com/index.php/cpu" alt="http://itianti.sinaapp.com/index.php/cpu" /></p>

<figure class='code'><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
</pre></td><td class='code'><pre><code class=''><span class='line'>490  Intel Core i5-2520M @ 2.50GHz   ￼ 3537
</span><span class='line'>851   Intel Xeon 5160 @ 3.00GHz   ￼ 2047
</span></code></pre></td></tr></table></div></figure>


<h3>View Result</h3>

<p>Since we use the remote machine, we have to enable the vncserver, first install it via:</p>

<figure class='code'><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
</pre></td><td class='code'><pre><code class=''><span class='line'>sudo apt-get install vnc4server
</span></code></pre></td></tr></table></div></figure>


<p>Install lubuntu-desktop as the default X:</p>

<figure class='code'><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
</pre></td><td class='code'><pre><code class=''><span class='line'>sudo apt-get install lubuntu-desktop
</span></code></pre></td></tr></table></div></figure>

</div>
  
  


    </article>
  
  
    <article>
      
  <header>
    
      <h1 class="entry-title"><a href="/blog/2014/10/15/serial-port-on-bbb/">Serial Port on BBB</a></h1>
    
    
      <p class="meta">
        




<time class='entry-date' datetime='2014-10-15T09:37:00+08:00'><span class='date'><span class='date-month'>Oct</span> <span class='date-day'>15</span><span class='date-suffix'>th</span>, <span class='date-year'>2014</span></span> <span class='time'>9:37 am</span></time>
        
         | <a href="/blog/2014/10/15/serial-port-on-bbb/#disqus_thread">Comments</a>
        
      </p>
    
  </header>


  <div class="entry-content"><h3>Serial Port Settings</h3>

<p>Use following settings for the serial monitor software:</p>

<figure class='code'><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
<span class='line-number'>3</span>
<span class='line-number'>4</span>
<span class='line-number'>5</span>
<span class='line-number'>6</span>
</pre></td><td class='code'><pre><code class=''><span class='line'>The default serial port settings for the board are:
</span><span class='line'>Baud 115,200
</span><span class='line'>Bits 8
</span><span class='line'>Parity N
</span><span class='line'>Stop Bits 1
</span><span class='line'>Handshake None
</span></code></pre></td></tr></table></div></figure>


<h3>Connection</h3>

<p>The serial port in BBB is listed as following:  <br/>
<img src="/images/BBBSerial.jpg" alt="/images/BBBSerial.jpg" /></p>
</div>
  
  


    </article>
  
  <div class="pagination">
    
      <a class="prev" href="/posts/35">&larr; Older</a>
    
    <a href="/blog/archives">Blog Archives</a>
    
    <a class="next" href="/posts/33">Newer &rarr;</a>
    
  </div>
</div>
<aside class="sidebar">
  
    <section>
  <h1>Recent Posts</h1>
  <ul id="recent_posts">
    
      <li class="post">
        <a href="/blog/2016/03/15/ba-wan-ebuddy-4/">把玩ebuddy(4)</a>
      </li>
    
      <li class="post">
        <a href="/blog/2016/03/15/shi-yong-squidhuan-cun-suo-you-rpm-slash-deban-zhuang-bao/">使用squid缓存所有rpm/deb安装包</a>
      </li>
    
      <li class="post">
        <a href="/blog/2016/03/13/yong-vagrantguan-li-libvirt/">用Vagrant管理libvirt</a>
      </li>
    
      <li class="post">
        <a href="/blog/2016/03/12/tips-on-5050rgb/">Tips on 5050RGB</a>
      </li>
    
      <li class="post">
        <a href="/blog/2016/03/11/tips-on-w5100/">Tips on W5100</a>
      </li>
    
  </ul>
</section>





  
</aside>

    </div>
  </div>
  <footer role="contentinfo"><p>
  Copyright &copy; 2016 - Dash -
  <span class="credit">Powered by <a href="http://octopress.org">Octopress</a></span>
</p>

</footer>
  

<script type="text/javascript">
      var disqus_shortname = 'dashsagittariussglory';
      
        
        var disqus_script = 'count.js';
      
    (function () {
      var dsq = document.createElement('script'); dsq.type = 'text/javascript'; dsq.async = true;
      dsq.src = '//' + disqus_shortname + '.disqus.com/' + disqus_script;
      (document.getElementsByTagName('head')[0] || document.getElementsByTagName('body')[0]).appendChild(dsq);
    }());
</script>











</body>
</html>
