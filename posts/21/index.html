
<!DOCTYPE html>
<!--[if IEMobile 7 ]><html class="no-js iem7"><![endif]-->
<!--[if lt IE 9]><html class="no-js lte-ie8"><![endif]-->
<!--[if (gt IE 8)|(gt IEMobile 7)|!(IEMobile)|!(IE)]><!--><html class="no-js" lang="en"><!--<![endif]-->
<head>
  <meta charset="utf-8">
  <title>Dash</title>
  <meta name="author" content="Dash">

  
  <meta name="description" content="Problem Want to redirect from http://xxx/ to http://xxx/a/b Solution Change the configuration file of the /etc/apache2/sites-enabled/000-default, &hellip;">
  

  <!-- http://t.co/dKP3o1e -->
  <meta name="HandheldFriendly" content="True">
  <meta name="MobileOptimized" content="320">
  <meta name="viewport" content="width=device-width, initial-scale=1">

  
  <link rel="canonical" href="http://purplepalmdash.github.io/posts/21">
  <link href="/favicon.ico" rel="icon">
  <link href="/stylesheets/screen.css" media="screen, projection" rel="stylesheet" type="text/css">
  <link href="/purplepalmdash/atom.xml" rel="alternate" title="Dash" type="application/atom+xml">
  <script src="/javascripts/modernizr-2.0.js"></script>
  <script src="//fonts.googleapis.com/js/jquery/1.9.1/jquery.min.js"></script>
  <script>!window.jQuery && document.write(unescape('%3Cscript src="./javascripts/libs/jquery.min.js"%3E%3C/script%3E'))</script>
  <script src="/javascripts/octopress.js" type="text/javascript"></script>
  <!--Fonts from Google"s Web font directory at http://google.com/webfonts -->
<link href="//fonts.googleapis.com/css?family=PT+Serif:regular,italic,bold,bolditalic" rel="stylesheet" type="text/css">
<link href="//fonts.googleapis.com/css?family=PT+Sans:regular,italic,bold,bolditalic" rel="stylesheet" type="text/css">

  

</head>

<body    class="collapse-sidebar sidebar-footer" >
  <header role="banner"><hgroup>
  <h1><a href="/">Dash</a></h1>
  
    <h2>Get busy living, or get busy dying.</h2>
  
</hgroup>

</header>
  <nav role="navigation"><ul class="subscription" data-subscription="rss">
  <li><a href="/purplepalmdash/atom.xml" rel="subscribe-rss" title="subscribe via RSS">RSS</a></li>
  
</ul>
  
<form action="https://www.google.com/search" method="get">
  <fieldset role="search">
    <input type="hidden" name="q" value="site:purplepalmdash.github.io" />
    <input class="search" type="text" name="q" results="0" placeholder="Search"/>
  </fieldset>
</form>
  
<ul class="main-navigation">
  <li><a href="/">Blog</a></li>
  <li><a href="/blog/archives">Archives</a></li>
</ul>

</nav>
  <div id="main">
    <div id="content">
      <div class="blog-index">
  
  
  
    <article>
      
  <header>
    
      <h1 class="entry-title"><a href="/blog/2015/01/22/enable-apache2-redirect/">Enable Apache2 Redirect</a></h1>
    
    
      <p class="meta">
        




<time class='entry-date' datetime='2015-01-22T04:02:00+08:00'><span class='date'><span class='date-month'>Jan</span> <span class='date-day'>22</span><span class='date-suffix'>nd</span>, <span class='date-year'>2015</span></span> <span class='time'>4:02 am</span></time>
        
         | <a href="/blog/2015/01/22/enable-apache2-redirect/#disqus_thread">Comments</a>
        
      </p>
    
  </header>


  <div class="entry-content"><h3>Problem</h3>

<p>Want to redirect from <code>http://xxx/</code> to <code>http://xxx/a/b</code></p>

<h3>Solution</h3>

<p>Change the configuration file of the <code>/etc/apache2/sites-enabled/000-default</code>, enable the  <code>RedirectMatch</code>:</p>

<figure class='code'><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
</pre></td><td class='code'><pre><code class=''><span class='line'># For forwarding all of the request to '/' TO '/bin/view'
</span><span class='line'>  RedirectMatch ^/$ /a/b
</span></code></pre></td></tr></table></div></figure>


<p>Restart the service of apache2 then everything goes OK.</p>
</div>
  
  


    </article>
  
  
    <article>
      
  <header>
    
      <h1 class="entry-title"><a href="/blog/2015/01/21/building-vrouter/">Building Vrouter</a></h1>
    
    
      <p class="meta">
        




<time class='entry-date' datetime='2015-01-21T23:12:00+08:00'><span class='date'><span class='date-month'>Jan</span> <span class='date-day'>21</span><span class='date-suffix'>st</span>, <span class='date-year'>2015</span></span> <span class='time'>11:12 pm</span></time>
        
         | <a href="/blog/2015/01/21/building-vrouter/#disqus_thread">Comments</a>
        
      </p>
    
  </header>


  <div class="entry-content"><h3>Preparation</h3>

<p>First we should get repo, while this little kit has been banned via GFW, thus we should use DO machine for getting it down and ssh to local machine.</p>

<figure class='code'><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
<span class='line-number'>3</span>
<span class='line-number'>4</span>
<span class='line-number'>5</span>
<span class='line-number'>6</span>
<span class='line-number'>7</span>
</pre></td><td class='code'><pre><code class=''><span class='line'>$ mkdir ~/bin
</span><span class='line'>$ PATH=~/bin:$PATH
</span><span class='line'>$ curl https://storage.googleapis.com/git-repo-downloads/repo &gt; ~/bin/repo
</span><span class='line'>$ chmod a+x ~/bin/repo
</span><span class='line'>$ tail ~/.zshrc
</span><span class='line'># Add our own bin/ folder for using different tools:    
</span><span class='line'>export PATH="$PATH:$HOME/bin"
</span></code></pre></td></tr></table></div></figure>


<p>Now we could use repo.</p>

<h3>Oops, git is old!</h3>

<p>The default version of git is too old in CentOS, thus we have to upgrade it. , repo needs git version newer than 1.7.2, or you won&rsquo;t get any results from github.</p>

<figure class='code'><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
</pre></td><td class='code'><pre><code class=''><span class='line'>~% git --version
</span><span class='line'>git version 1.7.1
</span></code></pre></td></tr></table></div></figure>


<p>Install necessary packages:</p>

<figure class='code'><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
</pre></td><td class='code'><pre><code class=''><span class='line'>$ sudo yum install curl-devel expat-devel gettext-devel openssl-devel zlib-devel gcc perl-ExtUtils-MakeMaker
</span></code></pre></td></tr></table></div></figure>


<p>Now build and install git via:</p>

<figure class='code'><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
<span class='line-number'>3</span>
<span class='line-number'>4</span>
<span class='line-number'>5</span>
<span class='line-number'>6</span>
<span class='line-number'>7</span>
<span class='line-number'>8</span>
<span class='line-number'>9</span>
<span class='line-number'>10</span>
</pre></td><td class='code'><pre><code class=''><span class='line'>$ sudo mkdir -p /usr/local/git
</span><span class='line'>$ wget https://www.kernel.org/pub/software/scm/git/git-1.9.4.tar.gz
</span><span class='line'>$ tar xzvf git-1.9.4.tar.gz
</span><span class='line'>$ cd git-1.9.4
</span><span class='line'>$ make prefix=/usr/local/git all
</span><span class='line'>$ sudo make prefix=/usr/local/git install
</span><span class='line'>$ echo "export PATH=/usr/local/git/bin:$PATH"&gt;&gt;~/.zshrc
</span><span class='line'>$ source ~/.zshrc
</span><span class='line'>$ git --version
</span><span class='line'>git version 1.9.4
</span></code></pre></td></tr></table></div></figure>


<p>Now the git is already the newer version, we could use it together with repo.</p>

<h3>Sync Repository</h3>

<p>Unfortunately we have been blocked by GFW, so we have to enable little tool proxychains:</p>

<figure class='code'><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
<span class='line-number'>3</span>
<span class='line-number'>4</span>
<span class='line-number'>5</span>
<span class='line-number'>6</span>
<span class='line-number'>7</span>
<span class='line-number'>8</span>
<span class='line-number'>9</span>
<span class='line-number'>10</span>
</pre></td><td class='code'><pre><code class=''><span class='line'>$ git clone https://github.com/rofl0r/proxychains-ng.git 
</span><span class='line'>$ cd proxychains-ng
</span><span class='line'>$ ./configure --prefix=/usr
</span><span class='line'>$ make
</span><span class='line'>$ sudo make install
</span><span class='line'>$ sudo make install-config
</span><span class='line'>$ sudo vim /etc/proxychains.conf
</span><span class='line'># defaults set to "tor"
</span><span class='line'>#socks4   127.0.0.1 9050
</span><span class='line'>socks5    127.0.0.1 1395
</span></code></pre></td></tr></table></div></figure>


<p>Now we could use proxychains for syncing the repositories, simply init the repo via:</p>

<figure class='code'><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
</pre></td><td class='code'><pre><code class=''><span class='line'>$ cd /home/xxx.xxxxx/Code/Vrouter_repo
</span><span class='line'>$ proxychains4 repo init -u git@github.com:Juniper/contrail-vnc -m vrouter-manifest.xml
</span></code></pre></td></tr></table></div></figure>


<p>Now sync the repository via:</p>

<figure class='code'><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
</pre></td><td class='code'><pre><code class=''><span class='line'>$ proxychains4 repo sync
</span></code></pre></td></tr></table></div></figure>


<h3>Build</h3>

<p>After syncing the code, we could finally build this repository, build it via;</p>

<figure class='code'><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
</pre></td><td class='code'><pre><code class=''><span class='line'>$ scons vrouter
</span></code></pre></td></tr></table></div></figure>


<p>Seems boost is pretty old on CentOS 6.6, thus we have to manually compile boost on our system.  <br/>
Since some packages are pretty old on CentOS, I switched to the ubuntu for developing.</p>
</div>
  
  


    </article>
  
  
    <article>
      
  <header>
    
      <h1 class="entry-title"><a href="/blog/2015/01/21/questions-on-contrail/">Questions on Contrail</a></h1>
    
    
      <p class="meta">
        




<time class='entry-date' datetime='2015-01-21T21:43:00+08:00'><span class='date'><span class='date-month'>Jan</span> <span class='date-day'>21</span><span class='date-suffix'>st</span>, <span class='date-year'>2015</span></span> <span class='time'>9:43 pm</span></time>
        
         | <a href="/blog/2015/01/21/questions-on-contrail/#disqus_thread">Comments</a>
        
      </p>
    
  </header>


  <div class="entry-content"><p>Following records my questions on Contrail.</p>

<h3>What is L3 OverLay?</h3>

<p>对于大二层的互通，还有一种简单有效的方法就是vpn，vpn可以工作在二层（如openvpn中的tap模式，左右两边的子网可以相同，但IP肯定不能同，相当于bridge模式），也可以工作在三层（如openvpn中的tun模式, 要求左右两边子网不同）。IPSec只是一种加密模式，L2TP才是二层的vpn接入层，所以L2TP+IPSec肯定可以实现openvpn的tap模式，但是strongswan因为是三层的vpn应该不行。</p>

<p>More detailed info could be found at:  <br/>
<a href="http://blog.csdn.net/quqi99/article/details/11778413">http://blog.csdn.net/quqi99/article/details/11778413</a></p>

<h3>MPLS?</h3>

<p>MPLS(Multiprotocol Label Switching, 多协议标记交换)使用标签(Label)进行转发，一个标签是一个短的、长度固定的数值，由报文的头部携带，不含拓扑信息，只有局部意义。MPLS包头包含20比特的标签，3比特的EXP(通常用作Cos)，1比特的S，用于标识此标签是否为最底层标签，8比特的TTL。  <br/>
More detailed infos here:  <br/>
<a href="http://www.net130.com/netbass/VPN/v111301.htm">http://www.net130.com/netbass/VPN/v111301.htm</a></p>

<h3>GRE?</h3>

<p>（GRE: Generic Routing Encapsulation）  <br/>
通用路由封装 （GRE）定义了在任意一种网络层协议上封装任意一个其它网络层协议的协议。    <br/>
More detailed info could be found here:  <br/>
<a href="http://baike.baidu.com/view/3871502.htm">http://baike.baidu.com/view/3871502.htm</a></p>

<h4>MPLS Over GRE?</h4>

<p> MPLS是多协议标签交换的简称，它用短而定长的标签来封装网络层分组。MPLS最初是为提高路由器的转发速度而提出一个协议。  <br/>
GRE协议是对某些网络层协议的数据报进行封装，使这些被封装的数据报能够在另一个网络层协议中传输。GRE是VPN的第三层隧道协议，在协议层之间采用了一种被称之为Tunnel的技术。  <br/>
MPLS在VPN中的应用，用MPLS为转发通道运行私网流量，使一个运营商的网络可以同时支撑多个不同客户的IP VPN，这样就要求运营商的网络全程支持MPLS转发。但是在实际运用中，有时由于网络规划的原因，运营商网络的中间设备并不支持MPLS功能，而基本的BGP/MPLS VPN是要求所用到的运营商设备全程支持MPLS功能才可以，这样采用基本的BGP/MPLS VPN方法就行不通了，此时GRE的应用很好的解决了这个问题，只需要运营商边缘设备支持MPLS转发就能实现功能。而且GRE只需要保证两端网络类型相同，中间可以穿越其他类型的网络，也降低了对运营商网络的要求。</p>

<p>More detailed info could be found here:  <br/>
<a href="http://blog.sina.com.cn/s/blog_6dc951ef01015bpm.html">http://blog.sina.com.cn/s/blog_6dc951ef01015bpm.html</a></p>

<h3>L3 VPN?</h3>

<p>Layer 3, or VPRN (virtual private routed network), utilizes layer 3 VRF (VPN/virtual routing and forwarding) to segment routing tables for each “customer” utilizing the service. The customer peers with the service provider router and the two exchange routes, which are placed into a routing table specific to the customer. Multiprotocol BGP (MP-BGP) is required in the cloud to utilize the service, which increases complexity of design and implementation. L3 VPNs are typically not deployed on utility networks due to their complexity; however, a L3 VPN could be used to route traffic between corporate or datacenter locations.</p>

<p><a href="http://en.wikipedia.org/wiki/MPLS_VPN#Layer_3_VPN_.28VPRN.29">http://en.wikipedia.org/wiki/MPLS_VPN#Layer_3_VPN_.28VPRN.29</a></p>

<p><a href="http://www.doc88.com/p-0903761953194.html">http://www.doc88.com/p-0903761953194.html</a></p>

<h3>EVPN?</h3>

<p>Fuck,</p>

<h3>VXLAN?</h3>

<p>vxlan(virtual Extensible LAN)虚拟可扩展局域网，是一种overlay的网络技术，使用MAC in UDP的方法进 行封装，共50字节的封装报文头。具体的报文格式如下：   <br/>
<img src="/images/vxlan.png" alt="/images/vxlan.png" />  <br/>
More detailed info could be found here:  <br/>
<a href="http://www.huawei.com/ecommunity/bbs/10239835.html">http://www.huawei.com/ecommunity/bbs/10239835.html</a></p>

<h3>MPLS Over UDP?</h3>

<h3>MPLS Over UDP(L2/L3 OverLay)?</h3>

<h3>L3 Unicast?</h3>

<h3>L2 Unicast?</h3>

<h3>L2 Multicaset?</h3>

<h3>Multicast Tree?</h3>

<h3>BUM Traffic?</h3>

<h3>Overlay vs UnderLay?</h3>

<p>Answer comes here:  <br/>
SDN究竟要不要管物理交换机？  <br/>
<a href="http://www.jianshu.com/p/4c2448e201a2">http://www.jianshu.com/p/4c2448e201a2</a></p>
</div>
  
  


    </article>
  
  
    <article>
      
  <header>
    
      <h1 class="entry-title"><a href="/blog/2015/01/21/install-chrome-on-centos/">Install Chrome on CentOS</a></h1>
    
    
      <p class="meta">
        




<time class='entry-date' datetime='2015-01-21T20:21:00+08:00'><span class='date'><span class='date-month'>Jan</span> <span class='date-day'>21</span><span class='date-suffix'>st</span>, <span class='date-year'>2015</span></span> <span class='time'>8:21 pm</span></time>
        
         | <a href="/blog/2015/01/21/install-chrome-on-centos/#disqus_thread">Comments</a>
        
      </p>
    
  </header>


  <div class="entry-content"><p>Until now I failed in installing chrome on CentOS, for the libstdc++ version is too old in the machine, but record the steps here, later I will continue to work on this issue.</p>

<h3>Repository Preparation</h3>

<p>Add following file in to your <code>/etc/yum.repos.d</code>:</p>

<figure class='code'><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
<span class='line-number'>3</span>
<span class='line-number'>4</span>
<span class='line-number'>5</span>
<span class='line-number'>6</span>
<span class='line-number'>7</span>
</pre></td><td class='code'><pre><code class=''><span class='line'>~% cat /etc/yum.repos.d/google-chrome.repo 
</span><span class='line'>[google-chrome]
</span><span class='line'>name=google-chrome
</span><span class='line'>baseurl=http://dl.google.com/linux/chrome/rpm/stable/$basearch
</span><span class='line'>enabled=1
</span><span class='line'>gpgcheck=1
</span><span class='line'>gpgkey=https://dl-ssl.google.com/linux/linux_signing_key.pub
</span></code></pre></td></tr></table></div></figure>


<p>Now install the chrome via:</p>

<figure class='code'><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
<span class='line-number'>3</span>
<span class='line-number'>4</span>
<span class='line-number'>5</span>
</pre></td><td class='code'><pre><code class=''><span class='line'>$ sudo yum install google-chrome-stable
</span><span class='line'>   Processing Dependency: libstdc++.so.6(GLIBCXX_3.4.15)(64bit) for package: google-chrome-stable-40.0.2214.91-1.x86_64
</span><span class='line'>--&gt; Finished Dependency Resolution
</span><span class='line'>Error: Package: google-chrome-stable-40.0.2214.91-1.x86_64 (google-chrome)
</span><span class='line'>           Requires: libstdc++.so.6(GLIBCXX_3.4.15)(64bit)
</span></code></pre></td></tr></table></div></figure>


<p>The failure reason is because our libstdc++ version is too old.</p>

<h3>Check Lib Version</h3>

<p>View where is libstdc++:</p>

<figure class='code'><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
</pre></td><td class='code'><pre><code class=''><span class='line'>$ ldconfig -p | grep stdc++
</span><span class='line'>  libstdc++.so.6 (libc6,x86-64) =&gt; /usr/lib64/libstdc++.so.6
</span></code></pre></td></tr></table></div></figure>


<p>Get the strings which contains LIBCXX in the libstdc++.so.6:</p>

<figure class='code'><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
<span class='line-number'>3</span>
<span class='line-number'>4</span>
<span class='line-number'>5</span>
<span class='line-number'>6</span>
<span class='line-number'>7</span>
<span class='line-number'>8</span>
<span class='line-number'>9</span>
<span class='line-number'>10</span>
<span class='line-number'>11</span>
<span class='line-number'>12</span>
<span class='line-number'>13</span>
<span class='line-number'>14</span>
<span class='line-number'>15</span>
<span class='line-number'>16</span>
<span class='line-number'>17</span>
</pre></td><td class='code'><pre><code class=''><span class='line'>$ strings /usr/lib64/libstdc++.so.6  | grep LIBCXX
</span><span class='line'>GLIBCXX_3.4
</span><span class='line'>GLIBCXX_3.4.1
</span><span class='line'>GLIBCXX_3.4.2
</span><span class='line'>GLIBCXX_3.4.3
</span><span class='line'>GLIBCXX_3.4.4
</span><span class='line'>GLIBCXX_3.4.5
</span><span class='line'>GLIBCXX_3.4.6
</span><span class='line'>GLIBCXX_3.4.7
</span><span class='line'>GLIBCXX_3.4.8
</span><span class='line'>GLIBCXX_3.4.9
</span><span class='line'>GLIBCXX_3.4.10
</span><span class='line'>GLIBCXX_3.4.11
</span><span class='line'>GLIBCXX_3.4.12
</span><span class='line'>GLIBCXX_3.4.13
</span><span class='line'>GLIBCXX_FORCE_NEW
</span><span class='line'>GLIBCXX_DEBUG_MESSAGE_LENGTH
</span></code></pre></td></tr></table></div></figure>


<p>We could see the newest version of GLIBCXX is only 3.4.13, while chrome requuires 3.4.15. So the solution should be we install the newer version.</p>

<h3>Upgrade GLIBCXX</h3>

<p>TBD.</p>
</div>
  
  


    </article>
  
  
    <article>
      
  <header>
    
      <h1 class="entry-title"><a href="/blog/2015/01/21/using-imacros-for-automatically-access-mail-and-oa/">Using iMacros for Automatically Access Mail and OA</a></h1>
    
    
      <p class="meta">
        




<time class='entry-date' datetime='2015-01-21T03:06:00+08:00'><span class='date'><span class='date-month'>Jan</span> <span class='date-day'>21</span><span class='date-suffix'>st</span>, <span class='date-year'>2015</span></span> <span class='time'>3:06 am</span></time>
        
         | <a href="/blog/2015/01/21/using-imacros-for-automatically-access-mail-and-oa/#disqus_thread">Comments</a>
        
      </p>
    
  </header>


  <div class="entry-content"><p>First we should install imacros from firefox&rsquo;s Add-Ons, after installation, we will restart the firefox and let it run.  <br/>
Click the icon of imacros, the window will be available at the left side of the browser.   <br/>
Rec-> Record for recording the steps  <br/>
Then do what you want to do in browser.   <br/>
Save the current macros into another name, next time if you want to re-do the operations, simply click this saved imacros, then everything is OK.</p>
</div>
  
  


    </article>
  
  
    <article>
      
  <header>
    
      <h1 class="entry-title"><a href="/blog/2015/01/20/trouble-shooting-on-building-awesome/">Trouble-Shooting on Building Awesome</a></h1>
    
    
      <p class="meta">
        




<time class='entry-date' datetime='2015-01-20T21:18:00+08:00'><span class='date'><span class='date-month'>Jan</span> <span class='date-day'>20</span><span class='date-suffix'>th</span>, <span class='date-year'>2015</span></span> <span class='time'>9:18 pm</span></time>
        
         | <a href="/blog/2015/01/20/trouble-shooting-on-building-awesome/#disqus_thread">Comments</a>
        
      </p>
    
  </header>


  <div class="entry-content"><p>When building Awesome following the tutorial of following URL, I met following error:</p>

<figure class='code'><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
</pre></td><td class='code'><pre><code class=''><span class='line'>I installed xcb-proto, but libxcb all the same print "No package 'xcb-proto' found"
</span></code></pre></td></tr></table></div></figure>


<p>So the trouble shooting should be done like following, first we found the directory which contains <code>xcb-proto.pc</code> via:</p>

<figure class='code'><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
</pre></td><td class='code'><pre><code class=''><span class='line'>$ cd /usr/
</span><span class='line'>$ find . -name "xcb-proto.pc"
</span></code></pre></td></tr></table></div></figure>


<p>The result indicates this file locates in the /usr/lib/pkgconfig.  <br/>
Easily we add this directory into our <code>PKG_CONFIG_PATH</code>, via following commands:</p>

<figure class='code'><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
</pre></td><td class='code'><pre><code class=''><span class='line'>$ export PKG_CONFIG_PATH=$PKG_CONFIG_PATH:/usr/lib/pkgconfig
</span></code></pre></td></tr></table></div></figure>


<p>Now continue to do the configuration, everything will be OK. <br/>
But we got the build error in <code>make</code>, like following:</p>

<figure class='code'><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
<span class='line-number'>3</span>
<span class='line-number'>4</span>
<span class='line-number'>5</span>
<span class='line-number'>6</span>
<span class='line-number'>7</span>
<span class='line-number'>8</span>
<span class='line-number'>9</span>
</pre></td><td class='code'><pre><code class=''><span class='line'>/usr/bin/python ./c_client.py -p /usr/lib/python2.6/site-packages /usr/share/xcb/dri2.xml
</span><span class='line'>Traceback (most recent call last):
</span><span class='line'>  File "./c_client.py", line 1041, in &lt;module&gt;
</span><span class='line'>    module.generate()
</span><span class='line'>  File "/usr/lib/python2.6/site-packages/xcbgen/state.py", line 101, in generate
</span><span class='line'>    item.out(name)
</span><span class='line'>  File "./c_client.py", line 950, in c_request
</span><span class='line'>    _c_accessors(self.reply, name + ('reply',), name)
</span><span class='line'>
</span></code></pre></td></tr></table></div></figure>


<p> <br/>
This may be python version error, change it to python2.7?  <br/>
no. We just installed the libxcb-1.8.tar.bz2 for solving this problem.</p>

<p>libxdg-basedir should be downloaded from following url:  <br/>
<a href="http://nevill.ch/libxdg-basedir/downloads/">http://nevill.ch/libxdg-basedir/downloads/</a></p>

<p>So many gaps , we need to do this:</p>

<figure class='code'><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
<span class='line-number'>3</span>
<span class='line-number'>4</span>
<span class='line-number'>5</span>
<span class='line-number'>6</span>
<span class='line-number'>7</span>
<span class='line-number'>8</span>
<span class='line-number'>9</span>
<span class='line-number'>10</span>
<span class='line-number'>11</span>
<span class='line-number'>12</span>
<span class='line-number'>13</span>
<span class='line-number'>14</span>
<span class='line-number'>15</span>
<span class='line-number'>16</span>
<span class='line-number'>17</span>
<span class='line-number'>18</span>
<span class='line-number'>19</span>
<span class='line-number'>20</span>
<span class='line-number'>21</span>
<span class='line-number'>22</span>
<span class='line-number'>23</span>
<span class='line-number'>24</span>
<span class='line-number'>25</span>
<span class='line-number'>26</span>
<span class='line-number'>27</span>
<span class='line-number'>28</span>
<span class='line-number'>29</span>
<span class='line-number'>30</span>
<span class='line-number'>31</span>
<span class='line-number'>32</span>
<span class='line-number'>33</span>
<span class='line-number'>34</span>
<span class='line-number'>35</span>
<span class='line-number'>36</span>
</pre></td><td class='code'><pre><code class=''><span class='line'># wget http://nevill.ch/libxdg-basedir/downloads/libxdg-basedir-latest.tar.gz
</span><span class='line'># tar xzvf libxdg-basedir-latest.tar.gz 
</span><span class='line'># cd libxdg-basedir-1.2.0/
</span><span class='line'># ./configure --prefix=/usr
</span><span class='line'># make && make install
</span><span class='line'># yum install libpng
</span><span class='line'># yum install libpng-devel
</span><span class='line'># ./configure --prefix=/usr && make
</span><span class='line'># yum install pixman pixman-devel
</span><span class='line'># wget http://cairographics.org/snapshots/cairo-1.9.12.tar.gz
</span><span class='line'># tar xzvf cairo-1.9.12.tar.gz 
</span><span class='line'># cd cairo-1.9.12/
</span><span class='line'># ./configure --prefix=/usr && make
</span><span class='line'># make install
</span><span class='line'># yum install glib2-devel
</span><span class='line'># yum install gdk-pixbuf2-devel
</span><span class='line'># yum install startup-notification startup-notification-devel readline readline-devel
</span><span class='line'># wget http://xcb.freedesktop.org/dist/xcb-util-0.3.8.tar.gz
</span><span class='line'># tar xzvf xcb-util-0.3.8.tar.gz 
</span><span class='line'># cd xcb-util-0.3.8/
</span><span class='line'># ./configure --prefix=/usr
</span><span class='line'># make && make install
</span><span class='line'># wget http://xcb.freedesktop.org/dist/xcb-util-cursor-0.1.0.tar.bz2
</span><span class='line'># tar xjvf xcb-util-cursor-0.1.0.tar.bz2 
</span><span class='line'># cd xcb-util-cursor-0.1.0/
</span><span class='line'># ./configure --prefix=/usr && make && make install
</span><span class='line'># wget http://xcb.freedesktop.org/dist/xcb-util-wm-0.4.0.tar.bz2
</span><span class='line'># tar xjvf xcb-util-wm-0.4.0.tar.bz2 
</span><span class='line'># cd xcb-util-wm-0.4.0/
</span><span class='line'># ./configure --prefix=/usr && make && make install
</span><span class='line'># firefox https://github.com/csyuschmjuh/cairo-xcb
</span><span class='line'># cd cairo-xcb-master/
</span><span class='line'>#  ./autogen.sh 
</span><span class='line'>#  ./configure --prefix=/usr && make
</span><span class='line'>#  make install
</span><span class='line'>#  yum install lua-devel
</span></code></pre></td></tr></table></div></figure>


<p>Now we could finally build awesome.  <br/>
Faint, it failed, so need more investigation.     Later!!!!!!!</p>
</div>
  
  


    </article>
  
  
    <article>
      
  <header>
    
      <h1 class="entry-title"><a href="/blog/2015/01/20/things-to-be-done-from-jan21-to-jan25/">Things to Be Done From Jan21 to Jan25</a></h1>
    
    
      <p class="meta">
        




<time class='entry-date' datetime='2015-01-20T20:26:00+08:00'><span class='date'><span class='date-month'>Jan</span> <span class='date-day'>20</span><span class='date-suffix'>th</span>, <span class='date-year'>2015</span></span> <span class='time'>8:26 pm</span></time>
        
         | <a href="/blog/2015/01/20/things-to-be-done-from-jan21-to-jan25/#disqus_thread">Comments</a>
        
      </p>
    
  </header>


  <div class="entry-content"><p>Things to be done in this week:  <br/>
1. Installation documentation for OpenStack, but don&rsquo;t try it myself.   <br/>
2. Documentation on Contrail.  <br/>
3. Conceptions on SDN(Software Defined Networking).  <br/>
4. Books on SDN/PLATFORMs.  <br/>
5. Enable the CoreOS Access via SurfacePro.  <br/>
6. Guangzhou Weather/PM2.5/PM10. <br/>
7. To enable the key-map on MAC?  <br/>
8. Build awesome on CentOS, and let it to be my default WM.</p>

<p>If there are more things to be added, type it following.</p>
</div>
  
  


    </article>
  
  
    <article>
      
  <header>
    
      <h1 class="entry-title"><a href="/blog/2015/01/19/switching-to-blogging-using-do/">Switching to Blogging Using DO</a></h1>
    
    
      <p class="meta">
        




<time class='entry-date' datetime='2015-01-19T21:09:00+08:00'><span class='date'><span class='date-month'>Jan</span> <span class='date-day'>19</span><span class='date-suffix'>th</span>, <span class='date-year'>2015</span></span> <span class='time'>9:09 pm</span></time>
        
         | <a href="/blog/2015/01/19/switching-to-blogging-using-do/#disqus_thread">Comments</a>
        
      </p>
    
  </header>


  <div class="entry-content"><p>Since I changed the working PC, so I need to switch from the old machine to the new machine, while the new machine&rsquo;s network speed is pretty slow, that force me to switching from the local side working to vps-side working, following is the steps for Using DigitalOcean for updating my blog.</p>

<h3>Repository</h3>

<p>First using the git for pulling the repository from the github, following this article for setting the whole octopress system:  <br/>
<a href="http://kkkttt.github.io/blog/2014/07/30/zai-githubshang-bu-shu-ni-de-octopressbo-ke/">http://kkkttt.github.io/blog/2014/07/30/zai-githubshang-bu-shu-ni-de-octopressbo-ke/</a></p>

<h3>New Tips</h3>

<p>For the <code>_deploy</code> directory is the newly generated one, we have to do following changes:</p>

<figure class='code'><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
<span class='line-number'>3</span>
<span class='line-number'>4</span>
<span class='line-number'>5</span>
<span class='line-number'>6</span>
<span class='line-number'>7</span>
</pre></td><td class='code'><pre><code class=''><span class='line'>rake setup_github_pages
</span><span class='line'>cd _deploy
</span><span class='line'>rm -f ./index.html
</span><span class='line'>git remove index.html
</span><span class='line'>git pull origin master
</span><span class='line'>cd ..
</span><span class='line'>rake generate && rake deply
</span></code></pre></td></tr></table></div></figure>


<p>After the above steps, Writing blog in Octopress becomes possible.</p>
</div>
  
  


    </article>
  
  
    <article>
      
  <header>
    
      <h1 class="entry-title"><a href="/blog/2015/01/19/test-in-yy/">Test in YY</a></h1>
    
    
      <p class="meta">
        




<time class='entry-date' datetime='2015-01-19T05:02:00+08:00'><span class='date'><span class='date-month'>Jan</span> <span class='date-day'>19</span><span class='date-suffix'>th</span>, <span class='date-year'>2015</span></span> <span class='time'>5:02 am</span></time>
        
         | <a href="/blog/2015/01/19/test-in-yy/#disqus_thread">Comments</a>
        
      </p>
    
  </header>


  <div class="entry-content"><p>See If I could update in YY?</p>
</div>
  
  


    </article>
  
  
    <article>
      
  <header>
    
      <h1 class="entry-title"><a href="/blog/2014/12/30/trouble-shooting-on-lost-ssh-connection/">Trouble Shooting on Lost SSH Connection</a></h1>
    
    
      <p class="meta">
        




<time class='entry-date' datetime='2014-12-30T11:42:00+08:00'><span class='date'><span class='date-month'>Dec</span> <span class='date-day'>30</span><span class='date-suffix'>th</span>, <span class='date-year'>2014</span></span> <span class='time'>11:42 am</span></time>
        
         | <a href="/blog/2014/12/30/trouble-shooting-on-lost-ssh-connection/#disqus_thread">Comments</a>
        
      </p>
    
  </header>


  <div class="entry-content"><p>I found lots of ssh connection attack info under the folder of /var/log/btmp, So I decide to change the sshd default listening port, from 22 to xxxx. Following is the steps for doing this:</p>

<h3>Change SSHD Listening Port</h3>

<p>Change the default port from 22 to xxxx</p>

<figure class='code'><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
<span class='line-number'>3</span>
</pre></td><td class='code'><pre><code class=''><span class='line'># vim /etc/ssh/sshd_config
</span><span class='line'>Change the port from 22 to xxxx
</span><span class='line'># service ssh restart
</span></code></pre></td></tr></table></div></figure>


<p>Now, congratulations, you lost all of your connections, since you have enable the iptables and banned all of the other ports.</p>

<h3>Solution</h3>

<p>Don&rsquo;t worry, we have digitalOcean&rsquo;s terminal service, from it we could reached the console.   <br/>
But the problem is: it&rsquo;s pretty slow for us to visit this webpage from China to US!  <br/>
Then we should use another machine which runs coreos.   <br/>
Create a new lxde based vnc machine simply via following command:</p>

<figure class='code'><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
</pre></td><td class='code'><pre><code class=''><span class='line'>core@Trustycore ~ $ docker pull dorowu/ubuntu-desktop-lxde-vnc
</span></code></pre></td></tr></table></div></figure>


<p>Run the machine</p>

<figure class='code'><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
</pre></td><td class='code'><pre><code class=''><span class='line'>docker run -i -t -p 6080:6080 dorowu/ubuntu-desktop-lxde-vnc
</span></code></pre></td></tr></table></div></figure>


<p>Then open your browser and visit:   <br/>
<code>http://Your_ip_address:6080/vnc.html</code> you could reached the vnc machine.</p>

<h3>Memory Problem</h3>

<p>Since the default memory is only 512MB, we have to enable the swapfile, thus we could use firefox for accessing the DigitalOcean terminal.  <br/>
Following is the steps:</p>

<figure class='code'><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
<span class='line-number'>3</span>
<span class='line-number'>4</span>
<span class='line-number'>5</span>
<span class='line-number'>6</span>
<span class='line-number'>7</span>
<span class='line-number'>8</span>
<span class='line-number'>9</span>
<span class='line-number'>10</span>
<span class='line-number'>11</span>
<span class='line-number'>12</span>
<span class='line-number'>13</span>
<span class='line-number'>14</span>
<span class='line-number'>15</span>
<span class='line-number'>16</span>
<span class='line-number'>17</span>
<span class='line-number'>18</span>
</pre></td><td class='code'><pre><code class=''><span class='line'>$ sudo dd if=/dev/zero of=/swapfile bs=1M count=1024
</span><span class='line'>$ sudo chmod 600 /swapfile 
</span><span class='line'>$ sudo mkswap /swapfile
</span><span class='line'>$ sudo vim /etc/systemd/system/swap.service
</span><span class='line'> [Unit]  
</span><span class='line'> Description=Turn on swap  
</span><span class='line'> [Service]  
</span><span class='line'> Type=oneshot  
</span><span class='line'> Environment="SWAPFILE=/swapfile"
</span><span class='line'> RemainAfterExit=true  
</span><span class='line'> ExecStartPre=/usr/sbin/losetup -f ${SWAPFILE}  
</span><span class='line'> ExecStart=/usr/bin/sh -c "/sbin/swapon $(/usr/sbin/losetup -j ${SWAPFILE} | /usr/bin/cut -d : -f 1)"  
</span><span class='line'> ExecStop=/usr/bin/sh -c "/sbin/swapoff $(/usr/sbin/losetup -j ${SWAPFILE} | /usr/bin/cut -d : -f 1)"  
</span><span class='line'> ExecStopPost=/usr/bin/sh -c "/usr/sbin/losetup -d $(/usr/sbin/losetup -j ${SWAPFILE} | /usr/bin/cut -d : -f 1)"  
</span><span class='line'> [Install]  
</span><span class='line'> WantedBy=multi-user.target 
</span><span class='line'>$ sudo  systemctl enable /etc/systemd/system/swap.service  
</span><span class='line'>$ sudo systemctl start swap  
</span></code></pre></td></tr></table></div></figure>


<p>Now you could happily use firefox in your vnc window. <br/>
Simply login to the terminal window, and modify the configuration file, restart the ssh service, now you could also change the iptables rules, to open xxxx port.</p>

<p>Another way is to disable root login, in <code>/etc/ssh/sshd_config</code>, set<code>#PermitRootLogin yes</code> to <code>PermitRootLoginno</code>.</p>

<p>You will be safe.</p>
</div>
  
  


    </article>
  
  <div class="pagination">
    
      <a class="prev" href="/posts/22">&larr; Older</a>
    
    <a href="/blog/archives">Blog Archives</a>
    
    <a class="next" href="/posts/20">Newer &rarr;</a>
    
  </div>
</div>
<aside class="sidebar">
  
    <section>
  <h1>Recent Posts</h1>
  <ul id="recent_posts">
    
      <li class="post">
        <a href="/blog/2015/12/17/netscaler-vpxchu-shi-hua-pei-zhi/">NetScaler VPX初始化配置</a>
      </li>
    
      <li class="post">
        <a href="/blog/2015/12/16/yong-graphitecheng-xian-yan-zhou-kong-qi-zhi-liang-4/">用Graphite呈现广州空气质量(4)</a>
      </li>
    
      <li class="post">
        <a href="/blog/2015/12/16/yong-graphitecheng-xian-yan-zhou-kong-qi-zhi-liang-3/">用Graphite呈现广州空气质量(3)</a>
      </li>
    
      <li class="post">
        <a href="/blog/2015/12/16/yong-graphitecheng-xian-yan-zhou-kong-qi-zhi-liang-2/">用Graphite呈现广州空气质量(2)</a>
      </li>
    
      <li class="post">
        <a href="/blog/2015/12/15/yong-graphitecheng-xian-yan-zhou-kong-qi-zhi-liang/">用Graphite呈现广州空气质量</a>
      </li>
    
  </ul>
</section>





  
</aside>

    </div>
  </div>
  <footer role="contentinfo"><p>
  Copyright &copy; 2015 - Dash -
  <span class="credit">Powered by <a href="http://octopress.org">Octopress</a></span>
</p>

</footer>
  

<script type="text/javascript">
      var disqus_shortname = 'dashsagittariussglory';
      
        
        var disqus_script = 'count.js';
      
    (function () {
      var dsq = document.createElement('script'); dsq.type = 'text/javascript'; dsq.async = true;
      dsq.src = '//' + disqus_shortname + '.disqus.com/' + disqus_script;
      (document.getElementsByTagName('head')[0] || document.getElementsByTagName('body')[0]).appendChild(dsq);
    }());
</script>











</body>
</html>
