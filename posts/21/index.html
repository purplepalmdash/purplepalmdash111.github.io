
<!DOCTYPE html>
<!--[if IEMobile 7 ]><html class="no-js iem7"><![endif]-->
<!--[if lt IE 9]><html class="no-js lte-ie8"><![endif]-->
<!--[if (gt IE 8)|(gt IEMobile 7)|!(IEMobile)|!(IE)]><!--><html class="no-js" lang="en"><!--<![endif]-->
<head>
  <meta charset="utf-8">
  <title>Dash</title>
  <meta name="author" content="Dash">

  
  <meta name="description" content="Installation Install via; 1
sudo pacman -S puppet Configurate this machine into server mode. Install new Virtual Machine Install a new ubuntu14.04 &hellip;">
  

  <!-- http://t.co/dKP3o1e -->
  <meta name="HandheldFriendly" content="True">
  <meta name="MobileOptimized" content="320">
  <meta name="viewport" content="width=device-width, initial-scale=1">

  
  <link rel="canonical" href="http://purplepalmdash.github.io/posts/21">
  <link href="/favicon.ico" rel="icon">
  <link href="/stylesheets/screen.css" media="screen, projection" rel="stylesheet" type="text/css">
  <link href="/purplepalmdash/atom.xml" rel="alternate" title="Dash" type="application/atom+xml">
  <script src="/javascripts/modernizr-2.0.js"></script>
  <script src="//libs.useso.com/js/jquery/1.9.1/jquery.min.js"></script>
  <script>!window.jQuery && document.write(unescape('%3Cscript src="./javascripts/libs/jquery.min.js"%3E%3C/script%3E'))</script>
  <script src="/javascripts/octopress.js" type="text/javascript"></script>
  <!--Fonts from Google"s Web font directory at http://google.com/webfonts -->
<link href="//fonts.googleapis.com/css?family=PT+Serif:regular,italic,bold,bolditalic" rel="stylesheet" type="text/css">
<link href="//fonts.googleapis.com/css?family=PT+Sans:regular,italic,bold,bolditalic" rel="stylesheet" type="text/css">

  

</head>

<body    class="collapse-sidebar sidebar-footer" >
  <header role="banner"><hgroup>
  <h1><a href="/">Dash</a></h1>
  
    <h2>Get busy living, or get busy dying.</h2>
  
</hgroup>

</header>
  <nav role="navigation"><ul class="subscription" data-subscription="rss">
  <li><a href="/purplepalmdash/atom.xml" rel="subscribe-rss" title="subscribe via RSS">RSS</a></li>
  
</ul>
  
<form action="https://www.google.com/search" method="get">
  <fieldset role="search">
    <input type="hidden" name="q" value="site:purplepalmdash.github.io" />
    <input class="search" type="text" name="q" results="0" placeholder="Search"/>
  </fieldset>
</form>
  
<ul class="main-navigation">
  <li><a href="/">Blog</a></li>
  <li><a href="/blog/archives">Archives</a></li>
</ul>

</nav>
  <div id="main">
    <div id="content">
      <div class="blog-index">
  
  
  
    <article>
      
  <header>
    
      <h1 class="entry-title"><a href="/blog/2014/08/11/puppet-on-archlinux/">Puppet on ArchLinux</a></h1>
    
    
      <p class="meta">
        




<time class='entry-date' datetime='2014-08-11T17:22:00+08:00'><span class='date'><span class='date-month'>Aug</span> <span class='date-day'>11</span><span class='date-suffix'>th</span>, <span class='date-year'>2014</span></span> <span class='time'>5:22 pm</span></time>
        
         | <a href="/blog/2014/08/11/puppet-on-archlinux/#disqus_thread">Comments</a>
        
      </p>
    
  </header>


  <div class="entry-content"><h3>Installation</h3>

<p>Install via;</p>

<figure class='code'><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
</pre></td><td class='code'><pre><code class=''><span class='line'>sudo pacman -S puppet
</span></code></pre></td></tr></table></div></figure>


<p>Configurate this machine into server mode.</p>

<h3>Install new Virtual Machine</h3>

<p>Install a new ubuntu14.04 using qemu, and install puppet in it.   <br/>
Generate the configuration file for mirror.list of Ubuntu.</p>

<p>Finally use the vdi file in the Ubuntu.</p>

<p>Install puppet in Ubuntu14.04:  <br/>
<a href="http://linuxconfig.org/puppet-installation-on-linux-ubuntu-14-04-trusty-tahr">http://linuxconfig.org/puppet-installation-on-linux-ubuntu-14-04-trusty-tahr</a></p>

<p>Make Ubuntu use a fixed IP.</p>

<figure class='code'><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
<span class='line-number'>3</span>
<span class='line-number'>4</span>
<span class='line-number'>5</span>
<span class='line-number'>6</span>
<span class='line-number'>7</span>
<span class='line-number'>8</span>
<span class='line-number'>9</span>
<span class='line-number'>10</span>
<span class='line-number'>11</span>
<span class='line-number'>12</span>
</pre></td><td class='code'><pre><code class=''><span class='line'>$ cat  /etc/network/interface
</span><span class='line'># s file describes the network interfaces available on your system
</span><span class='line'># and how to activate them. For more information, see interfaces(5).
</span><span class='line'>
</span><span class='line'># The loopback network interface
</span><span class='line'>auto lo
</span><span class='line'>iface lo inet loopback
</span><span class='line'>auto eth0
</span><span class='line'>  iface eth0 inet static
</span><span class='line'>  address 10.0.0.88
</span><span class='line'>  netmask 255.255.255.0
</span><span class='line'>  gateway 10.0.0.1
</span></code></pre></td></tr></table></div></figure>


<p>And Copy the virtual disk, and change the UUID of the disk:</p>

<figure class='code'><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
</pre></td><td class='code'><pre><code class=''><span class='line'>$ VBoxManage internalcommands sethduuid ./Ubuntu.vdi 
</span><span class='line'>UUID changed to: d1xxxxxxxxxxxxxxxxxxxxxxxxxx
</span></code></pre></td></tr></table></div></figure>


<p>Be sure to change the ip address to 10.0.0.89.</p>

<p>Now we have 2 machines.</p>

<p>No password enter for ssh login:</p>

<figure class='code'><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
</pre></td><td class='code'><pre><code class=''><span class='line'>$ cat ~/.ssh/id_rsa.pub| ssh Trusty@10.0.0.88 'cat&gt;&gt;~/.ssh/authorized_keys'
</span><span class='line'>$ cat ~/.ssh/id_rsa.pub| ssh Trusty@10.0.0.89 'cat&gt;&gt;~/.ssh/authorized_keys'
</span></code></pre></td></tr></table></div></figure>


<h3>Server and Client</h3>

<p>Install Server side in 10.0.0.88:</p>

<figure class='code'><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
</pre></td><td class='code'><pre><code class=''><span class='line'>sudo apt-get install puppetmaster
</span></code></pre></td></tr></table></div></figure>


<p>In 10.0.0.88, edit /etc/hosts:</p>

<figure class='code'><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
</pre></td><td class='code'><pre><code class=''><span class='line'>10.0.0.89    client
</span></code></pre></td></tr></table></div></figure>


<p>While in 10.0.0.89, edit /etc/hosts:</p>

<figure class='code'><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
</pre></td><td class='code'><pre><code class=''><span class='line'>10.0.0.88    puppet
</span></code></pre></td></tr></table></div></figure>


<p>In client(10.0.0.89), start the service of puppet:</p>

<figure class='code'><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
<span class='line-number'>3</span>
<span class='line-number'>4</span>
</pre></td><td class='code'><pre><code class=''><span class='line'>$ sudo service puppet start
</span><span class='line'> * Starting puppet agent                                                                                
</span><span class='line'>puppet not configured to start, please edit /etc/default/puppet to enable
</span><span class='line'>                                                                                                 [ OK ]
</span></code></pre></td></tr></table></div></figure>


<p>In server(10.0.0.88), start the service of puppet master:  <br/>
Add following lines in to /etc/puppet/puppet.conf:</p>

<figure class='code'><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
</pre></td><td class='code'><pre><code class=''><span class='line'>dns_alt_names = puppet, master.local, puppet.terokarvinen.com
</span></code></pre></td></tr></table></div></figure>


<p>Then remove all of the generated ssl :</p>

<figure class='code'><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
</pre></td><td class='code'><pre><code class=''><span class='line'>rm -rf /var/lib/puppet/ssl
</span></code></pre></td></tr></table></div></figure>


<p>Now restart the puppetmaster via:</p>

<figure class='code'><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
</pre></td><td class='code'><pre><code class=''><span class='line'># service puppetmaster restart 
</span></code></pre></td></tr></table></div></figure>


<p>Change the hostname of 10.0.0.88 to Ubuntu88, 10.0.0.89 to Ubuntu89, and then restart the computer.  <br/>
Now change the Ubuntu88&rsquo;s configuration
Add following lines in 10.0.0.88(Server):
In /etc/puppet/puppet.conf, [master] heading:</p>

<figure class='code'><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
</pre></td><td class='code'><pre><code class=''><span class='line'>dns_alt_names = puppet, master.local, puppet.terokarvinen.com
</span></code></pre></td></tr></table></div></figure>


<p>On 10.0.0.89(Client), change the following line in /etc/default/puppet:</p>

<figure class='code'><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
</pre></td><td class='code'><pre><code class=''><span class='line'>START=yes
</span></code></pre></td></tr></table></div></figure>


<p>Then in /etc/puppet/puppet.conf,  add following:</p>

<figure class='code'><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
</pre></td><td class='code'><pre><code class=''><span class='line'>[agent]
</span><span class='line'>server = puppet
</span></code></pre></td></tr></table></div></figure>


<p>Restart the puppet service.</p>

<p>Now on server, use following command to list the cert and add signed cert.</p>

<figure class='code'><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
<span class='line-number'>3</span>
<span class='line-number'>4</span>
<span class='line-number'>5</span>
<span class='line-number'>6</span>
<span class='line-number'>7</span>
<span class='line-number'>8</span>
<span class='line-number'>9</span>
<span class='line-number'>10</span>
<span class='line-number'>11</span>
</pre></td><td class='code'><pre><code class=''><span class='line'>Trusty@Ubuntu88:~$ sudo puppet cert --list
</span><span class='line'>sudo: unable to resolve host Ubuntu88
</span><span class='line'>Warning: Setting templatedir is deprecated. See http://links.puppetlabs.com/env-settings-deprecations
</span><span class='line'>   (at /usr/lib/ruby/vendor_ruby/puppet/settings.rb:1095:in `block in issue_deprecations')
</span><span class='line'>  "ubuntu89" (SHA256) xxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxx
</span><span class='line'>Trusty@Ubuntu88:~$ sudo puppet cert --sign ubuntu89
</span><span class='line'>sudo: unable to resolve host Ubuntu88
</span><span class='line'>Warning: Setting templatedir is deprecated. See http://links.puppetlabs.com/env-settings-deprecations
</span><span class='line'>   (at /usr/lib/ruby/vendor_ruby/puppet/settings.rb:1095:in `block in issue_deprecations')
</span><span class='line'>Notice: Signed certificate request for ubuntu89
</span><span class='line'>Notice: Removing file Puppet::SSL::CertificateRequest ubuntu89 at '/var/lib/puppet/ssl/ca/requests/ubuntu89.pem'
</span></code></pre></td></tr></table></div></figure>


<h3>Create the Site Manifest and a Module</h3>

<p>Go to /etc/puppet, run following command:</p>

<figure class='code'><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
</pre></td><td class='code'><pre><code class=''><span class='line'>Trusty@Ubuntu88:/etc/puppet$ sudo mkdir -p manifests/ modules/helloworld/manifests
</span></code></pre></td></tr></table></div></figure>


<p>Edit following file:</p>

<figure class='code'><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
</pre></td><td class='code'><pre><code class=''><span class='line'>Trusty@Ubuntu88:/etc/puppet$ cat manifests/site.pp 
</span><span class='line'>include helloworld
</span></code></pre></td></tr></table></div></figure>


<p>Create the file:</p>

<figure class='code'><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
<span class='line-number'>3</span>
<span class='line-number'>4</span>
<span class='line-number'>5</span>
<span class='line-number'>6</span>
</pre></td><td class='code'><pre><code class=''><span class='line'>Trusty@Ubuntu88:/etc/puppet$ sudo cat modules/helloworld/manifests/init.pp
</span><span class='line'>class helloworld {
</span><span class='line'>        file { '/tmp/helloFromMaster':
</span><span class='line'>                content =&gt; "See you at http://terokarvinen.com/tag/puppet\n"
</span><span class='line'>        }
</span><span class='line'>}
</span></code></pre></td></tr></table></div></figure>


<p>And Now in client, restart the puppet service:</p>

<figure class='code'><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
<span class='line-number'>3</span>
<span class='line-number'>4</span>
<span class='line-number'>5</span>
<span class='line-number'>6</span>
<span class='line-number'>7</span>
</pre></td><td class='code'><pre><code class=''><span class='line'>Trusty@Ubuntu89:~$ sudo service puppet restart
</span><span class='line'>sudo: unable to resolve host Ubuntu89
</span><span class='line'>[sudo] password for Trusty: 
</span><span class='line'>no talloc stackframe at ../source3/param/loadparm.c:4864, leaking memory
</span><span class='line'> * Restarting puppet agent                                               [ OK ] 
</span><span class='line'>Trusty@Ubuntu89:~$ cat /tmp/helloFromMaster 
</span><span class='line'>See you at http://terokarvinen.com/tag/puppet
</span></code></pre></td></tr></table></div></figure>


<p>Now the basic configuration is OK.</p>
</div>
  
  


    </article>
  
  
    <article>
      
  <header>
    
      <h1 class="entry-title"><a href="/blog/2014/08/10/7-weeks-7-databases-reading-digest/">7 Weeks 7 Databases Reading Digest</a></h1>
    
    
      <p class="meta">
        




<time class='entry-date' datetime='2014-08-10T11:46:00+08:00'><span class='date'><span class='date-month'>Aug</span> <span class='date-day'>10</span><span class='date-suffix'>th</span>, <span class='date-year'>2014</span></span> <span class='time'>11:46 am</span></time>
        
         | <a href="/blog/2014/08/10/7-weeks-7-databases-reading-digest/#disqus_thread">Comments</a>
        
      </p>
    
  </header>


  <div class="entry-content"><p>This chapter will introduct postgresql.</p>

<h3>Installation in ArchLinux</h3>

<p>Install it via:</p>

<figure class='code'><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
</pre></td><td class='code'><pre><code class=''><span class='line'># pacman -S postgresql
</span></code></pre></td></tr></table></div></figure>


<p>Then configure the initial configuration:</p>

<figure class='code'><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
<span class='line-number'>3</span>
</pre></td><td class='code'><pre><code class=''><span class='line'># su - postgres
</span><span class='line'>[postgres]$ initdb --locale en_US.UTF-8 -E UTF8 -D '/var/lib/postgres/data'
</span><span class='line'># systemctl enable postgresql
</span></code></pre></td></tr></table></div></figure>


<p>Create the user:</p>

<figure class='code'><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
<span class='line-number'>3</span>
<span class='line-number'>4</span>
<span class='line-number'>5</span>
<span class='line-number'>6</span>
</pre></td><td class='code'><pre><code class=''><span class='line'>[root@Arch_Container ~]# su - postgres
</span><span class='line'>[postgres@Arch_Container ~]$ createuser --interactive
</span><span class='line'>Enter name of role to add: root
</span><span class='line'>Shall the new role be a superuser? (y/n) y
</span><span class='line'>[postgres@Arch_Container ~]$ exit
</span><span class='line'>logout
</span></code></pre></td></tr></table></div></figure>


<p>Now using a test command for verifying your postgresql runs OK:</p>

<figure class='code'><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
</pre></td><td class='code'><pre><code class=''><span class='line'># createdb myDatabaseName
</span></code></pre></td></tr></table></div></figure>


<h3>Create the Database</h3>

<p>Create a database named book:</p>

<figure class='code'><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
</pre></td><td class='code'><pre><code class=''><span class='line'># createdb book
</span></code></pre></td></tr></table></div></figure>


<p>Installing plugins cube into the database book.</p>

<figure class='code'><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
<span class='line-number'>3</span>
<span class='line-number'>4</span>
<span class='line-number'>5</span>
<span class='line-number'>6</span>
<span class='line-number'>7</span>
<span class='line-number'>8</span>
<span class='line-number'>9</span>
<span class='line-number'>10</span>
<span class='line-number'>11</span>
<span class='line-number'>12</span>
</pre></td><td class='code'><pre><code class=''><span class='line'>[root@Arch_Container postgresql]# psql -d book
</span><span class='line'>psql (9.3.5)
</span><span class='line'>Type "help" for help.
</span><span class='line'>
</span><span class='line'>book=# CREATE EXTENSION cube;  
</span><span class='line'>CREATE EXTENSION
</span><span class='line'>book=# \q
</span><span class='line'>[root@Arch_Container postgresql]# psql book -c "SELECT '1'::cube;"
</span><span class='line'> cube 
</span><span class='line'>------
</span><span class='line'> (1)
</span><span class='line'>(1 row)
</span></code></pre></td></tr></table></div></figure>



</div>
  
  


    </article>
  
  
    <article>
      
  <header>
    
      <h1 class="entry-title"><a href="/blog/2014/08/10/lxc-archlinux-tutorial/">LXC ArchLinux Tutorial</a></h1>
    
    
      <p class="meta">
        




<time class='entry-date' datetime='2014-08-10T10:08:00+08:00'><span class='date'><span class='date-month'>Aug</span> <span class='date-day'>10</span><span class='date-suffix'>th</span>, <span class='date-year'>2014</span></span> <span class='time'>10:08 am</span></time>
        
         | <a href="/blog/2014/08/10/lxc-archlinux-tutorial/#disqus_thread">Comments</a>
        
      </p>
    
  </header>


  <div class="entry-content"><h3>Installation</h3>

<p>Install <code>lxc</code>, <code>bridge-utils</code>, <code>netctl</code> from the official repository.</p>

<figure class='code'><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
</pre></td><td class='code'><pre><code class=''><span class='line'>$ sudo pacman -S lxc bridge-utils netctl
</span></code></pre></td></tr></table></div></figure>


<p>For creating ArchLinux Container, install arch-install-scripts:</p>

<figure class='code'><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
</pre></td><td class='code'><pre><code class=''><span class='line'>$ sudo pacman -S arch-install-scripts
</span></code></pre></td></tr></table></div></figure>


<p>Check Configurations:</p>

<figure class='code'><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
</pre></td><td class='code'><pre><code class=''><span class='line'>$ lxc-checkconfig
</span></code></pre></td></tr></table></div></figure>


<h3>Network Configuration</h3>

<p>Since I use systemd for bridged network, so this step remains blank, the official Arch Wiki use netctl.</p>

<h3>Creating Container Using Template</h3>

<p>List all of the available templates:</p>

<figure class='code'><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
<span class='line-number'>3</span>
<span class='line-number'>4</span>
<span class='line-number'>5</span>
</pre></td><td class='code'><pre><code class=''><span class='line'>$ ls /usr/share/lxc/templates 
</span><span class='line'>lxc-alpine     lxc-centos    lxc-fedora        lxc-oracle  lxc-ubuntu-cloud
</span><span class='line'>lxc-altlinux   lxc-cirros    lxc-gentoo        lxc-plamo
</span><span class='line'>lxc-archlinux  lxc-debian    lxc-openmandriva  lxc-sshd
</span><span class='line'>lxc-busybox    lxc-download  lxc-opensuse      lxc-ubuntu
</span></code></pre></td></tr></table></div></figure>


<p>Now using the template for creating the Linux Container:</p>

<figure class='code'><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
</pre></td><td class='code'><pre><code class=''><span class='line'>$ sudo lxc-create -n Arch_Container -t /usr/share/lxc/templates/lxc-archlinux
</span></code></pre></td></tr></table></div></figure>


<p>If the container is created successfully, it will indicates that you could use it from now.</p>

<h3>Start the Container</h3>

<p>List the installed Containers:</p>

<figure class='code'><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
</pre></td><td class='code'><pre><code class=''><span class='line'>$ sudo lxc-ls
</span><span class='line'>Arch_Container  
</span></code></pre></td></tr></table></div></figure>


<p>Start the installed Container:</p>

<figure class='code'><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
</pre></td><td class='code'><pre><code class=''><span class='line'>$ sudo lxc-start -n Arch_Container
</span></code></pre></td></tr></table></div></figure>


<p>The default username is root, and you will got a terminal window, now check the network configuration:</p>

<figure class='code'><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
<span class='line-number'>3</span>
</pre></td><td class='code'><pre><code class=''><span class='line'>[root@Arch_Container ~]# ip link show dev eth0
</span><span class='line'>5: eth0: &lt;BROADCAST,MULTICAST,UP,LOWER_UP&gt; mtu 1500 qdisc pfifo_fast state UP mode DEFAULT group default qlen 1000
</span><span class='line'>    link/ether xx:xx:xx:xx brd ff:ff:ff:ff:ff:ff
</span></code></pre></td></tr></table></div></figure>


<p>Simply use <code>dhcpcd</code> we could get the ip address currently, and surely we can see this network configuration is OK now.  <br/>
Enable the automatically dhcpcd at startup</p>

<figure class='code'><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
</pre></td><td class='code'><pre><code class=''><span class='line'>$ dhcpcd
</span><span class='line'>$ systemctl enable dhcpcd.service
</span></code></pre></td></tr></table></div></figure>


<p>Now reboot you will notice the ip address has been configurated automatically.</p>

<h3>Create Other Distributions</h3>

<p>First you should install yum and debootstrap from AUR repository.</p>

<figure class='code'><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
</pre></td><td class='code'><pre><code class=''><span class='line'>$ yaourt -S yum
</span><span class='line'>$ yaourt -S debootstrap
</span></code></pre></td></tr></table></div></figure>


<h4>Fedora</h4>

<p>Install Fedora or CentOS will failed, I don&rsquo;t know why.</p>

<h4>Debian</h4>

<p>Install rxync first via:</p>

<figure class='code'><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
</pre></td><td class='code'><pre><code class=''><span class='line'>pacman -S rsync
</span></code></pre></td></tr></table></div></figure>


<p>Some packages failed to download, so won&rsquo;t install.</p>

<p>After installed rsync, install debian container via:</p>

<figure class='code'><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
</pre></td><td class='code'><pre><code class=''><span class='line'>sudo lxc-create -n Debian_Container -t /usr/share/lxc/templates/lxc-debian
</span></code></pre></td></tr></table></div></figure>


<p>Start the container via:</p>

<figure class='code'><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
</pre></td><td class='code'><pre><code class=''><span class='line'> sudo lxc-start -n Debian_Container
</span></code></pre></td></tr></table></div></figure>


<p>The default username/password are root, In Debian network is not configured.</p>
</div>
  
  


    </article>
  
  
    <article>
      
  <header>
    
      <h1 class="entry-title"><a href="/blog/2014/08/08/moving-system-on-1t-harddisk-2/">Moving System on 1T Harddisk(2)</a></h1>
    
    
      <p class="meta">
        




<time class='entry-date' datetime='2014-08-08T20:47:00+08:00'><span class='date'><span class='date-month'>Aug</span> <span class='date-day'>8</span><span class='date-suffix'>th</span>, <span class='date-year'>2014</span></span> <span class='time'>8:47 pm</span></time>
        
         | <a href="/blog/2014/08/08/moving-system-on-1t-harddisk-2/#disqus_thread">Comments</a>
        
      </p>
    
  </header>


  <div class="entry-content"><h3>Tips</h3>

<p>Here are some tips for customize the existing system.   <br/>
1. Add octopress directory to heroku repository.   <br/>
Install heroku client tools:</p>

<figure class='code'><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
<span class='line-number'>3</span>
<span class='line-number'>4</span>
</pre></td><td class='code'><pre><code class=''><span class='line'>$ yaourt -S heroku-client
</span><span class='line'>$ heroku keys:add
</span><span class='line'>Found existing public key: /home/Trusty/.ssh/id_rsa.pub
</span><span class='line'>Uploading SSH public key /home/Trusty/.ssh/id_rsa.pub... done
</span></code></pre></td></tr></table></div></figure>


<p>Now in the copied octopress directory we could use git push command for pushing our website onto herokuapp.</p>

<p>2. MTP Device</p>

<figure class='code'><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
</pre></td><td class='code'><pre><code class=''><span class='line'>sudo pacman -S libmtp
</span><span class='line'>
</span></code></pre></td></tr></table></div></figure>


<p></p>

<p>3. libvirt</p>

<figure class='code'><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
</pre></td><td class='code'><pre><code class=''><span class='line'>sudo pacman -S libvirt
</span></code></pre></td></tr></table></div></figure>


<p>4. virtualbox-ext-oracle  <br/>
By installing this you can use USB2.0.</p>

<figure class='code'><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
</pre></td><td class='code'><pre><code class=''><span class='line'>yaourt -S virtualbox-ext-oracle
</span></code></pre></td></tr></table></div></figure>


<p>Download Virtualbox Guest ISO.  <br/>
Set Proxy in virtualbox global.</p>

<p>add user &ldquo;Trusty&rdquo; to &ldquo;vboxusers&rdquo;:</p>

<figure class='code'><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
</pre></td><td class='code'><pre><code class=''><span class='line'>$ gpasswd -a Trusty vboxusers
</span><span class='line'>$ usermod -a -G vboxusers Trusty
</span></code></pre></td></tr></table></div></figure>


<p>Now the virtualbox could use usb. And be sure to run following at suitable place:</p>

<figure class='code'><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
<span class='line-number'>3</span>
</pre></td><td class='code'><pre><code class=''><span class='line'>$ modprobe vboxdrv vboxnetflt vboxnetadp
</span><span class='line'>$ modprobe vboxnetflt
</span><span class='line'>$ modprobe vboxnetadp
</span></code></pre></td></tr></table></div></figure>


<p>4. Lumia On ArchLinux  <br/>
I don&rsquo;t have good options, but connect it into virtualbox and use it.   <br/>
Install the corresponding driver. and browser your phone content in Windows 7.</p>

<p>5. lampp adjustment  <br/>
Since the public directory is not available in my system, so I have to change the default directory from the octopress public to /opt/public.  <br/>
Then, in Rakefile, add this line:</p>

<figure class='code'><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
<span class='line-number'>3</span>
<span class='line-number'>4</span>
<span class='line-number'>5</span>
<span class='line-number'>6</span>
<span class='line-number'>7</span>
<span class='line-number'>8</span>
<span class='line-number'>9</span>
<span class='line-number'>10</span>
<span class='line-number'>11</span>
<span class='line-number'>12</span>
<span class='line-number'>13</span>
</pre></td><td class='code'><pre><code class=''><span class='line'>#######################
</span><span class='line'># Working with Jekyll #
</span><span class='line'>#######################
</span><span class='line'>
</span><span class='line'>desc "Generate jekyll site"
</span><span class='line'>task :generate do
</span><span class='line'>  raise "### You haven't set anything up yet. First run `rake install` to set up an Octopress theme." unless File.directory?(source_dir)
</span><span class='line'>  puts "## Generating Site with Jekyll"
</span><span class='line'>  system "compass compile --css-dir #{source_dir}/stylesheets"
</span><span class='line'>  system "jekyll"
</span><span class='line'>  # Copy the content to the public directory
</span><span class='line'>  system "sudo cp -r /home/Trusty/code/octo/heroku/Tomcat/public /opt"
</span><span class='line'>end
</span></code></pre></td></tr></table></div></figure>


<p>6. gedit</p>

<figure class='code'><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
</pre></td><td class='code'><pre><code class=''><span class='line'>sudo pacman -S gedit 
</span></code></pre></td></tr></table></div></figure>


<p>7. Remmina  <br/>
I use remmina for connecting to my own Surface pro, because it will automatically &ldquo;shrink&rdquo; my Desktop for the right resolution. Install it via:</p>

<figure class='code'><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
</pre></td><td class='code'><pre><code class=''><span class='line'>sudo pacman -S remmina
</span></code></pre></td></tr></table></div></figure>


<p>For Surface pro, because it has resolution as 1920x1080,so use toggle mode could get better effects.</p>

<p>8. aurget  <br/>
This is a simple client for aur repository packages, install via yaourt</p>

<figure class='code'><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
</pre></td><td class='code'><pre><code class=''><span class='line'>yaourt -S aurget
</span></code></pre></td></tr></table></div></figure>


<p>9. acpi  <br/>
Using acpi for viewing the battery status:</p>

<figure class='code'><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
</pre></td><td class='code'><pre><code class=''><span class='line'>sudo pacman -S acpi
</span></code></pre></td></tr></table></div></figure>


<p>10. Recordmydesktop  <br/>
For recording specified screen and output to ogv or other format:</p>

<figure class='code'><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
</pre></td><td class='code'><pre><code class=''><span class='line'>sudo pacman -S gtk-recordmydesktop recordmydesktop
</span></code></pre></td></tr></table></div></figure>


<p>11. Rss Reader  <br/>
I installed liferea for view RSS.</p>

<figure class='code'><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
</pre></td><td class='code'><pre><code class=''><span class='line'>sudo pacman -S liferea
</span></code></pre></td></tr></table></div></figure>


<p>12. Rstudio  <br/>
RStudio is used for generate pdf from md(markdown) file.</p>

<figure class='code'><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
</pre></td><td class='code'><pre><code class=''><span class='line'>sudo yaourt -S rstudio
</span></code></pre></td></tr></table></div></figure>


<p>13. pdflatex  <br/>
Need it for compiling pdf out:</p>

<figure class='code'><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
</pre></td><td class='code'><pre><code class=''><span class='line'>yaourt -S pdflatex.sh
</span></code></pre></td></tr></table></div></figure>


<p>14. you-get-git   <br/>
For downloading videos from youtube/CNTV, etc..</p>

<figure class='code'><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
</pre></td><td class='code'><pre><code class=''><span class='line'>yaourt you-get-git
</span></code></pre></td></tr></table></div></figure>


<p>15. git under proxy  <br/>
The detailed configuration steps should be changed via:</p>

<figure class='code'><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
</pre></td><td class='code'><pre><code class=''><span class='line'>git config --global core.gitproxy /usr/bin/myproxy
</span></code></pre></td></tr></table></div></figure>


<p>16. pandoc  <br/>
Install pandoc via yaourt:</p>

<figure class='code'><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
</pre></td><td class='code'><pre><code class=''><span class='line'>yaourt pandoc
</span></code></pre></td></tr></table></div></figure>


<p>17. wkhtmltopdf  <br/>
Install wkhtmltopdf via pacman:</p>

<figure class='code'><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
</pre></td><td class='code'><pre><code class=''><span class='line'>sudo pacman -S wkhtmltopdf
</span><span class='line'>wkhtmltopdf -s A4  -B 10 -T 10 ./Output/CV_Chinese.html ./Output/CV_Chinese.pdf
</span></code></pre></td></tr></table></div></figure>


<p>-B Bottom Margin, -T Top Margin.</p>

<p>18. expect  <br/>
For automatically login and doing processing.</p>

<figure class='code'><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
</pre></td><td class='code'><pre><code class=''><span class='line'>sudo pacman -S expect
</span></code></pre></td></tr></table></div></figure>


<p>19. Minicom  <br/>
Minicom is a serial port terminal tool for minitoring serial ports.</p>

<figure class='code'><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
</pre></td><td class='code'><pre><code class=''><span class='line'>sudo pacman -S minicom
</span></code></pre></td></tr></table></div></figure>


<p>20. Multilib Support  <br/>
Uncomment following 2 lines in /etc/pacman.conf:</p>

<figure class='code'><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
</pre></td><td class='code'><pre><code class=''><span class='line'>[multilib]
</span><span class='line'>Include = /etc/pacman.d/mirrorlist
</span></code></pre></td></tr></table></div></figure>


<p>30. lib32-glibc  <br/>
For using 32-bit applications:</p>

<figure class='code'><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
</pre></td><td class='code'><pre><code class=''><span class='line'>sudo pacman -S lib32-glibc
</span></code></pre></td></tr></table></div></figure>


<p>31. ghex <br/>
For viewing the binary file under Linux:</p>

<figure class='code'><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
</pre></td><td class='code'><pre><code class=''><span class='line'>sudo pacman -S ghex
</span></code></pre></td></tr></table></div></figure>


<p>32. lib32-gtk2  <br/>
Install this for compatable for CodeSourcery&rsquo;s toolchain installation:</p>

<figure class='code'><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
</pre></td><td class='code'><pre><code class=''><span class='line'>sudo pacman -S lib32-gtk2
</span></code></pre></td></tr></table></div></figure>


<p>33. lib32 others:  <br/>
Install following packages for CodeSourcery:</p>

<figure class='code'><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
</pre></td><td class='code'><pre><code class=''><span class='line'>sudo pacman -S xulrunner lib32-xcb-util lib32-gtk-engines lib32-ncurses
</span></code></pre></td></tr></table></div></figure>


<p>34. fbreader:   <br/>
fbreader is for opening the epub files:</p>

<figure class='code'><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
</pre></td><td class='code'><pre><code class=''><span class='line'>sudo pacman -S fbreader
</span></code></pre></td></tr></table></div></figure>


<p>35. Auto update the dkms:  <br/>
For building the virtualbox modules:</p>

<figure class='code'><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
</pre></td><td class='code'><pre><code class=''><span class='line'> sudo systemctl enable dkms.service
</span></code></pre></td></tr></table></div></figure>


<p>36. Fakeroot  <br/>
For building some embedded systems.</p>

<figure class='code'><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
</pre></td><td class='code'><pre><code class=''><span class='line'>sudo pacman -S fakeroot
</span></code></pre></td></tr></table></div></figure>


<p>37. dosfstools  <br/>
Install it for obtains mkfs.vfat:</p>

<figure class='code'><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
</pre></td><td class='code'><pre><code class=''><span class='line'>sudo pacman -S dosfstools
</span></code></pre></td></tr></table></div></figure>


<p>38. tsocks  <br/>
For acrossing the company firewall:</p>

<figure class='code'><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
</pre></td><td class='code'><pre><code class=''><span class='line'>sudo pacman -S tsocks
</span></code></pre></td></tr></table></div></figure>


<p>Then edit the configuration file:</p>

<figure class='code'><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
<span class='line-number'>3</span>
<span class='line-number'>4</span>
</pre></td><td class='code'><pre><code class=''><span class='line'>$ cat /etc/tsocks.conf 
</span><span class='line'>server = 127.0.0.1
</span><span class='line'>server_type = 5
</span><span class='line'>server_port = 1394
</span></code></pre></td></tr></table></div></figure>


<p>You can run <code>tsocks gnome-terminal</code> for getting a totally free terminal.</p>

<p>39. For building Android  <br/>
Install required packages:</p>

<figure class='code'><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
</pre></td><td class='code'><pre><code class=''><span class='line'>$ sudo pacman -S gcc-multilib lib32-zlib lib32-ncurses lib32-readline
</span></code></pre></td></tr></table></div></figure>


<p>Notice this will remove the gcc and gcc-libs, for gcc-libs-multilib and gcc-multilib will be conficted with the origin installed gcc and gcc-lib version.</p>

<p>Use Sun/Oracle JDK for compiling:</p>

<figure class='code'><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
<span class='line-number'>3</span>
</pre></td><td class='code'><pre><code class=''><span class='line'>$ set2383
</span><span class='line'>$ yaourt jdk6-compat
</span><span class='line'>$ export JAVA_HOMNE=/opt/java6
</span></code></pre></td></tr></table></div></figure>


<p>For using virtualenv2 you have to install:</p>

<figure class='code'><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
<span class='line-number'>3</span>
<span class='line-number'>4</span>
<span class='line-number'>5</span>
<span class='line-number'>6</span>
<span class='line-number'>7</span>
<span class='line-number'>8</span>
<span class='line-number'>9</span>
</pre></td><td class='code'><pre><code class=''><span class='line'>$ sudo pacman -S python2-virtualenv
</span><span class='line'>$ virtualenv2 venv
</span><span class='line'>New python executable in venv/bin/python2
</span><span class='line'>Also creating executable in venv/bin/python
</span><span class='line'>Installing setuptools, pip...done.
</span><span class='line'>$ ln -s /usr/lib/python2.7/* /media/y/embedded/Android/ubuntu/venv/python2.7/
</span><span class='line'>$ repo sync
</span><span class='line'>$ /bin/bash
</span><span class='line'>$ source venv/bin/activate
</span></code></pre></td></tr></table></div></figure>


<p>Install make 3.81 for building:</p>

<figure class='code'><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
</pre></td><td class='code'><pre><code class=''><span class='line'>$ sudo yaourt make 3.81
</span><span class='line'>$ make-3.81 -j4
</span></code></pre></td></tr></table></div></figure>


<p>Lacking flex, install it via:</p>

<figure class='code'><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
</pre></td><td class='code'><pre><code class=''><span class='line'>$ sudo pacman -S flex
</span></code></pre></td></tr></table></div></figure>


<p>Lacking gperf, install it via:</p>

<figure class='code'><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
</pre></td><td class='code'><pre><code class=''><span class='line'>$ sudo pacman -S gperf
</span></code></pre></td></tr></table></div></figure>


<p>Install perl related(first configure as automatic, then install switch):</p>

<figure class='code'><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
</pre></td><td class='code'><pre><code class=''><span class='line'>$ cpan App::cpanminus
</span><span class='line'>$ cpanm Switch
</span></code></pre></td></tr></table></div></figure>


<p>Then install gcc44 from yaourt:</p>

<figure class='code'><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
</pre></td><td class='code'><pre><code class=''><span class='line'>$ yaourt -S gcc44
</span></code></pre></td></tr></table></div></figure>


<p>Build with gcc44:</p>

<figure class='code'><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
</pre></td><td class='code'><pre><code class=''><span class='line'>$ make-3.81 CC=gcc-4.4 CXX=g++-4.4 -j4
</span></code></pre></td></tr></table></div></figure>


<p>Met build error:</p>

<figure class='code'><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
</pre></td><td class='code'><pre><code class=''><span class='line'>  error: aggregate ‘setrlimitsFromArray(ArrayObject*)::rlimit rlim’ has incomplete type and cannot be defined struct rlimit rlim; ^ 
</span></code></pre></td></tr></table></div></figure>


<p>Solution is simply to add #include &lt;sys/resource.h> to dalvik/vm/native/dalvik_system_Zygote.cpp.
When you met compatible, install gcc44-multilib:</p>

<figure class='code'><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
</pre></td><td class='code'><pre><code class=''><span class='line'>yaourt -S gcc44-multilib 
</span></code></pre></td></tr></table></div></figure>


<p>39. pavucontrol   <br/>
pavucontrol is A GTK volume control for PulseAudio, install it for redirecting the sound into the bluetooth device.</p>

<figure class='code'><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
</pre></td><td class='code'><pre><code class=''><span class='line'>$ sudo pacman -S pavucontrol
</span></code></pre></td></tr></table></div></figure>


<p>40. nfs  <br/>
For embedded Linux development, we have to use nfs(Network FileSystem) so we install it via:</p>

<figure class='code'><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
</pre></td><td class='code'><pre><code class=''><span class='line'>sudo pacman -S nfs-utils
</span></code></pre></td></tr></table></div></figure>


<p>To be configured, because the parameters is complicated.</p>

<p>41. xclip  <br/>
For using clipboard under X, we have to install this tool.</p>

<figure class='code'><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
</pre></td><td class='code'><pre><code class=''><span class='line'>sudo pacman -S xclip
</span></code></pre></td></tr></table></div></figure>


<p>42. avidemux  <br/>
For modify the videos under Linux:</p>

<figure class='code'><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
</pre></td><td class='code'><pre><code class=''><span class='line'>sudo pacman -S avidemux avidemux-gtk
</span></code></pre></td></tr></table></div></figure>


<p>It couldn&rsquo;t handle ogv format.</p>

<p>43. pitivi  <br/>
    Editor for audio/video projects using the GStreamer framework, we also add some plugins.</p>

<figure class='code'><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
</pre></td><td class='code'><pre><code class=''><span class='line'>$ sudo pacman -S pitivi
</span><span class='line'>$ sudo pacman -S gst-libav gst-plugins-bad gst-plugins-ugly frei0r-plugins
</span></code></pre></td></tr></table></div></figure>


<p>But pitivi won&rsquo;t run on archlinux, for lacking the pycanberra, so I try the openshot.</p>

<p>44. openshot</p>

<figure class='code'><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
</pre></td><td class='code'><pre><code class=''><span class='line'>$ sudo pacman -S openshot
</span></code></pre></td></tr></table></div></figure>


<p>45. Mencoder: <br/>
For converting video format:</p>

<figure class='code'><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
</pre></td><td class='code'><pre><code class=''><span class='line'>$ sudo pacman -S mencoder
</span><span class='line'>$ mencoder output.flv -o video_final.flv -ovc copy -oac copy -audiofile xxx.mp3
</span></code></pre></td></tr></table></div></figure>


<p>46. ffmpeg:  <br/>
For converting video format:</p>

<figure class='code'><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
</pre></td><td class='code'><pre><code class=''><span class='line'>$ sudo pacman -S ffmpeg
</span><span class='line'>$ ffmpeg -i out.ogv -vcodec libx264 -strict -2  output.mp4 
</span></code></pre></td></tr></table></div></figure>


<p>47. p7zip <br/>
p7zip is the linux version 7zip:</p>

<figure class='code'><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
</pre></td><td class='code'><pre><code class=''><span class='line'>$ sudo pacman -S p7zip
</span></code></pre></td></tr></table></div></figure>


<p>48. Acrobat Reader  <br/>
Sometimes evince will crash when viewing some embedded picture pdf, we use Acrobat Reader for viewing such pdfs:</p>

<figure class='code'><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
</pre></td><td class='code'><pre><code class=''><span class='line'>$ sudo pacman -S acroread
</span></code></pre></td></tr></table></div></figure>


<p>Notice, acroread package only includes in archlinuxfr, so firstly you should add archlinuxfr in your pacman.conf.</p>

<p>49. Konsole  <br/>
Since the gnome-terminal will be not see input line when you enable the new tabs, I install konsole and use it as default terminal:</p>

<figure class='code'><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
</pre></td><td class='code'><pre><code class=''><span class='line'>$ sudo pacman -S kdebase-konsole
</span></code></pre></td></tr></table></div></figure>


<p>Change the default run command to zsh -l, this will enable the &ldquo;run as login shell&rdquo;, then change the default shortcuts, also you should change the default fonts just like we used set in xfce4-terminal/gnome-terminal.   <br/>
Default font changes:</p>

<figure class='code'><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
<span class='line-number'>3</span>
<span class='line-number'>4</span>
</pre></td><td class='code'><pre><code class=''><span class='line'>$ cat ~/.kde4/share/apps/konsole/Shell.profile
</span><span class='line'>[Appearance]
</span><span class='line'>ColorScheme=DarkPastels
</span><span class='line'>Font=YaHei Consolas Hybrid,13,-1,5,50,0,0,0,0,0
</span></code></pre></td></tr></table></div></figure>


<p>Now re-login your desktop environment(mine is awesome), you will found the font has been changed in the konsole terminal. <br/>
Alter the startup window of konsole, and don&rsquo;t let it recovers to the last altered size:   <br/>
<img src="/images/konsolesize.jpg" alt="/images/konsolesize.jpg" /></p>

<p>50. pip-shadowsocks
First you should install pip via:</p>

<figure class='code'><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
</pre></td><td class='code'><pre><code class=''><span class='line'>$ sudo pacman -S python-pip
</span><span class='line'>$ sudo pacman -S python2-pip
</span></code></pre></td></tr></table></div></figure>


<p>Since shadownsocks only support python2, install python2 is the right way.</p>

<figure class='code'><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
</pre></td><td class='code'><pre><code class=''><span class='line'>$ sudo pip2 install shadowsocks
</span></code></pre></td></tr></table></div></figure>


<p>51. DNSutils  <br/>
For querying the dns.</p>

<figure class='code'><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
</pre></td><td class='code'><pre><code class=''><span class='line'>sudo pacman -S dnsutils
</span></code></pre></td></tr></table></div></figure>


<p>Then you could use host/dig/nslookup, etc.</p>

<p>52. gdisk  <br/>
For format into gpt format&rsquo;s fdisk:</p>

<figure class='code'><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
</pre></td><td class='code'><pre><code class=''><span class='line'>sudo pacman -S gdisk
</span></code></pre></td></tr></table></div></figure>


<p>53. pandoc-static   <br/>
For generating beautiful pdf and other formats of documentations.</p>

<figure class='code'><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
</pre></td><td class='code'><pre><code class=''><span class='line'># yaourt -S pandoc-static --noconfirm
</span></code></pre></td></tr></table></div></figure>


<p>54. ShadowSocks   <br/>
For crossing the GFW:</p>

<figure class='code'><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
</pre></td><td class='code'><pre><code class=''><span class='line'>sudo pacman -S shadowsocks
</span></code></pre></td></tr></table></div></figure>


<p>55. mtools  <br/>
For using mcopy, etc:</p>

<figure class='code'><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
</pre></td><td class='code'><pre><code class=''><span class='line'>sudo pacman -S mtools
</span></code></pre></td></tr></table></div></figure>


<p>56. lzop  <br/>
File compressor using lzo lib, for compiling some images:</p>

<figure class='code'><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
</pre></td><td class='code'><pre><code class=''><span class='line'>$ sudo pacman -S lzop
</span></code></pre></td></tr></table></div></figure>


<p>57. vnstat    <br/>
For monitoring the network traffic:</p>

<figure class='code'><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
<span class='line-number'>3</span>
<span class='line-number'>4</span>
</pre></td><td class='code'><pre><code class=''><span class='line'>$ sudo pacman -S vnstat
</span><span class='line'>$ sudo systemctl start vnstat.service
</span><span class='line'>$ sudo systemctl enable vnstat.service
</span><span class='line'>$ sudo vnstat -u -i enp0s25
</span></code></pre></td></tr></table></div></figure>


<p>Use following commands for querying the traffic statistics:</p>

<figure class='code'><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
</pre></td><td class='code'><pre><code class=''><span class='line'>$ vnstat -q
</span></code></pre></td></tr></table></div></figure>


<p>58. htop  <br/>
For viewing the system performance, comparing to top, its display will be more clearly.</p>

<figure class='code'><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
</pre></td><td class='code'><pre><code class=''><span class='line'>$ sudo pacman -S htop
</span></code></pre></td></tr></table></div></figure>


<p>59. virtualbox-ext-oracle    <br/>
For enable usb or other attached devices:</p>

<figure class='code'><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
</pre></td><td class='code'><pre><code class=''><span class='line'>yaourt -S virtualbox-ext-oracle
</span></code></pre></td></tr></table></div></figure>


<p>60. lighthttpd  <br/>
For replacing the heavy xampp, use it for serving the static website:</p>

<figure class='code'><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
</pre></td><td class='code'><pre><code class=''><span class='line'>sudo pacman -S lighttpd
</span></code></pre></td></tr></table></div></figure>


<p>61. Synergy   <br/>
For sharing the mouse and keyboard between different systems.</p>

<figure class='code'><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
</pre></td><td class='code'><pre><code class=''><span class='line'>sudo pacman -S synergy qsynergy
</span></code></pre></td></tr></table></div></figure>



</div>
  
  


    </article>
  
  
    <article>
      
  <header>
    
      <h1 class="entry-title"><a href="/blog/2014/08/08/configure-network-in-rc-dot-local/">Configure Network in rc.local</a></h1>
    
    
      <p class="meta">
        




<time class='entry-date' datetime='2014-08-08T10:23:00+08:00'><span class='date'><span class='date-month'>Aug</span> <span class='date-day'>8</span><span class='date-suffix'>th</span>, <span class='date-year'>2014</span></span> <span class='time'>10:23 am</span></time>
        
         | <a href="/blog/2014/08/08/configure-network-in-rc-dot-local/#disqus_thread">Comments</a>
        
      </p>
    
  </header>


  <div class="entry-content"><p>Following is the configuration of the vlan and whole network: <br/>
In rc.local, RHEL.</p>

<figure class='code'><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
<span class='line-number'>3</span>
<span class='line-number'>4</span>
<span class='line-number'>5</span>
<span class='line-number'>6</span>
<span class='line-number'>7</span>
<span class='line-number'>8</span>
<span class='line-number'>9</span>
<span class='line-number'>10</span>
<span class='line-number'>11</span>
<span class='line-number'>12</span>
<span class='line-number'>13</span>
<span class='line-number'>14</span>
<span class='line-number'>15</span>
<span class='line-number'>16</span>
<span class='line-number'>17</span>
<span class='line-number'>18</span>
<span class='line-number'>19</span>
<span class='line-number'>20</span>
<span class='line-number'>21</span>
<span class='line-number'>22</span>
<span class='line-number'>23</span>
<span class='line-number'>24</span>
<span class='line-number'>25</span>
<span class='line-number'>26</span>
<span class='line-number'>27</span>
<span class='line-number'>28</span>
<span class='line-number'>29</span>
<span class='line-number'>30</span>
<span class='line-number'>31</span>
<span class='line-number'>32</span>
<span class='line-number'>33</span>
<span class='line-number'>34</span>
<span class='line-number'>35</span>
<span class='line-number'>36</span>
<span class='line-number'>37</span>
<span class='line-number'>38</span>
<span class='line-number'>39</span>
<span class='line-number'>40</span>
<span class='line-number'>41</span>
<span class='line-number'>42</span>
<span class='line-number'>43</span>
<span class='line-number'>44</span>
<span class='line-number'>45</span>
<span class='line-number'>46</span>
<span class='line-number'>47</span>
<span class='line-number'>48</span>
<span class='line-number'>49</span>
<span class='line-number'>50</span>
<span class='line-number'>51</span>
<span class='line-number'>52</span>
<span class='line-number'>53</span>
<span class='line-number'>54</span>
<span class='line-number'>55</span>
<span class='line-number'>56</span>
<span class='line-number'>57</span>
<span class='line-number'>58</span>
<span class='line-number'>59</span>
<span class='line-number'>60</span>
<span class='line-number'>61</span>
<span class='line-number'>62</span>
</pre></td><td class='code'><pre><code class=''><span class='line'>#!/bin/sh
</span><span class='line'>#
</span><span class='line'># This script will be executed *after* all the other init scripts.
</span><span class='line'># You can put your own initialization stuff in here if you don't
</span><span class='line'># want to do the full Sys V style init stuff.
</span><span class='line'>
</span><span class='line'>touch /var/lock/subsys/local
</span><span class='line'>
</span><span class='line'>echo VLAN=yes &gt; /etc/sysconfig/network 
</span><span class='line'>
</span><span class='line'>/sbin/vconfig add eth1 10
</span><span class='line'>/sbin/vconfig add eth1 11
</span><span class='line'>/sbin/vconfig add eth1 12
</span><span class='line'>/sbin/vconfig add eth1 13
</span><span class='line'>/sbin/vconfig add eth1 30
</span><span class='line'>/sbin/vconfig add eth1 40
</span><span class='line'>
</span><span class='line'>/sbin/vconfig add eth1 100
</span><span class='line'>/sbin/vconfig add eth1 110
</span><span class='line'>/sbin/vconfig add eth1 120
</span><span class='line'>/sbin/vconfig add eth1 130
</span><span class='line'>/sbin/vconfig add eth1 200
</span><span class='line'>
</span><span class='line'>/sbin/ifconfig eth1.10 172.10.1.55 netmask 255.255.0.0 up
</span><span class='line'>/sbin/ifconfig eth1.10:11 172.10.11.55 netmask 255.255.0.0 up
</span><span class='line'>/sbin/ifconfig eth1.11 172.11.1.55 netmask 255.255.0.0 up
</span><span class='line'>/sbin/ifconfig eth1.12 172.12.1.55 netmask 255.255.0.0 up
</span><span class='line'>/sbin/ifconfig eth1.13 172.13.1.55 netmask 255.255.0.0 up
</span><span class='line'>/sbin/ifconfig eth1.30 172.30.1.55 netmask 255.255.0.0 up
</span><span class='line'>/sbin/ifconfig eth1.30:11 172.30.11.55 netmask 255.255.0.0 up
</span><span class='line'>/sbin/ifconfig eth1.40 172.40.1.55 netmask 255.255.0.0 up
</span><span class='line'>
</span><span class='line'>/sbin/ifconfig eth1.100 20.100.1.55 netmask 255.255.0.0 up
</span><span class='line'>/sbin/ifconfig eth1.110 20.110.1.55 netmask 255.255.0.0 up
</span><span class='line'>/sbin/ifconfig eth1.120 20.120.1.55 netmask 255.255.0.0 up
</span><span class='line'>/sbin/ifconfig eth1.130 20.130.1.55 netmask 255.255.0.0 up
</span><span class='line'>
</span><span class='line'>/sbin/ifconfig eth1.10 inet6 add fd00::410:172:10:1:88/64
</span><span class='line'>/sbin/ifconfig eth1.10 inet6 add fd00::410:172:10:11:88/64
</span><span class='line'>/sbin/ifconfig eth1.11 inet6 add fd00::411:172:11:1:88/64
</span><span class='line'>/sbin/ifconfig eth1.12 inet6 add fd00::412:172:12:1:88/64
</span><span class='line'>/sbin/ifconfig eth1.13 inet6 add fd00::413:172:13:1:88/64
</span><span class='line'>/sbin/ifconfig eth1.30 inet6 add fd00::430:172:30:1:88/64
</span><span class='line'>/sbin/ifconfig eth1.30 inet6 add fd00::430:172:30:11:88/64
</span><span class='line'>/sbin/ifconfig eth1.40 inet6 add fd00::440:172:40:1:88/64
</span><span class='line'>
</span><span class='line'>route add -net 224.0.0.0 netmask 224.0.0.0 dev eth1.40
</span><span class='line'>/sbin/route add default gw 10.9.134.1 dev eth1
</span><span class='line'>
</span><span class='line'>echo 1 &gt; /proc/sys/net/ipv4/ip_forward
</span><span class='line'>
</span><span class='line'>echo 1 &gt; /proc/sys/net/ipv6/conf/all/forwarding
</span><span class='line'>echo 1 &gt; /proc/sys/net/ipv6/conf/all/mc_forwarding
</span><span class='line'>
</span><span class='line'>modprobe sctp
</span><span class='line'>
</span><span class='line'>#/etc/init.d/xinetd restart
</span><span class='line'>#/usr/sbin/xinetd -stayalive -pidfile /var/run/xinetd.pid
</span><span class='line'>#echo "nameserver 10.9.133.243" &gt;&gt; /etc/resolv.conf
</span><span class='line'># Activate eth0 again. 
</span><span class='line'>/sbin/ifconfig eth0 1xx.xx.xxx.xxx netmask 255.255.255.0 up
</span><span class='line'>/sbin/route add default gw 1xx.xx.xxx.1 dev eth0
</span></code></pre></td></tr></table></div></figure>


<p>For eth0 will lose configuration, so we add the eth0 again.</p>
</div>
  
  


    </article>
  
  
    <article>
      
  <header>
    
      <h1 class="entry-title"><a href="/blog/2014/07/31/writing-style-under-linux/">Writing Style Under Linux</a></h1>
    
    
      <p class="meta">
        




<time class='entry-date' datetime='2014-07-31T15:15:00+08:00'><span class='date'><span class='date-month'>Jul</span> <span class='date-day'>31</span><span class='date-suffix'>st</span>, <span class='date-year'>2014</span></span> <span class='time'>3:15 pm</span></time>
        
         | <a href="/blog/2014/07/31/writing-style-under-linux/#disqus_thread">Comments</a>
        
      </p>
    
  </header>


  <div class="entry-content"><h3>Writing</h3>

<p>Use <code>rake new_post</code> for generate a new blog.  <br/>
<img src="/images/writing1.jpg" alt="/images/writing1.jpg" /></p>

<p>Use vim for editing the article:  <br/>
<img src="/images/writing2.jpg" alt="/images/writing2.jpg" /></p>

<h3>Building</h3>

<p>Building the blogs:  <br/>
<img src="/images/writing3.jpg" alt="/images/writing3.jpg" /></p>

<p>Now build successful:   <br/>
<img src="/images/writing4.jpg" alt="/images/writing4.jpg" /></p>

<h3>Browsing</h3>

<p>View the result in browser:  <br/>
<img src="/images/writing5.jpg" alt="/images/writing5.jpg" /></p>
</div>
  
  


    </article>
  
  
    <article>
      
  <header>
    
      <h1 class="entry-title"><a href="/blog/2014/07/31/moving-system-on-1t-harddisk/">Moving System on 1T Harddisk</a></h1>
    
    
      <p class="meta">
        




<time class='entry-date' datetime='2014-07-31T15:05:00+08:00'><span class='date'><span class='date-month'>Jul</span> <span class='date-day'>31</span><span class='date-suffix'>st</span>, <span class='date-year'>2014</span></span> <span class='time'>3:05 pm</span></time>
        
         | <a href="/blog/2014/07/31/moving-system-on-1t-harddisk/#disqus_thread">Comments</a>
        
      </p>
    
  </header>


  <div class="entry-content"><h3>Preparation</h3>

<p>View the newly added harddisk via:</p>

<figure class='code'><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
<span class='line-number'>3</span>
<span class='line-number'>4</span>
<span class='line-number'>5</span>
<span class='line-number'>6</span>
<span class='line-number'>7</span>
<span class='line-number'>8</span>
</pre></td><td class='code'><pre><code class=''><span class='line'>$ fdisk -l
</span><span class='line'>Disk /dev/sdb: 931.5 GiB, 1000204886016 bytes, 1953525168 sectors
</span><span class='line'>Units: sectors of 1 * 512 = 512 bytes
</span><span class='line'>Sector size (logical/physical): 512 bytes / 4096 bytes
</span><span class='line'>I/O size (minimum/optimal): 4096 bytes / 4096 bytes
</span><span class='line'>[Trusty@/dev/disk/by-uuid]$ ls -l /dev/disk/by-id 
</span><span class='line'>total 0
</span><span class='line'>lrwxrwxrwx 1 root root  9 Jul 31 14:50 ata-WDC_WD10JPVX-00JC3T0_WD-WX31A54D4529 -&gt; ../../sdb
</span></code></pre></td></tr></table></div></figure>


<p>Now we know the id of the harddisk, Create a vmdk file which links to this physical disk.</p>

<figure class='code'><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
<span class='line-number'>3</span>
<span class='line-number'>4</span>
<span class='line-number'>5</span>
</pre></td><td class='code'><pre><code class=''><span class='line'>[Trusty@/media/x/Moving]$ pwd
</span><span class='line'>/media/x/Moving
</span><span class='line'>[Trusty@/media/x/Moving]$ VBoxManage internalcommands createrawvmdk -filename ./moving.vmdk -rawdisk /dev/disk/by-id/ata-WDC_WD10JPVX-00JC3T0_WD-WX31A54D4529 
</span><span class='line'>RAW host disk access VMDK file ./moving.vmdk created successfully.
</span><span class='line'>$ wget http://mirrors.kernel.org/archlinux/iso/2014.07.03/archlinux-2014.07.03-dual.iso
</span></code></pre></td></tr></table></div></figure>


<p>Now create a new virtual machine in virtualbox. Begin to install.</p>

<h3>Installation</h3>

<p>The detailed steps could be viewed in my previous blogs,  &ldquo;moving-from-working-pc-to-own-usb-disk-based&rdquo;.</p>

<figure class='code'><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
<span class='line-number'>3</span>
<span class='line-number'>4</span>
<span class='line-number'>5</span>
<span class='line-number'>6</span>
<span class='line-number'>7</span>
</pre></td><td class='code'><pre><code class=''><span class='line'>$ pacman -S chromium firefox xorg xorg-xinit awesome xf86-video-intel xf86-video-ati pidgin thunderbird wget libreoffice gnome-terminal tigervnc xfce4  evince gimp smplayer alsa-utils gvim eclipse git subversion wireshark-gtk tcpdump ddd gdb meld qemu virtualbox wqy-bitmapfont wqy-microhei wqy-microhei-lite wqy-zenhei fcitx fcitx-libpinyin rox gpicview conky fcitx-googlepinyin nodejs cronie ntfs-3g liferea
</span><span class='line'>$ pacman -S zsh
</span><span class='line'>$ useradd -m -g root -G audio -s /bin/zsh Trusty
</span><span class='line'>$ pacman -S sudo
</span><span class='line'># Add yaourt, and 
</span><span class='line'>$ pacman -Syu && pacman -S yaourt
</span><span class='line'>$ yaourt sipe webqq
</span></code></pre></td></tr></table></div></figure>


<p>Configure E-mail and Office Communicator:</p>

<figure class='code'><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
</pre></td><td class='code'><pre><code class=''><span class='line'>Communicator:   UCCAPI/15.0.4481.1000 OC/15.0.4481.1000
</span><span class='line'>TLS-DSK.   
</span></code></pre></td></tr></table></div></figure>


<p>Tips for reconfiguring:  <br/>
1. Install fcitx-configtool, then we could configure the fcitx and let it add more input method, or the default one is english.  <br/>
2. Install hdtemp, lm_sensors, which will be used in conkyrc.   <br/>
3. Copy the .config/awesome, and copy the themes to /usr/share/awesome/themes, the directory is named wabbit. This step is required in this time&rsquo;s installation, previous I don&rsquo;t remember this step, perhaps awesome changes.  <br/>
4. Goagent, install python2-pyopenssl. Then goagent could be used.  <br/>
5. mycapscr:</p>

<figure class='code'><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
<span class='line-number'>3</span>
</pre></td><td class='code'><pre><code class=''><span class='line'>$ mkdir ~/capscr
</span><span class='line'>$ sudo pacman -S scrot
</span><span class='line'>$ cat /usr/bin/mycapscr
</span></code></pre></td></tr></table></div></figure>


<p>6. Install xampp</p>

<figure class='code'><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
</pre></td><td class='code'><pre><code class=''><span class='line'>$ sudo yaourt xampp, then configure it. 
</span><span class='line'>
</span></code></pre></td></tr></table></div></figure>


<p>7. Install udiskie for automount.  <br/>
8. Install xlock-more for xlock.  <br/>
9. Flash for chromium: yaourt chromium-pepper-flash. Then restart the chromim for using flash.  <br/>
10. Enable the auto-login for ssh.</p>

<figure class='code'><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
<span class='line-number'>3</span>
</pre></td><td class='code'><pre><code class=''><span class='line'>$ cat ~/.ssh/id_rsa.pub| ssh Trusty@1xx.xx.xxx.xxx'cat &gt;&gt; /home/Trusty/.ssh/authorized_keys'
</span><span class='line'>$ cat ~/.ssh/id_rsa.pub| ssh root@1xx.xx.xxx.xxx'cat&gt;&gt;/root/.ssh/authorized_keys'
</span><span class='line'>$ cat ~/.ssh/id_rsa.pub| ssh Tomcat@MisteryPlace.xxx.xxx.xxx.com 'cat&gt;&gt;~/.ssh/authorized_keys'
</span></code></pre></td></tr></table></div></figure>


<p>
11. Font Configuration</p>

<figure class='code'><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
<span class='line-number'>3</span>
<span class='line-number'>4</span>
<span class='line-number'>5</span>
</pre></td><td class='code'><pre><code class=''><span class='line'>$  sudo mkdir -p /usr/share/fonts/vista
</span><span class='line'>$  sudo cp /mnt/usr/share/fonts/vista/YaHei.Consolas.1.11b.ttf /usr/share/fonts/vista
</span><span class='line'>$  sudo chmod 644 /usr/share/fonts/vista/*.ttf
</span><span class='line'>$  cd /usr/share/fonts/vista/
</span><span class='line'>$  sudo mkfontscale && sudo mkfontdir && sudo fc-cache -fv
</span></code></pre></td></tr></table></div></figure>


<p>Then change the terminal font to YaHei   <br/>
12. blog writing use:</p>

<figure class='code'><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
<span class='line-number'>3</span>
<span class='line-number'>4</span>
<span class='line-number'>5</span>
</pre></td><td class='code'><pre><code class=''><span class='line'>$ echo insecure &gt;&gt; ~/.curlrc
</span><span class='line'>$ curl -k --insecure  -L https://get.rvm.io | bash -s stable --ruby
</span><span class='line'>$ rvm install 1.9.3
</span><span class='line'>$ gem install bundler
</span><span class='line'>$ bundle install
</span></code></pre></td></tr></table></div></figure>


<p>You have to enable the terminal emulator&rsquo;s setting by enable &ldquo;Run command as login shell&rdquo;.   <br/>
Then you have to add the ssh key to the github.com.   <br/>
13. Configure bridged network for qemu use.</p>

<figure class='code'><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
<span class='line-number'>3</span>
<span class='line-number'>4</span>
<span class='line-number'>5</span>
<span class='line-number'>6</span>
<span class='line-number'>7</span>
<span class='line-number'>8</span>
<span class='line-number'>9</span>
<span class='line-number'>10</span>
<span class='line-number'>11</span>
<span class='line-number'>12</span>
<span class='line-number'>13</span>
<span class='line-number'>14</span>
<span class='line-number'>15</span>
<span class='line-number'>16</span>
</pre></td><td class='code'><pre><code class=''><span class='line'># systemctl start systemd-networkd.service 
</span><span class='line'>[root@TrustyArch network]# systemctl enable systemd-networkd.service
</span><span class='line'>Created symlink from /etc/systemd/system/multi-user.target.wants/systemd-networkd.service to /usr/lib/systemd/system/systemd-networkd.service.
</span><span class='line'># systemctl disable dhcpcd@enp0s25
</span><span class='line'>[root@TrustyArch Trusty]# systemctl enable dhcpcd@enp0s25
</span><span class='line'>Created symlink from /etc/systemd/system/multi-user.target.wants/dhcpcd@enp0s25.service to /usr/lib/systemd/system/dhcpcd@.service.
</span><span class='line'>[root@TrustyArch Trusty]# systemctl disable dhcpcd@enp0s25
</span><span class='line'>Removed symlink /etc/systemd/system/multi-user.target.wants/dhcpcd@enp0s25.service.
</span><span class='line'>[root@TrustyArch network]# cat MyDhcp.network 
</span><span class='line'>[Match]
</span><span class='line'>Name=enp0s25
</span><span class='line'>
</span><span class='line'>[Network]
</span><span class='line'>DHCP=yes
</span><span class='line'>[root@TrustyArch network]# pwd
</span><span class='line'>/etc/systemd/network
</span></code></pre></td></tr></table></div></figure>


<p>Now the network is configured to dhcpcd@enp0s25.</p>

<p>Continue to edit for bridge :</p>

<figure class='code'><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
<span class='line-number'>3</span>
<span class='line-number'>4</span>
<span class='line-number'>5</span>
<span class='line-number'>6</span>
<span class='line-number'>7</span>
<span class='line-number'>8</span>
<span class='line-number'>9</span>
<span class='line-number'>10</span>
<span class='line-number'>11</span>
<span class='line-number'>12</span>
<span class='line-number'>13</span>
<span class='line-number'>14</span>
<span class='line-number'>15</span>
<span class='line-number'>16</span>
<span class='line-number'>17</span>
<span class='line-number'>18</span>
</pre></td><td class='code'><pre><code class=''><span class='line'>[root@TrustyArch network]# cat MyBridge.netdev 
</span><span class='line'>[NetDev]
</span><span class='line'>Name=br0
</span><span class='line'>Kind=bridge
</span><span class='line'>MacAddress=
</span><span class='line'>[root@TrustyArch network]# cat MyBridge.network 
</span><span class='line'>[Match]
</span><span class='line'>Name=br0
</span><span class='line'>
</span><span class='line'>[Network]
</span><span class='line'>DHCP=yes
</span><span class='line'>[root@TrustyArch network]# cat MyEth.network 
</span><span class='line'>[Match]
</span><span class='line'>Name=enp0s25
</span><span class='line'>
</span><span class='line'>[Network]
</span><span class='line'>Bridge=br0
</span><span class='line'>$ systemctl restart systemd-networkd.service
</span></code></pre></td></tr></table></div></figure>


<p>Now restart and you will see the status via: <code>systemctl status systemd-networkd.service</code></p>

<p>14. mlocate</p>

<figure class='code'><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
</pre></td><td class='code'><pre><code class=''><span class='line'>sudo pacman -S mlocate
</span><span class='line'>sudo updatedb
</span></code></pre></td></tr></table></div></figure>


<p>15. Whatpulse</p>

<figure class='code'><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
</pre></td><td class='code'><pre><code class=''><span class='line'>yaourt whatpulse
</span></code></pre></td></tr></table></div></figure>


<p>Be sure to download the setup script, eg, the source code package, and grant all of the priviledge to your username.</p>

<p>16. Vim Customization  <br/>
Copy the old .vimrc, and update it. Vundle will do everything for you.</p>

<p>17. Samba Configuration</p>

<figure class='code'><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
</pre></td><td class='code'><pre><code class=''><span class='line'>sudo pacman -S samba
</span></code></pre></td></tr></table></div></figure>


<p>Then configure the samba configure, the configuration file should be the same or modifed from the old one.</p>

<figure class='code'><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
<span class='line-number'>3</span>
<span class='line-number'>4</span>
<span class='line-number'>5</span>
</pre></td><td class='code'><pre><code class=''><span class='line'>$ sudo systemctl enable smbd.service
</span><span class='line'>$ sudo systemctl enable nmbd.service
</span><span class='line'>$ sudo systemctl start smbd.service
</span><span class='line'>$ sudo systemctl start nmbd.service
</span><span class='line'>$ sudo smbpasswd -a Trusty
</span></code></pre></td></tr></table></div></figure>


<p>Now in the guest machine you can use samba server for downloading.</p>

<p>18. Virtualbox Migration.  <br/>
Create new machines using the exisiting hard-disk.  <br/>
Then:</p>

<figure class='code'><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
</pre></td><td class='code'><pre><code class=''><span class='line'>modprobe vboxdrv
</span><span class='line'>modprobe vboxnetflt
</span></code></pre></td></tr></table></div></figure>


<p>Change the key for switching back to host system.  <br/>
File->Preference->Input->Virtual Machine-> Host Key Combination.</p>

<p>19. Network Indicator  <br/>
Install wicd via:</p>

<figure class='code'><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
<span class='line-number'>3</span>
</pre></td><td class='code'><pre><code class=''><span class='line'>$ sudo pacman -S wicd wicd-gtk
</span><span class='line'>$ sudo systemctl start wicd.service
</span><span class='line'>$ sudo systemctl enable wicd.service
</span></code></pre></td></tr></table></div></figure>


<p>Then enable it in the awesome or change view files.  <br/>
I enable it in rc.lua of awesome WM.</p>

<p>20.  unrar</p>

<figure class='code'><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
</pre></td><td class='code'><pre><code class=''><span class='line'>sudo pacman -S unrar 
</span></code></pre></td></tr></table></div></figure>


<p></p>

<p>21. Vrome Customization</p>

<figure class='code'><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
</pre></td><td class='code'><pre><code class=''><span class='line'>set useletters=0
</span></code></pre></td></tr></table></div></figure>


<p>22. Opera</p>

<figure class='code'><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
</pre></td><td class='code'><pre><code class=''><span class='line'>yaourt -S opera
</span></code></pre></td></tr></table></div></figure>


<p>23. Nautilus</p>

<figure class='code'><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
</pre></td><td class='code'><pre><code class=''><span class='line'>sudo pacman -S nautilus
</span></code></pre></td></tr></table></div></figure>


<p>24. xampp configuration  <br/>
Refer to 2014-04-23-deploy-xampp-on-archlinux.markdown</p>

<p>25. Firefox customization  <br/>
Install Vimperator.  <br/>
Install video download.</p>

<p>26. Nokia 525  <br/>
Install gmtp via yaourt:</p>

<figure class='code'><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
</pre></td><td class='code'><pre><code class=''><span class='line'>$ yaourt gmtp
</span></code></pre></td></tr></table></div></figure>


<p>27. Virtualbox Modules.   <br/>
Add following definitions:</p>

<figure class='code'><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
<span class='line-number'>3</span>
<span class='line-number'>4</span>
<span class='line-number'>5</span>
<span class='line-number'>6</span>
</pre></td><td class='code'><pre><code class=''><span class='line'>
</span><span class='line'>[root@TrustyArch modules-load.d]# cat virtualbox.conf 
</span><span class='line'>vboxdrv vboxnetflt vboxnetadp
</span><span class='line'>[root@TrustyArch modules-load.d]# pwd
</span><span class='line'>/etc/modules-load.d
</span><span class='line'>
</span></code></pre></td></tr></table></div></figure>


<p>28. Install qupzilla.</p>

<figure class='code'><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
</pre></td><td class='code'><pre><code class=''><span class='line'>sudo pacman -S qupzilla
</span></code></pre></td></tr></table></div></figure>


<p>29. Install gitbook.</p>

<figure class='code'><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
</pre></td><td class='code'><pre><code class=''><span class='line'>sudo npm install gitbook -g
</span></code></pre></td></tr></table></div></figure>


<p>30. Install calibre.</p>

<figure class='code'><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
</pre></td><td class='code'><pre><code class=''><span class='line'>sudo pacman -S calibre
</span></code></pre></td></tr></table></div></figure>


<p>31. Install tree.</p>

<figure class='code'><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
</pre></td><td class='code'><pre><code class=''><span class='line'>sudo pacman -S tree
</span></code></pre></td></tr></table></div></figure>


<p>32. gitbook-pdf  <br/>
First install phantomjs:</p>

<figure class='code'><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
</pre></td><td class='code'><pre><code class=''><span class='line'>yaourt -S phantomjs
</span></code></pre></td></tr></table></div></figure>


<p>Then :</p>

<figure class='code'><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
</pre></td><td class='code'><pre><code class=''><span class='line'>sudo npm install gitbook-pdf -g
</span></code></pre></td></tr></table></div></figure>


<p>Then generate book via:</p>

<figure class='code'><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
</pre></td><td class='code'><pre><code class=''><span class='line'>$ gitbook pdf ./my_repository
</span></code></pre></td></tr></table></div></figure>


<p>33. Auto logon
Auto login in tty1 at start-up:</p>

<figure class='code'><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
<span class='line-number'>3</span>
<span class='line-number'>4</span>
<span class='line-number'>5</span>
</pre></td><td class='code'><pre><code class=''><span class='line'>[Trusty@DashArch ~]$ sudo mkdir /etc/systemd/system/getty@tty1.service.d
</span><span class='line'>[Trusty@DashArch ~]$ cat /etc/systemd/system/getty\@tty1.service.d/autologin.conf 
</span><span class='line'>[Service]
</span><span class='line'>ExecStart=
</span><span class='line'>ExecStart=-/usr/bin/agetty --autologin Trusty --noclear %I 38400 linux
</span></code></pre></td></tr></table></div></figure>



</div>
  
  


    </article>
  
  
    <article>
      
  <header>
    
      <h1 class="entry-title"><a href="/blog/2014/07/30/zai-githubshang-bu-shu-ni-de-octopressbo-ke/">在github上部署你的octopress博客</a></h1>
    
    
      <p class="meta">
        




<time class='entry-date' datetime='2014-07-30T21:10:00+08:00'><span class='date'><span class='date-month'>Jul</span> <span class='date-day'>30</span><span class='date-suffix'>th</span>, <span class='date-year'>2014</span></span> <span class='time'>9:10 pm</span></time>
        
         | <a href="/blog/2014/07/30/zai-githubshang-bu-shu-ni-de-octopressbo-ke/#disqus_thread">Comments</a>
        
      </p>
    
  </header>


  <div class="entry-content"><p>环境: ArchLinux</p>

<h3>准备</h3>

<p>ArchLinux上安装git 和 ruby:</p>

<figure class='code'><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
</pre></td><td class='code'><pre><code class=''><span class='line'>$ sudo pacman -S git ruby 
</span></code></pre></td></tr></table></div></figure>


<p>安装rvm, 因为我用代理的缘故，所以使用了<code>-k --insecure</code> 选项，如果你的网络未收到任何阻挠，推荐你使用<code>curl -L https://get.rvm.io | bash -s stable --ruby</code>:</p>

<figure class='code'><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
</pre></td><td class='code'><pre><code class=''><span class='line'>$ echo insecure &gt;&gt; ~/.curlrc
</span><span class='line'>$ curl -k --insecure  -L https://get.rvm.io | bash -s stable --ruby
</span></code></pre></td></tr></table></div></figure>


<p>重新登录终端：</p>

<figure class='code'><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
<span class='line-number'>3</span>
<span class='line-number'>4</span>
<span class='line-number'>5</span>
<span class='line-number'>6</span>
<span class='line-number'>7</span>
</pre></td><td class='code'><pre><code class=''><span class='line'>[root@archi386 ~]# which rvm
</span><span class='line'>/usr/local/rvm/bin/rvm
</span><span class='line'>[root@archi386 ~]# rvm install 1.9.3
</span><span class='line'>[root@archi386 ~]# rvm use 1.9.3
</span><span class='line'>Using /usr/local/rvm/gems/ruby-1.9.3-p547
</span><span class='line'>[root@archi386 ~]# rvm rubygems latest
</span><span class='line'>Rubygems 2.2.2 already available in installed ruby, skipping installation, use --force to reinstall.
</span></code></pre></td></tr></table></div></figure>


<p>在上面的步骤后，你可以运行下列命令，确认自己的ruby版本是1.9.3</p>

<figure class='code'><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
</pre></td><td class='code'><pre><code class=''><span class='line'>[root@archi386 ~]# ruby --version
</span><span class='line'>ruby 1.9.3p547 (2014-05-14 revision 45962) [i686-linux]
</span></code></pre></td></tr></table></div></figure>


<p>在你定义的目录里, 安装Octopress:</p>

<figure class='code'><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
<span class='line-number'>3</span>
<span class='line-number'>4</span>
</pre></td><td class='code'><pre><code class=''><span class='line'>$ git clone git://github.com/imathis/octopress.git octopress
</span><span class='line'>$ cd octopress
</span><span class='line'>$ gem install bundler
</span><span class='line'>$ bundle install
</span></code></pre></td></tr></table></div></figure>


<p>接下来，安装默认的主题:</p>

<figure class='code'><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
</pre></td><td class='code'><pre><code class=''><span class='line'>rake install
</span></code></pre></td></tr></table></div></figure>


<p>补充：在ArchLinux上，需要更改Gemfile: 添加下面两行：</p>

<figure class='code'><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
</pre></td><td class='code'><pre><code class=''><span class='line'>  gem 'therubyracer'
</span><span class='line'>  gem 'execjs'
</span></code></pre></td></tr></table></div></figure>


<p>而后执行<code>bundle install</code>后方可运行<code>rake generate</code>.</p>

<h3>Github</h3>

<p>申请新的github帐号：  <br/>
到<a href="https://github.com/join">https://github.com/join</a>申请你的github帐号， 提供一个例子如下：   <br/>
<img src="/images/githubjoin.jpg" alt="/images/githubjoin.jpg" /></p>

<p>创建一个新的代码仓库:  <br/>
<img src="/images/createnew.jpg" alt="/images/createnew.jpg" />  <br/>
取名：  <br/>
<img src="/images/reponame.jpg" alt="/images/reponame.jpg" /></p>

<p>如果要使用github的托管网页服务，需要让你的邮箱通过验证。</p>

<h3>部署博客</h3>

<p>运行下列命令后，照着格式填写诸如'git@github.com:maofphn/maofphn.github.io.git`的地址。</p>

<figure class='code'><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
</pre></td><td class='code'><pre><code class=''><span class='line'>$ rake setup_github_pages
</span></code></pre></td></tr></table></div></figure>


<p>生成和部署博客:</p>

<figure class='code'><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
</pre></td><td class='code'><pre><code class=''><span class='line'>$ rake generate
</span><span class='line'>$ rake deploy
</span></code></pre></td></tr></table></div></figure>


<p>而后访问<a href="http://maofphn.github.io">http://maofphn.github.io</a>就可以看到生成的网站了。  <br/>
要写新博文，用下列命令:</p>

<figure class='code'><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
</pre></td><td class='code'><pre><code class=''><span class='line'>$ rake new_post["文章标题"]
</span></code></pre></td></tr></table></div></figure>


<p>生成的是markdown文件，所以你需要熟悉markdown语法，这里有个作弊手册:  <br/>
<a href="https://github.com/adam-p/markdown-here/wiki/Markdown-Cheatsheet">https://github.com/adam-p/markdown-here/wiki/Markdown-Cheatsheet</a></p>

<h3>Trouble Shooting</h3>

<p>In ubuntu, you need to intall <code>ruby-dev</code> first, then you could use <code>bundle install</code> for building the local repository.    <br/>
Or you will met:</p>

<figure class='code'><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
</pre></td><td class='code'><pre><code class=''><span class='line'>Error: failed to build gem native extension
</span></code></pre></td></tr></table></div></figure>


<p>If you met following error,</p>

<figure class='code'><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
</pre></td><td class='code'><pre><code class=''><span class='line'>YAML Exception reading index.markdown: invalid byte sequence in US-ASCII
</span></code></pre></td></tr></table></div></figure>


<p>Then you should do following:</p>

<figure class='code'><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
<span class='line-number'>3</span>
<span class='line-number'>4</span>
</pre></td><td class='code'><pre><code class=''><span class='line'># For using bundle
</span><span class='line'>export LANG=en_US.UTF-8
</span><span class='line'>export LANGUAGE=en_US.UTF-8
</span><span class='line'>export LC_ALL=en_US.UTF-8
</span></code></pre></td></tr></table></div></figure>

</div>
  
  


    </article>
  
  
    <article>
      
  <header>
    
      <h1 class="entry-title"><a href="/blog/2014/07/20/video-card-problem-on-archlinux/">Video Card Problem on ArchLinux</a></h1>
    
    
      <p class="meta">
        




<time class='entry-date' datetime='2014-07-20T10:52:00+08:00'><span class='date'><span class='date-month'>Jul</span> <span class='date-day'>20</span><span class='date-suffix'>th</span>, <span class='date-year'>2014</span></span> <span class='time'>10:52 am</span></time>
        
         | <a href="/blog/2014/07/20/video-card-problem-on-archlinux/#disqus_thread">Comments</a>
        
      </p>
    
  </header>


  <div class="entry-content"><p>The video card crash problem is caused by acceleration method chosen. My ArchLinux Installed on 2013.06.30, while at that time the default acceleration method is uxa, but now most of it uses sna. So if I choose sna instead of uxa, then problem will be solved.</p>

<figure class='code'><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
<span class='line-number'>3</span>
<span class='line-number'>4</span>
<span class='line-number'>5</span>
<span class='line-number'>6</span>
<span class='line-number'>7</span>
<span class='line-number'>8</span>
<span class='line-number'>9</span>
<span class='line-number'>10</span>
<span class='line-number'>11</span>
<span class='line-number'>12</span>
<span class='line-number'>13</span>
</pre></td><td class='code'><pre><code class=''><span class='line'>[Trusty@~]$ cat /var/log/Xorg.0.log | grep -i uxa
</span><span class='line'>[  7841.603] (**) intel(0): Option "AccelMethod" "uxa"
</span><span class='line'>[  7841.638] (II) UXA(0): Driver registered support for the following operations:
</span><span class='line'>[  7841.638] (II) intel(0): Use legacy UXA acceleration.
</span><span class='line'>[Trusty@~]$ vim at /etc/X11/xorg.conf.d/20-intel.conf
</span><span class='line'>2 files to edit
</span><span class='line'>[Trusty@~]$ sudo vim /etc/X11/xorg.conf.d/20-intel.conf
</span><span class='line'>[Trusty@~]$ cat /etc/X11/xorg.conf.d/20-intel.conf
</span><span class='line'>Section "Device"
</span><span class='line'>   Identifier  "Intel Graphics"
</span><span class='line'>   Driver      "intel"
</span><span class='line'>   Option      "AccelMethod"  "sna"
</span><span class='line'>EndSection
</span></code></pre></td></tr></table></div></figure>


<p>After Reboot, view the result. :</p>

<figure class='code'><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
<span class='line-number'>3</span>
<span class='line-number'>4</span>
</pre></td><td class='code'><pre><code class=''><span class='line'>[Trusty@~]$ cat /var/log/Xorg.0.log | grep -i sna
</span><span class='line'>[    73.402] (**) intel(0): Option "AccelMethod" "sna"
</span><span class='line'>[    73.532] (II) intel(0): SNA initialized with Sandybridge (gen6, gt2) backend
</span><span class='line'>[Trusty@~]$ cat /var/log/Xorg.0.log | grep -i uxa
</span></code></pre></td></tr></table></div></figure>


<p>Hope crash won&rsquo;t happen again.</p>
</div>
  
  


    </article>
  
  
    <article>
      
  <header>
    
      <h1 class="entry-title"><a href="/blog/2014/07/12/porting-weather-app-into-node-dot-js-3/">Porting Weather APP Into Node.js(3)</a></h1>
    
    
      <p class="meta">
        




<time class='entry-date' datetime='2014-07-12T16:19:00+08:00'><span class='date'><span class='date-month'>Jul</span> <span class='date-day'>12</span><span class='date-suffix'>th</span>, <span class='date-year'>2014</span></span> <span class='time'>4:19 pm</span></time>
        
         | <a href="/blog/2014/07/12/porting-weather-app-into-node-dot-js-3/#disqus_thread">Comments</a>
        
      </p>
    
  </header>


  <div class="entry-content"><h3>Get the timstamp of the record</h3>

<p>ObjectID could automatically store the insert timestamp, see following command:</p>

<figure class='code'><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
<span class='line-number'>3</span>
<span class='line-number'>4</span>
<span class='line-number'>5</span>
<span class='line-number'>6</span>
<span class='line-number'>7</span>
</pre></td><td class='code'><pre><code class=''><span class='line'>&gt; db.usercollection.find().pretty()
</span><span class='line'>........
</span><span class='line'>........
</span><span class='line'>&gt; ObjectId("53be4e7eb5ca215e38c5f651").getTimestamp()
</span><span class='line'>ISODate("2014-07-10T08:27:42Z")
</span><span class='line'>&gt; ObjectId("53be4e7cb5ca215e38c5f650").getTimestamp()
</span><span class='line'>ISODate("2014-07-10T08:27:40Z")
</span></code></pre></td></tr></table></div></figure>


<h3>Time Format</h3>

<p>Run following commands to get the timestamp since 1970:</p>

<figure class='code'><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
<span class='line-number'>3</span>
<span class='line-number'>4</span>
<span class='line-number'>5</span>
<span class='line-number'>6</span>
</pre></td><td class='code'><pre><code class=''><span class='line'>&gt; day=new Date()
</span><span class='line'>Sat Jul 12 2014 21:15:10 GMT+0800 (CST)
</span><span class='line'>&gt; day
</span><span class='line'>Sat Jul 12 2014 21:15:10 GMT+0800 (CST)
</span><span class='line'>&gt; day.getTime()
</span><span class='line'>1405170910049
</span></code></pre></td></tr></table></div></figure>


<p>The date which we fetched should be multiply 1000.  <br/>
And write a for loop for getting out the real date:</p>

<figure class='code'><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
<span class='line-number'>3</span>
<span class='line-number'>4</span>
<span class='line-number'>5</span>
<span class='line-number'>6</span>
<span class='line-number'>7</span>
<span class='line-number'>8</span>
<span class='line-number'>9</span>
<span class='line-number'>10</span>
<span class='line-number'>11</span>
<span class='line-number'>12</span>
</pre></td><td class='code'><pre><code class=''><span class='line'>  // helper function
</span><span class='line'>  function getDate(d) {
</span><span class='line'>      return new Date(d);
</span><span class='line'>  }
</span><span class='line'>  console.log("@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@");
</span><span class='line'>  // Refers to 1405170910049
</span><span class='line'>  // WhatWeGet 1405170047
</span><span class='line'>  // Should multiply 1000, Print out all of the timestamp
</span><span class='line'>  for ( kk = 1; kk &lt; 24; kk++)
</span><span class='line'>  {
</span><span class='line'>     console.log(getDate(date_data[kk]*1000));
</span><span class='line'>  }
</span></code></pre></td></tr></table></div></figure>


<p>Print the type of the variable:</p>

<figure class='code'><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
</pre></td><td class='code'><pre><code class=''><span class='line'>console.log(typeof (#{weatherlist[3].Temperature}));
</span></code></pre></td></tr></table></div></figure>



</div>
  
  


    </article>
  
  <div class="pagination">
    
      <a class="prev" href="/posts/22">&larr; Older</a>
    
    <a href="/blog/archives">Blog Archives</a>
    
    <a class="next" href="/posts/20">Newer &rarr;</a>
    
  </div>
</div>
<aside class="sidebar">
  
    <section>
  <h1>Recent Posts</h1>
  <ul id="recent_posts">
    
      <li class="post">
        <a href="/blog/2015/06/01/chef-for-deploying-openstack/">Chef for Deploying OpenStack</a>
      </li>
    
      <li class="post">
        <a href="/blog/2015/05/26/chef-setup/">Chef Setup</a>
      </li>
    
      <li class="post">
        <a href="/blog/2015/05/25/tips-on-deleteing-neutron-subnet-and-router/">Tips on Deleteing Neutron Subnet and Router</a>
      </li>
    
      <li class="post">
        <a href="/blog/2015/05/25/san-jie-dian-da-jian-openstack-juno-4/">三节点搭建OpenStack Juno(4)</a>
      </li>
    
      <li class="post">
        <a href="/blog/2015/05/25/san-jie-dian-da-jian-openstack-juno-3/">三节点搭建OpenStack Juno(3)</a>
      </li>
    
  </ul>
</section>





  
</aside>

    </div>
  </div>
  <footer role="contentinfo"><p>
  Copyright &copy; 2015 - Dash -
  <span class="credit">Powered by <a href="http://octopress.org">Octopress</a></span>
</p>

</footer>
  

<script type="text/javascript">
      var disqus_shortname = 'dashsagittariussglory';
      
        
        var disqus_script = 'count.js';
      
    (function () {
      var dsq = document.createElement('script'); dsq.type = 'text/javascript'; dsq.async = true;
      dsq.src = '//' + disqus_shortname + '.disqus.com/' + disqus_script;
      (document.getElementsByTagName('head')[0] || document.getElementsByTagName('body')[0]).appendChild(dsq);
    }());
</script>











</body>
</html>
