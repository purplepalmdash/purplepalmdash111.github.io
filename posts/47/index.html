
<!DOCTYPE html>
<!--[if IEMobile 7 ]><html class="no-js iem7"><![endif]-->
<!--[if lt IE 9]><html class="no-js lte-ie8"><![endif]-->
<!--[if (gt IE 8)|(gt IEMobile 7)|!(IEMobile)|!(IE)]><!--><html class="no-js" lang="en"><!--<![endif]-->
<head>
  <meta charset="utf-8">
  <title>Dash</title>
  <meta name="author" content="Dash">

  
  <meta name="description" content="Install snmpd 1
$ opkg update && opkg install snmpd The configuration file is /etc/config/snmpd, the configure file could be finetuned. while the &hellip;">
  

  <!-- http://t.co/dKP3o1e -->
  <meta name="HandheldFriendly" content="True">
  <meta name="MobileOptimized" content="320">
  <meta name="viewport" content="width=device-width, initial-scale=1">

  
  <link rel="canonical" href="http://purplepalmdash.github.io/posts/47">
  <link href="/favicon.ico" rel="icon">
  <link href="/stylesheets/screen.css" media="screen, projection" rel="stylesheet" type="text/css">
  <link href="/purplepalmdash/atom.xml" rel="alternate" title="Dash" type="application/atom+xml">
  <script src="/javascripts/modernizr-2.0.js"></script>
  <script src="//libs.useso.com/js/jquery/1.9.1/jquery.min.js"></script>
  <script>!window.jQuery && document.write(unescape('%3Cscript src="./javascripts/libs/jquery.min.js"%3E%3C/script%3E'))</script>
  <script src="/javascripts/octopress.js" type="text/javascript"></script>
  <!--Fonts from Google"s Web font directory at http://google.com/webfonts -->
<link href="//fonts.googleapis.com/css?family=PT+Serif:regular,italic,bold,bolditalic" rel="stylesheet" type="text/css">
<link href="//fonts.googleapis.com/css?family=PT+Sans:regular,italic,bold,bolditalic" rel="stylesheet" type="text/css">

  

</head>

<body    class="collapse-sidebar sidebar-footer" >
  <header role="banner"><hgroup>
  <h1><a href="/">Dash</a></h1>
  
    <h2>Get busy living, or get busy dying.</h2>
  
</hgroup>

</header>
  <nav role="navigation"><ul class="subscription" data-subscription="rss">
  <li><a href="/purplepalmdash/atom.xml" rel="subscribe-rss" title="subscribe via RSS">RSS</a></li>
  
</ul>
  
<form action="https://www.google.com/search" method="get">
  <fieldset role="search">
    <input type="hidden" name="q" value="site:purplepalmdash.github.io" />
    <input class="search" type="text" name="q" results="0" placeholder="Search"/>
  </fieldset>
</form>
  
<ul class="main-navigation">
  <li><a href="/">Blog</a></li>
  <li><a href="/blog/archives">Archives</a></li>
</ul>

</nav>
  <div id="main">
    <div id="content">
      <div class="blog-index">
  
  
  
    <article>
      
  <header>
    
      <h1 class="entry-title"><a href="/blog/2013/10/21/install-snmpd-in-openwrt/">Install SNMPD in OpenWRT</a></h1>
    
    
      <p class="meta">
        




<time class='entry-date' datetime='2013-10-21T14:36:00+08:00'><span class='date'><span class='date-month'>Oct</span> <span class='date-day'>21</span><span class='date-suffix'>st</span>, <span class='date-year'>2013</span></span> <span class='time'>2:36 pm</span></time>
        
         | <a href="/blog/2013/10/21/install-snmpd-in-openwrt/#disqus_thread">Comments</a>
        
      </p>
    
  </header>


  <div class="entry-content"><h3>Install snmpd</h3>

<figure class='code'><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
</pre></td><td class='code'><pre><code class=''><span class='line'>$ opkg update && opkg install snmpd</span></code></pre></td></tr></table></div></figure>


<p>The configuration file is /etc/config/snmpd, the configure file could be finetuned. while the file /etc/init.d/snmpd script will make snmpd program to load another cutom config    <br/>
snmpd is too big for embedded system, so we use mini-snmpd for openwrt.</p>

<h3>Install mini-snmpd</h3>

<figure class='code'><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
</pre></td><td class='code'><pre><code class=''><span class='line'>$ opkg update && opkg install mini-snmpd</span></code></pre></td></tr></table></div></figure>


<p>The configuration file is located at /etc/config/mini_snmpd, edit this file,for enable the default configration from option enable 0 to option enable 1, this will make mini_snmpd start for default.</p>

<h3>Use cacti Server Monitor to view the result</h3>

<p>In Ubuntu, type:</p>

<figure class='code'><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
</pre></td><td class='code'><pre><code class=''><span class='line'>$ apt-get install cacti cacti-spine</span></code></pre></td></tr></table></div></figure>


<p>After the installation, you should visiti <a href="http://Your_ip_address/cacti">http://Your_ip_address/cacti</a> for loging, the username and password are &ldquo;admin&rdquo; by default, but you will be asked to change it after the first login. <br/>
Go to &ldquo;Device&rdquo; click add at the right top, this will ask you to add an equipment for monitoring. <br/>
Fill in the ip address and select the type to &ldquo;Generic SNMP-enabled Host&rdquo;, then add some additional notes if necessary. <br/>
You can use following command to get the snmpd status:</p>

<figure class='code'><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
</pre></td><td class='code'><pre><code class=''><span class='line'>[Trusty@XXXyyy ~]$ snmpwalk -c public -v 2c 10.0.0.1:161</span></code></pre></td></tr></table></div></figure>



</div>
  
  


    </article>
  
  
    <article>
      
  <header>
    
      <h1 class="entry-title"><a href="/blog/2013/10/19/my-translator-in-archlinux-plus-awesome/">My Translator in ArchLinux+Awesome</a></h1>
    
    
      <p class="meta">
        




<time class='entry-date' datetime='2013-10-19T11:23:00+08:00'><span class='date'><span class='date-month'>Oct</span> <span class='date-day'>19</span><span class='date-suffix'>th</span>, <span class='date-year'>2013</span></span> <span class='time'>11:23 am</span></time>
        
         | <a href="/blog/2013/10/19/my-translator-in-archlinux-plus-awesome/#disqus_thread">Comments</a>
        
      </p>
    
  </header>


  <div class="entry-content"><h3>BackGround</h3>

<p>My requirement is quite simple:  I read many english content based website everyday, this means I always encounter many unkown words. My solution is use a translatio software or directly refer them in <a href="http://translate.google.com" title="translate.google.com">translate.google.com</a>. But all of these ways were time-consuming process: you have to switch to other software, or you have to open new tabs in your web brower. So do we have a more sufficient way for doing these steps? I used a whole morning of my saturday and finished this procedure.</p>

<h3>Preparation</h3>

<p>You have to install google translator for CLI in ArchLinux&rsquo;s yaourt, you can choose git version or standard version , I choose git version:</p>

<figure class='code'><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
</pre></td><td class='code'><pre><code class=''><span class='line'>$ yaourt -S google-translate-cli-git</span></code></pre></td></tr></table></div></figure>


<p>After the installation, you can refer to <a href="http://www.soimort.org/google-translate-cli/" title="http://www.soimort.org/google-translate-cli/">http://www.soimort.org/google-translate-cli/</a> for more detailed usage for this tool. For example:</p>

<figure class='code'><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
</pre></td><td class='code'><pre><code class=''><span class='line'>[Trusty@DashArch ~]$ trs {=zh} "Hello, world"
</span><span class='line'>你好，世界</span></code></pre></td></tr></table></div></figure>


<h3>Using Notification under awesome</h3>

<p>Yes we can use &ldquo;notify-send&rdquo; to directly display something on the screen, but notify-send is not convinient for us to control its behavior,</p>

<figure class='code'><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
</pre></td><td class='code'><pre><code class=''><span class='line'>notify-send $title $result --icon=dialog-information</span></code></pre></td></tr></table></div></figure>


<p>So we will use awesome&rsquo;s own notification module, name naughty. But first we have to add a new globle variable in rc.lua which under your own configuration directory, mine is under:</p>

<figure class='code'><figcaption><span>rc.lua -rc.lua </span></figcaption>
<div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
<span class='line-number'>3</span>
<span class='line-number'>4</span>
<span class='line-number'>5</span>
</pre></td><td class='code'><pre><code class='lua'><span class='line'><span class="p">[</span><span class="n">Trusty</span><span class="err">@</span><span class="n">DashArch</span> <span class="err">~</span><span class="p">]</span><span class="err">$</span> <span class="n">cat</span> <span class="o">/</span><span class="n">home</span><span class="o">/</span><span class="n">Trusty</span><span class="o">/</span><span class="p">.</span><span class="n">config</span><span class="o">/</span><span class="n">awesome</span><span class="o">/</span><span class="n">rc</span><span class="p">.</span><span class="n">lua</span> <span class="err">|</span> <span class="n">more</span>
</span><span class='line'><span class="c1">-- Standard awesome library</span>
</span><span class='line'><span class="c1">-- Notification library</span>
</span><span class='line'><span class="kd">local</span> <span class="n">naughty</span> <span class="o">=</span> <span class="nb">require</span><span class="p">(</span><span class="s2">&quot;</span><span class="s">naughty&quot;</span><span class="p">)</span>
</span><span class='line'><span class="n">naughty1</span> <span class="o">=</span> <span class="nb">require</span><span class="p">(</span><span class="s2">&quot;</span><span class="s">naughty&quot;</span><span class="p">)</span>
</span></code></pre></td></tr></table></div></figure>


<p>If we directly using rc.lua&rsquo;s local variable &ldquo;naughty&rdquo;,  awesome will complaint it cannot find the variable thus cannot display notification.<br/>
The method for displaying notification via naughty is as:
    echo &lsquo;naughty1.notify({title = &ldquo;testing&rdquo;, text = &ldquo;naughty&rdquo;})&rsquo; | awesome-client -
Notice naughty1 is the newly added variable in our configuration file.</p>

<h3>Our own bash script</h3>

<figure class='code'><figcaption><span>mytran.sh -mytrans.sh </span></figcaption>
<div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
<span class='line-number'>3</span>
<span class='line-number'>4</span>
<span class='line-number'>5</span>
<span class='line-number'>6</span>
<span class='line-number'>7</span>
<span class='line-number'>8</span>
<span class='line-number'>9</span>
<span class='line-number'>10</span>
<span class='line-number'>11</span>
<span class='line-number'>12</span>
<span class='line-number'>13</span>
<span class='line-number'>14</span>
<span class='line-number'>15</span>
<span class='line-number'>16</span>
<span class='line-number'>17</span>
</pre></td><td class='code'><pre><code class='sh'><span class='line'><span class="c">#!/bin/bash</span>
</span><span class='line'><span class="c"># check parameters</span>
</span><span class='line'><span class="nv">EXPECTED_ARGS</span><span class="o">=</span>1
</span><span class='line'><span class="k">if</span> <span class="o">[</span> <span class="nv">$# </span>-lt <span class="nv">$EXPECTED_ARGS</span> <span class="o">]</span>
</span><span class='line'><span class="k">then</span>
</span><span class='line'>  <span class="nb">echo</span> <span class="s2">&quot;Usage: `basename $0` Your_Tranlate_Word&quot;</span>
</span><span class='line'>  notify-send <span class="s2">&quot;null&quot;</span> <span class="s2">&quot;null&quot;</span> --icon<span class="o">=</span>dialog-information
</span><span class='line'>  <span class="nb">exit</span> -1
</span><span class='line'><span class="k">fi</span>
</span><span class='line'><span class="nv">title</span><span class="o">=</span><span class="nv">$@</span>
</span><span class='line'><span class="nb">declare</span> -a result1
</span><span class='line'><span class="nv">result1</span><span class="o">=</span><span class="sb">`</span>trs <span class="o">{=</span>zh<span class="o">}</span> <span class="s2">&quot;$@&quot;</span><span class="sb">`</span>
</span><span class='line'><span class="nv">result</span><span class="o">=</span><span class="s2">&quot;&quot;</span>
</span><span class='line'><span class="k">for</span> var in <span class="k">${</span><span class="nv">result1</span><span class="p">[@]</span><span class="k">}</span><span class="p">;</span><span class="k">do</span>
</span><span class='line'>  <span class="nv">result</span><span class="o">=</span><span class="nv">$result</span><span class="s1">&#39; &#39;</span><span class="nv">$var</span>
</span><span class='line'><span class="k">done</span>
</span><span class='line'><span class="nb">echo</span> <span class="s2">&quot;naughty1.notify({title = \&quot;$title\&quot;, text = \&quot;$result\&quot;, timeout = 5, height = 100, font = \&quot;Verdana 20\&quot;, bg = \&quot;BB68D9\&quot;, timeout=5})&quot;</span> <span class="p">|</span> awesome-client -
</span></code></pre></td></tr></table></div></figure>


<h3>Result</h3>

<p>The script is called via:<br/>
when you are browsing the webpage, if you encounter the words, simply press mod4+r, it will call the &lsquo;run&rsquo; window, input mytrans.sh &ldquo;Your words&rdquo; then you will get the notification window at the top right of your monitor. This window will last for 5 seconds, then vanished.  the image is like following:<br/>
<img src="/images/notify.jpg" title="notify picture" alt="/images/notify.jpg" /></p>

<p>Finally we can enjoy the non-blocking thinking reading now.</p>
</div>
  
  


    </article>
  
  
    <article>
      
  <header>
    
      <h1 class="entry-title"><a href="/blog/2013/10/17/wireless/">Wireless</a></h1>
    
    
      <p class="meta">
        




<time class='entry-date' datetime='2013-10-17T12:22:00+08:00'><span class='date'><span class='date-month'>Oct</span> <span class='date-day'>17</span><span class='date-suffix'>th</span>, <span class='date-year'>2013</span></span> <span class='time'>12:22 pm</span></time>
        
         | <a href="/blog/2013/10/17/wireless/#disqus_thread">Comments</a>
        
      </p>
    
  </header>


  <div class="entry-content"><p>iw dev will show the wireless device:</p>

<figure class='code'><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
<span class='line-number'>3</span>
<span class='line-number'>4</span>
<span class='line-number'>5</span>
<span class='line-number'>6</span>
<span class='line-number'>7</span>
</pre></td><td class='code'><pre><code class=''><span class='line'>[root@XXXyyy Trusty]# iw dev
</span><span class='line'>phy#0
</span><span class='line'>  Interface wlo1
</span><span class='line'>      ifindex 2
</span><span class='line'>      wdev 0x1
</span><span class='line'>      addr xx:xx:xx:xx:xx:xx
</span><span class='line'>      type managed</span></code></pre></td></tr></table></div></figure>


<p>Then use the deivce name got from last step, ip link set it up</p>

<figure class='code'><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
<span class='line-number'>3</span>
<span class='line-number'>4</span>
</pre></td><td class='code'><pre><code class=''><span class='line'>[root@XXXyyy Trusty]# ip link set wlo1 up
</span><span class='line'># Check the status:
</span><span class='line'>[root@XXXyyy Trusty]# iw dev wlo1 link
</span><span class='line'>Not connected.</span></code></pre></td></tr></table></div></figure>


<p>Scan the available wireless network:</p>

<figure class='code'><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
<span class='line-number'>3</span>
<span class='line-number'>4</span>
<span class='line-number'>5</span>
</pre></td><td class='code'><pre><code class=''><span class='line'>[root@XXXyyy Trusty]# iw dev wlo1 scan | more
</span><span class='line'>[root@XXXyyy Trusty]# iw dev wlo1 scan | grep SSID
</span><span class='line'>  SSID: WLAN14
</span><span class='line'>  SSID: VISITOR
</span><span class='line'>  .........</span></code></pre></td></tr></table></div></figure>


<p>Connect to the existing Wireless LAN:<br/>
Install the wpa_supplicant:</p>

<figure class='code'><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
<span class='line-number'>3</span>
<span class='line-number'>4</span>
<span class='line-number'>5</span>
<span class='line-number'>6</span>
<span class='line-number'>7</span>
<span class='line-number'>8</span>
<span class='line-number'>9</span>
<span class='line-number'>10</span>
<span class='line-number'>11</span>
<span class='line-number'>12</span>
<span class='line-number'>13</span>
<span class='line-number'>14</span>
<span class='line-number'>15</span>
<span class='line-number'>16</span>
<span class='line-number'>17</span>
<span class='line-number'>18</span>
<span class='line-number'>19</span>
<span class='line-number'>20</span>
<span class='line-number'>21</span>
<span class='line-number'>22</span>
<span class='line-number'>23</span>
<span class='line-number'>24</span>
<span class='line-number'>25</span>
<span class='line-number'>26</span>
<span class='line-number'>27</span>
<span class='line-number'>28</span>
<span class='line-number'>29</span>
<span class='line-number'>30</span>
<span class='line-number'>31</span>
</pre></td><td class='code'><pre><code class=''><span class='line'>$ pacman -S wpa_supplicant
</span><span class='line'>[root@XXXyyy Trusty]# touch /etc/wpa_supplicant.conf
</span><span class='line'>[root@XXXyyy Trusty]# wpa_supplicant -i wlo1 -c /etc/wpa_supplicant.conf
</span><span class='line'>Successfully initialized wpa_supplicant
</span><span class='line'>Generate the wpa_supplicant:
</span><span class='line'>[root@XXXyyy Trusty]# wpa_passphrase OpenWrt_11 XXXXXX &gt; /etc/wpa_supplicant/openwrt.conf
</span><span class='line'>[root@XXXyyy Trusty]# cat /etc/wpa_supplicant/openwrt.conf 
</span><span class='line'>network={
</span><span class='line'>  ssid="OpenWrt_11"
</span><span class='line'>  #psk="XXXXXX"
</span><span class='line'>  psk=xxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxx
</span><span class='line'>}
</span><span class='line'>[root@XXXyyy Trusty]# wpa_supplicant -i wlo1 -c /etc/wpa_supplicant/openwrt.conf 
</span><span class='line'>Successfully initialized wpa_supplicant
</span><span class='line'>wlo1: Trying to associate with xx:xx:xx:xx: (SSID='OpenWrt_11' freq=2462 MHz)
</span><span class='line'>ioctl[SIOCSIWFREQ]: Device or resource busy
</span><span class='line'>wlo1: Association request to the driver failed
</span><span class='line'>wlo1: Associated with xx:xx:xx:xx
</span><span class='line'>wlo1: WPA: Key negotiation completed with xx:xg:xx:xx:xx [PTK=CCMP GTK=TKIP]
</span><span class='line'>wlo1: CTRL-EVENT-CONNECTED - Connection to xx:xx:xx:xx:xx completed [id=0 id_str=]
</span><span class='line'>Get the Wireless address:
</span><span class='line'>$ [root@XXXyyy Trusty]# dhcpcd wlo1
</span><span class='line'>dhcpcd[3344]: version 6.0.5 starting
</span><span class='line'>dhcpcd[3344]: wlo1: soliciting an IPv6 router
</span><span class='line'>dhcpcd[3344]: wlo1: soliciting a DHCP lease
</span><span class='line'>dhcpcd[3344]: wlo1: offered 10.0.0.232 from 10.0.0.1
</span><span class='line'>dhcpcd[3344]: wlo1: leased 10.0.0.232 for 7200 seconds
</span><span class='line'>dhcpcd[3344]: wlo1: adding host route to 10.0.0.232 via 127.0.0.1
</span><span class='line'>dhcpcd[3344]: wlo1: adding route to 10.0.0.0/24
</span><span class='line'>dhcpcd[3344]: wlo1: adding default route via 10.0.0.1
</span><span class='line'>dhcpcd[3344]: forked to background, child pid 3434</span></code></pre></td></tr></table></div></figure>


<p>Now we can access the internet via Wireless!</p>
</div>
  
  


    </article>
  
  
    <article>
      
  <header>
    
      <h1 class="entry-title"><a href="/blog/2013/10/17/dvb-t-on-archlinux/">DVB-T on ArchLinux</a></h1>
    
    
      <p class="meta">
        




<time class='entry-date' datetime='2013-10-17T10:20:00+08:00'><span class='date'><span class='date-month'>Oct</span> <span class='date-day'>17</span><span class='date-suffix'>th</span>, <span class='date-year'>2013</span></span> <span class='time'>10:20 am</span></time>
        
         | <a href="/blog/2013/10/17/dvb-t-on-archlinux/#disqus_thread">Comments</a>
        
      </p>
    
  </header>


  <div class="entry-content"><p>First we have to get the description of the DVB-T USB stick, use lsusb will get the result of the inserted DVB Disk:</p>

<figure class='code'><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
<span class='line-number'>3</span>
<span class='line-number'>4</span>
<span class='line-number'>5</span>
<span class='line-number'>6</span>
<span class='line-number'>7</span>
<span class='line-number'>8</span>
<span class='line-number'>9</span>
<span class='line-number'>10</span>
<span class='line-number'>11</span>
<span class='line-number'>12</span>
<span class='line-number'>13</span>
<span class='line-number'>14</span>
<span class='line-number'>15</span>
<span class='line-number'>16</span>
</pre></td><td class='code'><pre><code class=''><span class='line'>$ lsusb
</span><span class='line'>Bus 002 Device 004: ID 0bda:2838 Realtek Semiconductor Corp. RTL2838 DVB-T
</span><span class='line'>Also we can check the demsg information to get the DVB-T stick information:  
</span><span class='line'>[44867.951615] usb 2-2: new high-speed USB device number 4 using xhci_hcd
</span><span class='line'>[44868.345834] usbcore: registered new interface driver dvb_usb_rtl28xxu
</span><span class='line'>[44868.345912] usb 2-2: dvb_usb_v2: found a 'Realtek RTL2832U reference design' in warm state
</span><span class='line'>[44868.416639] usb 2-2: dvb_usb_v2: will pass the complete MPEG2 transport stream to the software demuxer
</span><span class='line'>[44868.416662] DVB: registering new adapter (Realtek RTL2832U reference design)
</span><span class='line'>[44868.537249] usb 2-2: DVB: registering adapter 0 frontend 0 (Realtek RTL2832 (DVB-T))...
</span><span class='line'>[44868.543138] r820t 9-001a: creating new instance
</span><span class='line'>[44868.555987] r820t 9-001a: Rafael Micro r820t successfully identified
</span><span class='line'>[44868.563544] Registered IR keymap rc-empty
</span><span class='line'>[44868.563698] input: Realtek RTL2832U reference design as /devices/pci0000:00/0000:00:1c.7/0000:25:00.0/usb2/2-2/rc/rc0/input33
</span><span class='line'>[44868.563806] rc0: Realtek RTL2832U reference design as /devices/pci0000:00/0000:00:1c.7/0000:25:00.0/usb2/2-2/rc/rc0
</span><span class='line'>[44868.566081] usb 2-2: dvb_usb_v2: schedule remote query interval to 400 msecs
</span><span class='line'>[44868.581802] usb 2-2: dvb_usb_v2: 'Realtek RTL2832U reference design' successfully initialized and connected</span></code></pre></td></tr></table></div></figure>


<p>Now we can check whtether DVB-T stick works:</p>

<figure class='code'><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
<span class='line-number'>3</span>
<span class='line-number'>4</span>
</pre></td><td class='code'><pre><code class=''><span class='line'>[root@XXXyyy ~]# ls /dev/v4l
</span><span class='line'>by-id  by-path
</span><span class='line'>[root@XXXyyy ~]# ls /dev/dvb
</span><span class='line'>adapter0</span></code></pre></td></tr></table></div></figure>


<p>To get the first digital signal, we have to install linuxtv-dvb-apps</p>

<figure class='code'><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
</pre></td><td class='code'><pre><code class=''><span class='line'># pacman -S linuxtv-dvb-apps</span></code></pre></td></tr></table></div></figure>



</div>
  
  


    </article>
  
  
    <article>
      
  <header>
    
      <h1 class="entry-title"><a href="/blog/2013/10/15/wireless-in-archlinux/">OpenWRT on Mercury MW151RM3G</a></h1>
    
    
      <p class="meta">
        




<time class='entry-date' datetime='2013-10-15T19:07:00+08:00'><span class='date'><span class='date-month'>Oct</span> <span class='date-day'>15</span><span class='date-suffix'>th</span>, <span class='date-year'>2013</span></span> <span class='time'>7:07 pm</span></time>
        
         | <a href="/blog/2013/10/15/wireless-in-archlinux/#disqus_thread">Comments</a>
        
      </p>
    
  </header>


  <div class="entry-content"><p>1. Change Mercury MW151RM3G into TP-Link 703N. You have to download the firmware named &ldquo;MW151rm3G_to_wr703nv1&rdquo; from google searched result. After flashing this onto your Mercury MW151RM3G, In fact you have got a TP-LINK 703N.</p>

<p>2. Download the latest firmware of TP-LINK 703N from openwrt.org. The Download URL is located at <a href="http://wiki.openwrt.org/toh/tp-link/tl-wr703n" title="tl-wr703n">http://wiki.openwrt.org/toh/tp-link/tl-wr703n</a>. You can get two files, named &ldquo;squashfs-factory.bin&rdquo; and &ldquo;squashfs-sysupgrade.bin&rdquo;, the factory.bin is for flashing firstly, after flashed this image, flash another named sysupgrade.bin. This will lead your MW151RM3G into a OpenWRT based system.</p>

<p>3. Now you have to change the status of your MW151RM3G&rsquo;s ethernet port from static ip address into dhcp based address. Then plug it into the Wireless Router, you will found the OpenWRT&rsquo;s IP address from you router&rsquo;s connected equipments. Log on it, open the openssh server, log into the router.</p>

<p>4. Now we can boot the system using flash disk, because the inner image is too small for run applications.</p>

<p>5. Prepare the flash disk, format it into ext3 based partition.</p>

<p>6. Install the necessary package on OpenWRT:</p>

<figure class='code'><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
<span class='line-number'>3</span>
<span class='line-number'>4</span>
<span class='line-number'>5</span>
</pre></td><td class='code'><pre><code class=''><span class='line'>$ opkg update
</span><span class='line'>$ opkg install block-mount
</span><span class='line'>$ opkg install kmod-usb-storage 
</span><span class='line'>$ opkg install fdisk
</span><span class='line'>$ opkg install kmod-fs-ext4</span></code></pre></td></tr></table></div></figure>


<p>After the installation, you can mount the flash disk using mount, and your system shall support ext3 based partitions.</p>

<p>7. Edit the fstab file, /etc/config/fstab</p>

<figure class='code'><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
<span class='line-number'>3</span>
<span class='line-number'>4</span>
<span class='line-number'>5</span>
<span class='line-number'>6</span>
<span class='line-number'>7</span>
</pre></td><td class='code'><pre><code class=''><span class='line'>config mount
</span><span class='line'>        option target        /overlay
</span><span class='line'>        option device        /dev/sda1
</span><span class='line'>        option fstype        ext3
</span><span class='line'>        option options       rw,sync
</span><span class='line'>        option enabled       1
</span><span class='line'>        option enabled_fsck  0</span></code></pre></td></tr></table></div></figure>


<p>Now reboot your MW151RM3G, you will got an 8G based flash disk OpenWRT.</p>
</div>
  
  


    </article>
  
  
    <article>
      
  <header>
    
      <h1 class="entry-title"><a href="/blog/2013/10/14/using-snmp-for-administ-pogoplug/">Using SNMP for Administ PogoPlug</a></h1>
    
    
      <p class="meta">
        




<time class='entry-date' datetime='2013-10-14T07:49:00+08:00'><span class='date'><span class='date-month'>Oct</span> <span class='date-day'>14</span><span class='date-suffix'>th</span>, <span class='date-year'>2013</span></span> <span class='time'>7:49 am</span></time>
        
         | <a href="/blog/2013/10/14/using-snmp-for-administ-pogoplug/#disqus_thread">Comments</a>
        
      </p>
    
  </header>


  <div class="entry-content"><h3>Preparation</h3>

<p>For using SNMP for administrating PogoPlug, we have to install following packages first:</p>

<figure class='code'><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
</pre></td><td class='code'><pre><code class=''><span class='line'># apt-get install snmpd smartmontools super</span></code></pre></td></tr></table></div></figure>


<p>snmpd is the daemon process for snmp, smartmontools is the monitor tools for harddisk, super let you run daemon process in super priviledge.</p>

<h3>Configuration</h3>

<p>Configure snmp firstly.</p>

<h3>Client Configuration</h3>

<p>Install the webserver using the following command:</p>

<figure class='code'><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
</pre></td><td class='code'><pre><code class=''><span class='line'>$ pacman -S apache php php-apache mariadb</span></code></pre></td></tr></table></div></figure>


<p>After install the packages, if you want to change the configuration file, directly edit the /etc/httpd/conf/httpd.conf or extra/httpd-default.conf, then using systemd to restart the httpd daemon.<br/>
Change priviledge of the public_html directory:</p>

<figure class='code'><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
<span class='line-number'>3</span>
<span class='line-number'>4</span>
</pre></td><td class='code'><pre><code class=''><span class='line'>$ chmod o+x ~
</span><span class='line'>$ chmod o_x ~/public_html
</span><span class='line'># A more safe way for controlling the safety
</span><span class='line'># usermod -aG groupname http</span></code></pre></td></tr></table></div></figure>


<h3>SSL Configuration</h3>

<p>Generate a new self-signed certificate(key size and the number of days of validity will be customized):</p>

<figure class='code'><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
<span class='line-number'>3</span>
<span class='line-number'>4</span>
<span class='line-number'>5</span>
<span class='line-number'>6</span>
<span class='line-number'>7</span>
<span class='line-number'>8</span>
<span class='line-number'>9</span>
<span class='line-number'>10</span>
<span class='line-number'>11</span>
<span class='line-number'>12</span>
<span class='line-number'>13</span>
<span class='line-number'>14</span>
<span class='line-number'>15</span>
<span class='line-number'>16</span>
<span class='line-number'>17</span>
<span class='line-number'>18</span>
<span class='line-number'>19</span>
<span class='line-number'>20</span>
<span class='line-number'>21</span>
<span class='line-number'>22</span>
<span class='line-number'>23</span>
<span class='line-number'>24</span>
<span class='line-number'>25</span>
<span class='line-number'>26</span>
<span class='line-number'>27</span>
<span class='line-number'>28</span>
<span class='line-number'>29</span>
<span class='line-number'>30</span>
<span class='line-number'>31</span>
<span class='line-number'>32</span>
<span class='line-number'>33</span>
<span class='line-number'>34</span>
</pre></td><td class='code'><pre><code class=''><span class='line'># openssl genrsa -out server.key 2048
</span><span class='line'>Generating RSA private key, 2048 bit long modulus
</span><span class='line'>..........................+++
</span><span class='line'>...........................................................................................................................................................+++
</span><span class='line'>e is 65537 (0x10001)
</span><span class='line'>[root@XXXyyy conf]# ls
</span><span class='line'>extra  httpd.conf  magic  mime.types  server.key
</span><span class='line'>[root@XXXyyy conf]# chmod 600 server.key
</span><span class='line'>[root@XXXyyy conf]# openssl req -new -key server.key -out server.csr
</span><span class='line'>You are about to be asked to enter information that will be incorporated
</span><span class='line'>into your certificate request.
</span><span class='line'>What you are about to enter is what is called a Distinguished Name or a DN.
</span><span class='line'>There are quite a few fields but you can leave some blank
</span><span class='line'>For some fields there will be a default value,
</span><span class='line'>If you enter '.', the field will be left blank.
</span><span class='line'>-----
</span><span class='line'>Country Name (2 letter code) [AU]:
</span><span class='line'>State or Province Name (full name) [Some-State]:
</span><span class='line'>Locality Name (eg, city) []:
</span><span class='line'>Organization Name (eg, company) [Internet Widgits Pty Ltd]:
</span><span class='line'>Organizational Unit Name (eg, section) []:
</span><span class='line'>Common Name (e.g. server FQDN or YOUR name) []:
</span><span class='line'>Email Address []:
</span><span class='line'>
</span><span class='line'>Please enter the following 'extra' attributes
</span><span class='line'>to be sent with your certificate request
</span><span class='line'>A challenge password []:
</span><span class='line'>An optional company name []:
</span><span class='line'>[root@XXXyyy conf]# openssl x509 -req -days 365 -in server.csr -signkey server.key -out server.crt
</span><span class='line'>Signature ok
</span><span class='line'>subject=/C=AU/ST=Some-State/O=Internet Widgits Pty Ltd
</span><span class='line'>Getting Private key
</span><span class='line'>[root@XXXyyy conf]# ls
</span><span class='line'>extra  httpd.conf  magic  mime.types  server.crt  server.csr  server.key</span></code></pre></td></tr></table></div></figure>


<p>Then, uncomment the line containing following lines in /etc/httpd/conf/httpd.conf:</p>

<figure class='code'><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
</pre></td><td class='code'><pre><code class=''><span class='line'>Include conf/extra/httpd-ssl.conf
</span><span class='line'>Restart httpd to see the result. </span></code></pre></td></tr></table></div></figure>


<h3>Enable php</h3>

<p>Place Following line after LoadModule dir_module modules/mod_dir.so in /etc/httpd/conf/httpd.conf:</p>

<figure class='code'><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
<span class='line-number'>3</span>
<span class='line-number'>4</span>
<span class='line-number'>5</span>
<span class='line-number'>6</span>
<span class='line-number'>7</span>
<span class='line-number'>8</span>
<span class='line-number'>9</span>
<span class='line-number'>10</span>
<span class='line-number'>11</span>
<span class='line-number'>12</span>
</pre></td><td class='code'><pre><code class=''><span class='line'>LoadModule php5_module modules/libphp5.so
</span><span class='line'>Place following line at the end of the Include list:
</span><span class='line'>Include conf/extra/php5_module.conf
</span><span class='line'>Make sure you uncommented following line:
</span><span class='line'>TypesConfig conf/mime.types
</span><span class='line'># Optional uncomment:
</span><span class='line'>MIMEMagicFile conf/magic
</span><span class='line'>Add this line in /etc/httpd/conf/mime.types:
</span><span class='line'>application/x-httpd-php       php    php5
</span><span class='line'>Make sure libphp5.so is under /etc/httpd/modules, if not, you may forgot to install php-apache.  
</span><span class='line'>Test the php via following line under test.php:
</span><span class='line'>&lt;?php phpinfo(); ?&gt;</span></code></pre></td></tr></table></div></figure>


<h3>Configure MariaDB</h3>

<p>Uncomment at least one line under /etc/php/php.ini:</p>

<figure class='code'><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
<span class='line-number'>3</span>
</pre></td><td class='code'><pre><code class=''><span class='line'>extension=pdo_mysql.so
</span><span class='line'>extension=mysqli.so
</span><span class='line'>extension=mysql.so</span></code></pre></td></tr></table></div></figure>


<h3>Mysql Configuration</h3>

<figure class='code'><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
<span class='line-number'>3</span>
<span class='line-number'>4</span>
<span class='line-number'>5</span>
<span class='line-number'>6</span>
<span class='line-number'>7</span>
<span class='line-number'>8</span>
<span class='line-number'>9</span>
<span class='line-number'>10</span>
<span class='line-number'>11</span>
<span class='line-number'>12</span>
<span class='line-number'>13</span>
<span class='line-number'>14</span>
<span class='line-number'>15</span>
<span class='line-number'>16</span>
<span class='line-number'>17</span>
<span class='line-number'>18</span>
<span class='line-number'>19</span>
<span class='line-number'>20</span>
<span class='line-number'>21</span>
<span class='line-number'>22</span>
<span class='line-number'>23</span>
<span class='line-number'>24</span>
</pre></td><td class='code'><pre><code class=''><span class='line'>[root@XXXyyy http]# mysqld_safe --skip-grant-tables &
</span><span class='line'>[1] 26315
</span><span class='line'>[root@XXXyyy http]# 131014 16:55:07 mysqld_safe Logging to '/var/lib/mysql/XXXyyy.err'.
</span><span class='line'>131014 16:55:07 mysqld_safe Starting mysqld daemon with databases from /var/lib/mysql
</span><span class='line'>
</span><span class='line'>[root@XXXyyy http]# mysql -u root mysql
</span><span class='line'>Welcome to the MariaDB monitor.  Commands end with ; or \g.
</span><span class='line'>Your MariaDB connection id is 6
</span><span class='line'>Server version: 5.5.33a-MariaDB-log Source distribution
</span><span class='line'>
</span><span class='line'>Copyright (c) 2000, 2013, Oracle, Monty Program Ab and others.
</span><span class='line'>
</span><span class='line'>Type 'help;' or '\h' for help. Type '\c' to clear the current input statement.
</span><span class='line'>
</span><span class='line'>MariaDB [mysql]&gt; UPDATE mysql.user SET Password=PASSWORD('******') WHERE User='root';
</span><span class='line'>Query OK, 4 rows affected (0.00 sec)
</span><span class='line'>Rows matched: 4  Changed: 4  Warnings: 0
</span><span class='line'>
</span><span class='line'>MariaDB [mysql]&gt; FLUSH PRIVILEGES;
</span><span class='line'>Query OK, 0 rows affected (0.00 sec)
</span><span class='line'>
</span><span class='line'>MariaDB [mysql]&gt; exit
</span><span class='line'>Bye
</span><span class='line'>[root@XXXyyy http]# systemctl start mysqld</span></code></pre></td></tr></table></div></figure>


<h3>CACTI configuration</h3>

<p>Install cacti via:</p>

<figure class='code'><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
</pre></td><td class='code'><pre><code class=''><span class='line'>$ pacman -S cacti
</span><span class='line'>$ pacman -S php-snmp</span></code></pre></td></tr></table></div></figure>


<p>uncomment the following lines in /ec/php/php.ini:</p>

<figure class='code'><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
<span class='line-number'>3</span>
<span class='line-number'>4</span>
<span class='line-number'>5</span>
</pre></td><td class='code'><pre><code class=''><span class='line'>;extension=mysql.so
</span><span class='line'>;extension=sockets.so
</span><span class='line'>;extension=snmp.so
</span><span class='line'>open_basedir=...
</span><span class='line'>;date.timezone =</span></code></pre></td></tr></table></div></figure>


<p>Start mysqld:</p>

<figure class='code'><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
</pre></td><td class='code'><pre><code class=''><span class='line'>$ systemctl enable mysqld.service
</span><span class='line'>$ systemctl start mysqld.service</span></code></pre></td></tr></table></div></figure>


<p>Start snmpd:</p>

<figure class='code'><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
</pre></td><td class='code'><pre><code class=''><span class='line'>$ systemctl enable snmpd
</span><span class='line'>$ systemctl start snmpd</span></code></pre></td></tr></table></div></figure>


<p>Change the configuration file /etc/httpd/conf/httpd.conf, inside <Directory "/srv/http"> block, ensure you have:</p>

<figure class='code'><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
</pre></td><td class='code'><pre><code class=''><span class='line'>AllowOverride All</span></code></pre></td></tr></table></div></figure>


<p>Create the mysql based db:</p>

<figure class='code'><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
</pre></td><td class='code'><pre><code class=''><span class='line'>$ mysqladmin -u root -p create cacti
</span><span class='line'>Enter password: </span></code></pre></td></tr></table></div></figure>


<p>Generate the sql table using existing template:</p>

<figure class='code'><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
</pre></td><td class='code'><pre><code class=''><span class='line'>[root@XXXyyy http]# mysql -u root -p cacti &lt; /usr/share/webapps/cacti/cacti.sql
</span><span class='line'>Enter password: </span></code></pre></td></tr></table></div></figure>


<p>Update the configuration of the database, you can replace the password from &ldquo;some_password&rdquo; to your own password.</p>

<figure class='code'><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
<span class='line-number'>3</span>
<span class='line-number'>4</span>
<span class='line-number'>5</span>
<span class='line-number'>6</span>
<span class='line-number'>7</span>
<span class='line-number'>8</span>
<span class='line-number'>9</span>
<span class='line-number'>10</span>
<span class='line-number'>11</span>
<span class='line-number'>12</span>
<span class='line-number'>13</span>
<span class='line-number'>14</span>
<span class='line-number'>15</span>
<span class='line-number'>16</span>
<span class='line-number'>17</span>
<span class='line-number'>18</span>
</pre></td><td class='code'><pre><code class=''><span class='line'>[root@XXXyyy http]# mysql -u root -p
</span><span class='line'>Enter password: 
</span><span class='line'>Welcome to the MariaDB monitor.  Commands end with ; or \g.
</span><span class='line'>Your MariaDB connection id is 10
</span><span class='line'>Server version: 5.5.33a-MariaDB-log Source distribution
</span><span class='line'>
</span><span class='line'>Copyright (c) 2000, 2013, Oracle, Monty Program Ab and others.
</span><span class='line'>
</span><span class='line'>Type 'help;' or '\h' for help. Type '\c' to clear the current input statement.
</span><span class='line'>
</span><span class='line'>MariaDB [(none)]&gt; GRANT ALL ON cacti.* TO cacti@localhost IDENTIFIED BY 'some_password';
</span><span class='line'>Query OK, 0 rows affected (0.00 sec)
</span><span class='line'>
</span><span class='line'>MariaDB [(none)]&gt; FLUSH PRIVILEGES;
</span><span class='line'>Query OK, 0 rows affected (0.00 sec)
</span><span class='line'>
</span><span class='line'>MariaDB [(none)]&gt; exit
</span><span class='line'>Bye</span></code></pre></td></tr></table></div></figure>


<p>Change the username and password of the config.php of cacti:</p>

<figure class='code'><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
<span class='line-number'>3</span>
</pre></td><td class='code'><pre><code class=''><span class='line'>$ vim  /usr/share/webapps/cacti/include/config.php
</span><span class='line'>$ database_username = "cacti";
</span><span class='line'>$ database_password = "some_password";</span></code></pre></td></tr></table></div></figure>


<p>Clean up the cacti directory:</p>

<figure class='code'><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
<span class='line-number'>3</span>
</pre></td><td class='code'><pre><code class=''><span class='line'>chown -R http:http /usr/share/webapps/cacti/{rra,log}
</span><span class='line'>rm /usr/share/webapps/cacti/.htaccess
</span><span class='line'>chmod +x /usr/share/webapps/cacti/{cmd,poller}.php /usr/share/webapps/cacti/lib/ping.php</span></code></pre></td></tr></table></div></figure>


<p>Install caccti-spine, a fast poller for cacti, from AUR. Change the db name and db password to:</p>

<figure class='code'><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
<span class='line-number'>3</span>
</pre></td><td class='code'><pre><code class=''><span class='line'>$ vim /etc/spine.conf
</span><span class='line'>DB_User cacti
</span><span class='line'>DB_Pass some_password</span></code></pre></td></tr></table></div></figure>


<p>Restart crontab:</p>

<figure class='code'><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
</pre></td><td class='code'><pre><code class=''><span class='line'>$ systemctl restart cronie.service
</span><span class='line'>$ systemctl restart httpd</span></code></pre></td></tr></table></div></figure>



</div>
  
  


    </article>
  
  
    <article>
      
  <header>
    
      <h1 class="entry-title"><a href="/blog/2013/10/12/how-python-interact-with-raspberrypi-gpio/">How Python Interact With RaspberryPI GPIO</a></h1>
    
    
      <p class="meta">
        




<time class='entry-date' datetime='2013-10-12T10:06:00+08:00'><span class='date'><span class='date-month'>Oct</span> <span class='date-day'>12</span><span class='date-suffix'>th</span>, <span class='date-year'>2013</span></span> <span class='time'>10:06 am</span></time>
        
         | <a href="/blog/2013/10/12/how-python-interact-with-raspberrypi-gpio/#disqus_thread">Comments</a>
        
      </p>
    
  </header>


  <div class="entry-content"><p>Yesterday I use RaspberryPI to control the LED using its GPIO port.  with Python code we can directly &ldquo;talk&rdquo; to RaspberryPI, and set LED on and off. But what is the principle in it?  How to realize our own library(for example, python/perl/lua based library?), here I will dive into the python library code and find what&rsquo;s really inside the python code.</p>

<h3>Prepare the environment</h3>

<p>Install the RPi.GPIO via pip, $ pip install RPi,GPIO .  <br/>
After installed the GPIO library, we can insert help(&lsquo;modules&rsquo;) in python shell/prompt window to view all of the installed modules, we could found RPi in the list of the packages.</p>

<p>We can found the corresponding packages under the installation directory of python, so first you have to find the location of your python executable file, use &ldquo;which python&rdquo; to find the destination of the python.<br/>
For example, my RPi installed location is under: /home/Trusty/.virtualenvs/venv2/lib/python2.7/site-packages, not in the standard directory, because the python runs in the virtual environment.</p>

<h3>How to control the GPIO in UserSpace.</h3>

<p>Controlling GPIO in shell :</p>

<figure class='code'><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
<span class='line-number'>3</span>
<span class='line-number'>4</span>
<span class='line-number'>5</span>
<span class='line-number'>6</span>
<span class='line-number'>7</span>
<span class='line-number'>8</span>
<span class='line-number'>9</span>
<span class='line-number'>10</span>
<span class='line-number'>11</span>
<span class='line-number'>12</span>
<span class='line-number'>13</span>
<span class='line-number'>14</span>
<span class='line-number'>15</span>
</pre></td><td class='code'><pre><code class=''><span class='line'>root@rasp:~# echo 18 &gt; /sys/class/gpio/export 
</span><span class='line'>root@rasp:~# ls /sys/class/gpio/
</span><span class='line'>export  gpio18  gpiochip0  unexport
</span><span class='line'>root@rasp:~# echo "out" &gt; /sys/class/gpio/gpio18/direction 
</span><span class='line'>root@rasp:~# echo 1 &gt; /sys/class/gpio/gpio18/value 
</span><span class='line'>root@rasp:~# 
</span><span class='line'>root@rasp:~# echo 23 &gt; /sys/class/gpio/export 
</span><span class='line'>root@rasp:~# ls /sys/class/gpio/
</span><span class='line'>export  gpio18  gpio23  gpiochip0  unexport
</span><span class='line'>root@rasp:~# echo "out" &gt;/sys/class/gpio/gpio23/direction 
</span><span class='line'>root@rasp:~# echo 1&gt;/sys/class/gpio/gpio23/value 
</span><span class='line'>-bash: echo: write error: Invalid argument
</span><span class='line'>root@rasp:~# echo 1 &gt; /sys/class/gpio/gpio23/value 
</span><span class='line'>root@rasp:~# echo 0 &gt; /sys/class/gpio/gpio23/value 
</span><span class='line'>root@rasp:~# echo 0 &gt; /sys/class/gpio/gpio18/value </span></code></pre></td></tr></table></div></figure>


<p>So we can see, the standard procedure is: write exported gpio number to export file&ndash;> write direction to gpioXX&rsquo;s direction&ndash;> write value to the gpioxx&rsquo;s value. The python script wrapped the upper procedures, so we directly call them in python written scripts.</p>
</div>
  
  


    </article>
  
  
    <article>
      
  <header>
    
      <h1 class="entry-title"><a href="/blog/2013/10/11/xivelyru-men-1/">Xively入门(1)</a></h1>
    
    
      <p class="meta">
        




<time class='entry-date' datetime='2013-10-11T14:55:00+08:00'><span class='date'><span class='date-month'>Oct</span> <span class='date-day'>11</span><span class='date-suffix'>th</span>, <span class='date-year'>2013</span></span> <span class='time'>2:55 pm</span></time>
        
         | <a href="/blog/2013/10/11/xivelyru-men-1/#disqus_thread">Comments</a>
        
      </p>
    
  </header>


  <div class="entry-content"><h3>What is Xively?</h3>

<p>Xively Cloud Services™   <br/>
The world’s first IoT Public Cloud</p>

<h3>How to get start?</h3>

<p>Read tutorial and generate an API. <br/>
Then you can visit your own APP under: WEB TOOLS-> DEVELOP -> something.<br/>
Create a new Development Devices, named &ldquo;Raspberry Pi&rdquo;, xively will automatically generate the API Keys and the feed id for this developement device.</p>

<p>The key issue for using APIs is &ldquo;talk&rdquo; to the APIs and upload the data to the website.
<img src="images/xively.jpg" title="xively picture" alt="images/xively.jpg" /></p>
</div>
  
  


    </article>
  
  
    <article>
      
  <header>
    
      <h1 class="entry-title"><a href="/blog/2013/10/10/ruan/">软之妹纸</a></h1>
    
    
      <p class="meta">
        




<time class='entry-date' datetime='2013-10-10T20:05:00+08:00'><span class='date'><span class='date-month'>Oct</span> <span class='date-day'>10</span><span class='date-suffix'>th</span>, <span class='date-year'>2013</span></span> <span class='time'>8:05 pm</span></time>
        
         | <a href="/blog/2013/10/10/ruan/#disqus_thread">Comments</a>
        
      </p>
    
  </header>


  <div class="entry-content"><p>软之妹纸</p>

<p>从前有个软妹纸，她从小就立志要去寻找王纸，于是她骑着电动车出发了。
这天她来到一个国度，这个国度叫程序王国，这里的人个个都很悲伤，于是她问：“发生了什么让你们这么悲伤呢？”
人们告诉她：“我们的王纸被妖女抓走了，他是个帅哥，也很关心偶们，他被抓走后，我们都很伤心”
于是她去见老国王：“国王，我决定，去帮你救回王纸！”
白发苍苍的老国王，悲伤的抬起头：“软妹纸？靠你？我已经派了八队骑士去拯救王纸了，每次回来的都只有他们的马……”
“放心吧，国王，我一定救回王纸”</p>

<p>于是软妹纸上路了……</p>

<p>她开着电动车走了七七四十九天，终于接近了妖女的城堡。路过城堡需要经过一座很长的石桥，把守石桥的是一只很凶恶的吃人龙。石桥上摆着被龙吃掉的森森白骨和一大堆盔甲，看来这都是国王派去的骑士们留下来的。
“我要把你吃掉！！！！”
“那你试试看”软妹纸把电动车停好在桥头，双手叉腰站成个圆规仰着脖子看着龙
龙一张口，就把软妹纸吞到了肚子里。</p>

<p>故事就这么结束了吗？</p>

<p>木有！！！因为软妹纸是软的，软成什么程度呢，你们可以想象一下口香糖的嘛。她太不好消化了，龙被折腾的上窜下跳，终于受不了软妹纸的折磨，于是张开大口，放软妹纸出来了，并答应做软妹纸的坐骑。</p>

<p>于是软妹纸坐着龙飞过石桥到了城堡门口。她在城堡底下大声的喊“楼上有人吗？“
王纸从最高一层的房间里探出头来，原来她被妖女关在了最高一层，每天要帮妖女改论文。这个房间有999米高，也没有梯子上去。城堡被施了魔法，龙没法起飞。</p>

<p>软妹纸肿么上去呢？故事就这么结束了吗？</p>

<p>木有！！！
软妹纸冲着上面喊：“王纸，把你的网线拔了扔下来，我攀上去！“
然后王纸就把网线拔了仍了下来，软妹纸一路爬着上去了。</p>

<p>有个笨蛋说：王纸既然有网线，自己攀下来不就得了？&mdash;-亲，物理没学好对吧？王纸再苗条，体重也过了100了！知道啥叫百兆网线不！？就是能承受100斤载重的网线。俗话说，好女不过百，软妹纸就是这样一个“好女”。</p>

<p>天黑时候，妖女打完麻将回来了。她一进房间就恶狠狠的问“第四章改完了吗？我等着发表呢！“
“还没有，我的网线没有了，没法查资料！“
“那你就给老纸加班吧，晚上也不要吃饭了，赶紧写！“</p>

<p>“妖女，你太过分了，我要和你决斗！“软妹纸从窗帘后闪了出来
“你是谁？怎么上来的？“
“我叫软妹纸，网线没有，就是因为被我用来当攀爬绳了，放开那个王纸，他应该是自由的！“
“那好，尝尝我的三味白骨火吧，是人都熬不住的！“ 妖女话音刚落，口里就喷出三道火焰来，瞬间软妹纸就被烈焰包围了！</p>

<p>软妹纸死了吗？故事就那么结束了吗？</p>

<p>木有！！！木有！！！！！！
火烧了30分钟了，软妹纸笑语盈盈从火焰里走了出来。只用眼睛一闪，一道电光向妖女袭去，妖女惨叫一声，倒在地下。
“怎么可能？怎么可能？你居然一点事都没有？“妖女丧心病狂的叫喊着。
“没想到吧？我可是软妹纸哦!“
“在我临死前，告诉我为什么!?“
“好！”
软妹纸拿起自己的头发：
“你看，离子烫的，防辐射，防高温，它保护了我的头部”
软妹纸指向自己的鞋子：
“你看，UGG，加速效果20%，防高温防辐射防冰冻，你的烈焰一点用处都木有！”
软妹纸指着自己的袜子：
“你看，黑丝，有效隔热、防寒、兼美化效果！”
“至于胸部的保护，你没听过塑身内衣吗？当年黄蓉的软猬甲，也不过如此！！”</p>

<p>妖女大喊“我不相信，我不相信，至少，你的脸蛋还露在外面！！！还有手臂！”
软妹纸轻蔑的看着妖女：
“手臂？防晒霜啊亲！SPI30的哦！”
“脸蛋？ 你不晓得现在的软妹纸都打粉底的嘛！我早就料到你的三味白骨火了，特地打了两斤粉才来的！唇膏是炫彩的，直接反射了热量”
“最后告诉我，你是用什么招击败我的！？”
“无敌电眼&mdash;-你看，我有这个。”软妹纸掏出一个小瓶：“这是睫毛膏”软妹纸又掏出一个小盒子：“这是无敌美瞳”“再加上假睫毛，电压高达三万伏特，所以只放了一次电你就倒了，能死在我无敌电眼下，妖女，你可以瞑目了！”
妖女缓缓的闭上了双眼……</p>

<p>王纸自由了,他再也不用替妖女改文章了！！！
就这样，软妹纸拯救了会写程序的王纸，他们骑着喷火龙一起回到了程序王国，从此过着幸福安宁的日子。</p>
</div>
  
  


    </article>
  
  
    <article>
      
  <header>
    
      <h1 class="entry-title"><a href="/blog/2013/10/09/use-sublime-text-in-archlinux/">Use Sublime-text in ArchLinux</a></h1>
    
    
      <p class="meta">
        




<time class='entry-date' datetime='2013-10-09T19:11:00+08:00'><span class='date'><span class='date-month'>Oct</span> <span class='date-day'>9</span><span class='date-suffix'>th</span>, <span class='date-year'>2013</span></span> <span class='time'>7:11 pm</span></time>
        
         | <a href="/blog/2013/10/09/use-sublime-text-in-archlinux/#disqus_thread">Comments</a>
        
      </p>
    
  </header>


  <div class="entry-content"><p>1. Install Sublime-text in ArchLinux:</p>

<figure class='code'><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
</pre></td><td class='code'><pre><code class=''><span class='line'>$ pacman -S sublime-text</span></code></pre></td></tr></table></div></figure>


<p>2. Now we could install the package control from the <a href="https://sublime.wbond.net/installation">https://sublime.wbond.net/installation</a>.  <br/>
After installed the package control, sublime-text should be reboot for make package control to be used.</p>

<p>3. Install stino for Arduino development. You can refer to <a href="https://github.com/Robot-Will/Stino">https://github.com/Robot-Will/Stino</a>. <br/>
Beware that Preferences should be set to the corresponding directory, and because Arduino upload uses the ttyUSB device, you&rsquo;d better use Sublime under root priviledge(directly use root or use sudo subl).</p>

<p>4. To enable vim-like operation, you have to do the following steps:  <br/>
a. Under Preference&ndash;>Settings&ndash;>Default: Change the &ldquo;ignored_packages&rdquo;:[&ldquo;Vintage&rdquo;] into &ldquo;ingonored_packages&rdquo;:[]    <br/>
b. Under Preference&ndash;>Settings&ndash;>User, Change:</p>

<figure class='code'><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
<span class='line-number'>3</span>
<span class='line-number'>4</span>
<span class='line-number'>5</span>
<span class='line-number'>6</span>
</pre></td><td class='code'><pre><code class=''><span class='line'>{
</span><span class='line'>  "ignored_packages":
</span><span class='line'>  [
</span><span class='line'>      "Vintage"
</span><span class='line'>  ],
</span><span class='line'>}</span></code></pre></td></tr></table></div></figure>


<p>into</p>

<figure class='code'><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
<span class='line-number'>3</span>
<span class='line-number'>4</span>
<span class='line-number'>5</span>
<span class='line-number'>6</span>
<span class='line-number'>7</span>
<span class='line-number'>8</span>
</pre></td><td class='code'><pre><code class=''><span class='line'>{
</span><span class='line'>  "ignored_packages":
</span><span class='line'>  [
</span><span class='line'>      //"Vintage"
</span><span class='line'>  ],
</span><span class='line'>  "vintage_ctrl_keys": true,
</span><span class='line'>  "vintage_start_in_command_mode": true
</span><span class='line'>}</span></code></pre></td></tr></table></div></figure>


<p>5. Now you can enjoy your sublime, but beware that some vim-link items should be enhanced.</p>
</div>
  
  


    </article>
  
  <div class="pagination">
    
      <a class="prev" href="/posts/48">&larr; Older</a>
    
    <a href="/blog/archives">Blog Archives</a>
    
    <a class="next" href="/posts/46">Newer &rarr;</a>
    
  </div>
</div>
<aside class="sidebar">
  
    <section>
  <h1>Recent Posts</h1>
  <ul id="recent_posts">
    
      <li class="post">
        <a href="/blog/2015/07/13/wh-worktips-11/">WH Worktips(11)</a>
      </li>
    
      <li class="post">
        <a href="/blog/2015/07/12/wh-worktips-10/">WH Worktips(10)</a>
      </li>
    
      <li class="post">
        <a href="/blog/2015/07/10/wh-worktips-9/">WH Worktips(9)</a>
      </li>
    
      <li class="post">
        <a href="/blog/2015/07/09/wh-worktips-8/">WH Worktips(8)</a>
      </li>
    
      <li class="post">
        <a href="/blog/2015/07/07/wh-worktips-7/">WH Worktips(7)</a>
      </li>
    
  </ul>
</section>





  
</aside>

    </div>
  </div>
  <footer role="contentinfo"><p>
  Copyright &copy; 2015 - Dash -
  <span class="credit">Powered by <a href="http://octopress.org">Octopress</a></span>
</p>

</footer>
  

<script type="text/javascript">
      var disqus_shortname = 'dashsagittariussglory';
      
        
        var disqus_script = 'count.js';
      
    (function () {
      var dsq = document.createElement('script'); dsq.type = 'text/javascript'; dsq.async = true;
      dsq.src = '//' + disqus_shortname + '.disqus.com/' + disqus_script;
      (document.getElementsByTagName('head')[0] || document.getElementsByTagName('body')[0]).appendChild(dsq);
    }());
</script>











</body>
</html>
