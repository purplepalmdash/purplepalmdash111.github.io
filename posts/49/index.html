
<!DOCTYPE html>
<!--[if IEMobile 7 ]><html class="no-js iem7"><![endif]-->
<!--[if lt IE 9]><html class="no-js lte-ie8"><![endif]-->
<!--[if (gt IE 8)|(gt IEMobile 7)|!(IEMobile)|!(IE)]><!--><html class="no-js" lang="en"><!--<![endif]-->
<head>
  <meta charset="utf-8">
  <title>Dash</title>
  <meta name="author" content="Dash">

  
  <meta name="description" content="TroubleShooting on alsa Current user canot use alsamixer 1
2
Trusty@joggler:~$ alsamixer cannot open mixer: No such file or directory This is because &hellip;">
  

  <!-- http://t.co/dKP3o1e -->
  <meta name="HandheldFriendly" content="True">
  <meta name="MobileOptimized" content="320">
  <meta name="viewport" content="width=device-width, initial-scale=1">

  
  <link rel="canonical" href="http://purplepalmdash.github.io/posts/49">
  <link href="/favicon.ico" rel="icon">
  <link href="/stylesheets/screen.css" media="screen, projection" rel="stylesheet" type="text/css">
  <link href="/purplepalmdash/atom.xml" rel="alternate" title="Dash" type="application/atom+xml">
  <script src="/javascripts/modernizr-2.0.js"></script>
  <script src="//fonts.googleapis.com/js/jquery/1.9.1/jquery.min.js"></script>
  <script>!window.jQuery && document.write(unescape('%3Cscript src="./javascripts/libs/jquery.min.js"%3E%3C/script%3E'))</script>
  <script src="/javascripts/octopress.js" type="text/javascript"></script>
  <!--Fonts from Google"s Web font directory at http://google.com/webfonts -->
<link href="//fonts.googleapis.com/css?family=PT+Serif:regular,italic,bold,bolditalic" rel="stylesheet" type="text/css">
<link href="//fonts.googleapis.com/css?family=PT+Sans:regular,italic,bold,bolditalic" rel="stylesheet" type="text/css">

  

</head>

<body    class="collapse-sidebar sidebar-footer" >
  <header role="banner"><hgroup>
  <h1><a href="/">Dash</a></h1>
  
    <h2>Get busy living, or get busy dying.</h2>
  
</hgroup>

</header>
  <nav role="navigation"><ul class="subscription" data-subscription="rss">
  <li><a href="/purplepalmdash/atom.xml" rel="subscribe-rss" title="subscribe via RSS">RSS</a></li>
  
</ul>
  
<form action="https://www.google.com/search" method="get">
  <fieldset role="search">
    <input type="hidden" name="q" value="site:purplepalmdash.github.io" />
    <input class="search" type="text" name="q" results="0" placeholder="Search"/>
  </fieldset>
</form>
  
<ul class="main-navigation">
  <li><a href="/">Blog</a></li>
  <li><a href="/blog/archives">Archives</a></li>
</ul>

</nav>
  <div id="main">
    <div id="content">
      <div class="blog-index">
  
  
  
    <article>
      
  <header>
    
      <h1 class="entry-title"><a href="/blog/2013/12/18/enable-bluetooth-headset-on-joggler/">Enable Bluetooth Headset on Joggler</a></h1>
    
    
      <p class="meta">
        




<time class='entry-date' datetime='2013-12-18T17:08:00+08:00'><span class='date'><span class='date-month'>Dec</span> <span class='date-day'>18</span><span class='date-suffix'>th</span>, <span class='date-year'>2013</span></span> <span class='time'>5:08 pm</span></time>
        
         | <a href="/blog/2013/12/18/enable-bluetooth-headset-on-joggler/#disqus_thread">Comments</a>
        
      </p>
    
  </header>


  <div class="entry-content"><h3>TroubleShooting on alsa</h3>

<p>Current user canot use alsamixer</p>

<figure class='code'><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
</pre></td><td class='code'><pre><code class=''><span class='line'>Trusty@joggler:~$ alsamixer 
</span><span class='line'>cannot open mixer: No such file or directory
</span></code></pre></td></tr></table></div></figure>


<p>This is because the current user is not in the &ldquo;audio&rdquo; group, use root to add current user into &ldquo;audio&rdquo; group:</p>

<figure class='code'><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
</pre></td><td class='code'><pre><code class=''><span class='line'>root@joggler:~# usermod -a -G audio Trusty
</span></code></pre></td></tr></table></div></figure>


<p>Unmute the channel:</p>

<figure class='code'><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
<span class='line-number'>3</span>
<span class='line-number'>4</span>
<span class='line-number'>5</span>
<span class='line-number'>6</span>
<span class='line-number'>7</span>
<span class='line-number'>8</span>
</pre></td><td class='code'><pre><code class=''><span class='line'>$ amixer sset Master unmute
</span><span class='line'>Simple mixer control 'Master',0
</span><span class='line'>  Capabilities: pvolume pswitch penum
</span><span class='line'>  Playback channels: Front Left - Front Right
</span><span class='line'>  Limits: Playback 0 - 31
</span><span class='line'>  Mono:
</span><span class='line'>  Front Left: Playback 24 [77%] [-10.50dB] [on]
</span><span class='line'>  Front Right: Playback 24 [77%] [-10.50dB] [on]
</span></code></pre></td></tr></table></div></figure>


<p>Now we can use wired headset for listening music.</p>

<h3>Setup Bluetooth</h3>

<p>Scan the available equipments:</p>

<figure class='code'><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
<span class='line-number'>3</span>
<span class='line-number'>4</span>
<span class='line-number'>5</span>
<span class='line-number'>6</span>
</pre></td><td class='code'><pre><code class=''><span class='line'>Trusty@joggler:~$ hcitool scan
</span><span class='line'>Scanning ...
</span><span class='line'>  geougwoguw  geige   
</span><span class='line'>  geougwoguw  geige521
</span><span class='line'>  geougwoguw  geige   
</span><span class='line'>  geougwoguw  geige723
</span></code></pre></td></tr></table></div></figure>


<p>Repair:</p>

<figure class='code'><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
</pre></td><td class='code'><pre><code class=''><span class='line'>bluez-simple-agent hci0 dd:64:22:KK:FF:BD repair
</span></code></pre></td></tr></table></div></figure>


<p>Then edit your /etc/asound.conf file:</p>

<figure class='code'><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
<span class='line-number'>3</span>
<span class='line-number'>4</span>
<span class='line-number'>5</span>
<span class='line-number'>6</span>
<span class='line-number'>7</span>
<span class='line-number'>8</span>
<span class='line-number'>9</span>
<span class='line-number'>10</span>
<span class='line-number'>11</span>
<span class='line-number'>12</span>
<span class='line-number'>13</span>
<span class='line-number'>14</span>
<span class='line-number'>15</span>
<span class='line-number'>16</span>
<span class='line-number'>17</span>
<span class='line-number'>18</span>
<span class='line-number'>19</span>
</pre></td><td class='code'><pre><code class=''><span class='line'>#/etc/asound.conf
</span><span class='line'>
</span><span class='line'>pcm.btheadset {
</span><span class='line'>   type plug
</span><span class='line'>   slave {
</span><span class='line'>       pcm {
</span><span class='line'>           type bluetooth
</span><span class='line'>           device XX:XX:XX:XX:XX:XX 
</span><span class='line'>           profile "auto"
</span><span class='line'>       }   
</span><span class='line'>   }   
</span><span class='line'>   hint {
</span><span class='line'>       show on
</span><span class='line'>       description "BT Headset"
</span><span class='line'>   }   
</span><span class='line'>}
</span><span class='line'>ctl.btheadset {
</span><span class='line'>  type bluetooth
</span><span class='line'>}  
</span></code></pre></td></tr></table></div></figure>


<p>mplayer using bluetooth:</p>

<figure class='code'><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
</pre></td><td class='code'><pre><code class=''><span class='line'>mplayer -ao alsa:device=btheadset bad.mp3
</span></code></pre></td></tr></table></div></figure>


<h3>Set the default sound card to bluetooth</h3>

<p>Edit the .asoundrc file.</p>

<figure class='code'><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
<span class='line-number'>3</span>
<span class='line-number'>4</span>
<span class='line-number'>5</span>
<span class='line-number'>6</span>
<span class='line-number'>7</span>
<span class='line-number'>8</span>
<span class='line-number'>9</span>
<span class='line-number'>10</span>
<span class='line-number'>11</span>
<span class='line-number'>12</span>
<span class='line-number'>13</span>
<span class='line-number'>14</span>
<span class='line-number'>15</span>
<span class='line-number'>16</span>
<span class='line-number'>17</span>
<span class='line-number'>18</span>
<span class='line-number'>19</span>
<span class='line-number'>20</span>
</pre></td><td class='code'><pre><code class=''><span class='line'>Trusty@joggler:~$ cat .asoundrc    
</span><span class='line'>pcm.!default {
</span><span class='line'>   type plug
</span><span class='line'>   slave {
</span><span class='line'>       pcm {
</span><span class='line'>           type bluetooth
</span><span class='line'>           device dd:64:22:KK:FF:BD
</span><span class='line'>           profile "auto"
</span><span class='line'>       }   
</span><span class='line'>   }   
</span><span class='line'>   hint {
</span><span class='line'>       show on
</span><span class='line'>       description "BT Headset"
</span><span class='line'>   }   
</span><span class='line'>}
</span><span class='line'>##ctl.btheadset {
</span><span class='line'>##  type bluetooth
</span><span class='line'>##}
</span><span class='line'>
</span><span class='line'>bluez-simple-agent hci0 dd:64:22:KK:FF:BD repair
</span></code></pre></td></tr></table></div></figure>


<p>Then edit your /etc/asound.conf file:</p>

<figure class='code'><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
<span class='line-number'>3</span>
<span class='line-number'>4</span>
<span class='line-number'>5</span>
<span class='line-number'>6</span>
<span class='line-number'>7</span>
<span class='line-number'>8</span>
<span class='line-number'>9</span>
<span class='line-number'>10</span>
<span class='line-number'>11</span>
<span class='line-number'>12</span>
<span class='line-number'>13</span>
<span class='line-number'>14</span>
<span class='line-number'>15</span>
<span class='line-number'>16</span>
<span class='line-number'>17</span>
<span class='line-number'>18</span>
<span class='line-number'>19</span>
</pre></td><td class='code'><pre><code class=''><span class='line'>#/etc/asound.conf
</span><span class='line'>
</span><span class='line'>pcm.btheadset {
</span><span class='line'>   type plug
</span><span class='line'>   slave {
</span><span class='line'>       pcm {
</span><span class='line'>           type bluetooth
</span><span class='line'>           device XX:XX:XX:XX:XX:XX 
</span><span class='line'>           profile "auto"
</span><span class='line'>       }   
</span><span class='line'>   }   
</span><span class='line'>   hint {
</span><span class='line'>       show on
</span><span class='line'>       description "BT Headset"
</span><span class='line'>   }   
</span><span class='line'>}
</span><span class='line'>ctl.btheadset {
</span><span class='line'>  type bluetooth
</span><span class='line'>}  
</span></code></pre></td></tr></table></div></figure>


<p>mplayer using bluetooth:</p>

<figure class='code'><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
</pre></td><td class='code'><pre><code class=''><span class='line'>mplayer -ao alsa:device=btheadset bad.mp3
</span></code></pre></td></tr></table></div></figure>


<h3>Set the default sound card to bluetooth</h3>

<p>TBD, here I meet lots of problems.
Edit the .asoundrc file.</p>

<figure class='code'><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
<span class='line-number'>3</span>
<span class='line-number'>4</span>
</pre></td><td class='code'><pre><code class=''><span class='line'>
</span><span class='line'>
</span><span class='line'>apt-get autoremove pulseaudio
</span><span class='line'>pulseaudio --start
</span></code></pre></td></tr></table></div></figure>


<p>Why aplay -L and aplay -l will get different result? I have no idea.</p>
</div>
  
  


    </article>
  
  
    <article>
      
  <header>
    
      <h1 class="entry-title"><a href="/blog/2013/12/17/fastly-search-package-infos-in-archlinux/">Fastly Search Package Infos in ArchLinux</a></h1>
    
    
      <p class="meta">
        




<time class='entry-date' datetime='2013-12-17T14:14:00+08:00'><span class='date'><span class='date-month'>Dec</span> <span class='date-day'>17</span><span class='date-suffix'>th</span>, <span class='date-year'>2013</span></span> <span class='time'>2:14 pm</span></time>
        
         | <a href="/blog/2013/12/17/fastly-search-package-infos-in-archlinux/#disqus_thread">Comments</a>
        
      </p>
    
  </header>


  <div class="entry-content"><p>You can use pkgfile to view the metadata of the pacman files:</p>

<figure class='code'><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
<span class='line-number'>3</span>
</pre></td><td class='code'><pre><code class=''><span class='line'>pacman -Ss pkgfile
</span><span class='line'>extra/pkgfile 11-1 [installed]
</span><span class='line'>    a pacman .files metadata explorer
</span></code></pre></td></tr></table></div></figure>


<p>Usage:</p>

<figure class='code'><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
</pre></td><td class='code'><pre><code class=''><span class='line'>pkgfile ls
</span></code></pre></td></tr></table></div></figure>


<p>Then you will see &ldquo;ls&rdquo; belogns to which package.</p>
</div>
  
  


    </article>
  
  
    <article>
      
  <header>
    
      <h1 class="entry-title"><a href="/blog/2013/12/16/alsa-configuration-adding-bluetooth-headset/">Alsa Configuration(Adding Bluetooth Headset</a></h1>
    
    
      <p class="meta">
        




<time class='entry-date' datetime='2013-12-16T19:46:00+08:00'><span class='date'><span class='date-month'>Dec</span> <span class='date-day'>16</span><span class='date-suffix'>th</span>, <span class='date-year'>2013</span></span> <span class='time'>7:46 pm</span></time>
        
         | <a href="/blog/2013/12/16/alsa-configuration-adding-bluetooth-headset/#disqus_thread">Comments</a>
        
      </p>
    
  </header>


  <div class="entry-content"><p>After upgrading 3.12.5, my archlinux dropped its alsa configuration, also I bought a new bluetooth headset MW600, following is the steps for catching back the alsa sound, and let bluetooth headset working together with alsa.</p>

<h3>Fetching back sound</h3>

<p>Found out the hadware</p>

<figure class='code'><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
<span class='line-number'>3</span>
</pre></td><td class='code'><pre><code class=''><span class='line'>$ sudo alsactl init
</span><span class='line'>Found hardware: "HDA-Intel" "Intel CougarPoint HDMI" "HDA:111d7605,103c3587,00100105 HDA:11c11040,103c3066,00100200 HDA:80862805,80860101,00100000" "0x103c" "0x161c"
</span><span class='line'>Hardware is initialized using a generic method
</span></code></pre></td></tr></table></div></figure>


<p>The acl should be reset via:</p>

<figure class='code'><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
</pre></td><td class='code'><pre><code class=''><span class='line'>sudo setfacl -m u:Trusty:rw /dev/snd/*
</span></code></pre></td></tr></table></div></figure>



</div>
  
  


    </article>
  
  
    <article>
      
  <header>
    
      <h1 class="entry-title"><a href="/blog/2013/12/14/bluetooth-headset-in-archlinux/">Bluetooth Headset in ArchLinux</a></h1>
    
    
      <p class="meta">
        




<time class='entry-date' datetime='2013-12-14T13:57:00+08:00'><span class='date'><span class='date-month'>Dec</span> <span class='date-day'>14</span><span class='date-suffix'>th</span>, <span class='date-year'>2013</span></span> <span class='time'>1:57 pm</span></time>
        
         | <a href="/blog/2013/12/14/bluetooth-headset-in-archlinux/#disqus_thread">Comments</a>
        
      </p>
    
  </header>


  <div class="entry-content"><p>I have a Nokia bluetooth headset BH-105,and a bluetooth usb dongle. And I want to connect them together. Following are the steps.</p>

<h3>Software Preparation</h3>

<p>On ArchLinux, Install &ldquo;bluez&rdquo; and &ldquo;bluez-utils&rdquo;</p>

<figure class='code'><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
</pre></td><td class='code'><pre><code class=''><span class='line'>$ sudo pacman -S bluez bluez-utils
</span><span class='line'>$ sudo systemctl start bluetooth && sudo systemctl enable bluetooth
</span></code></pre></td></tr></table></div></figure>



</div>
  
  


    </article>
  
  
    <article>
      
  <header>
    
      <h1 class="entry-title"><a href="/blog/2013/12/14/deploy-your-octopress-website-on-heroku/">Deploy Your Octopress Website on Heroku</a></h1>
    
    
      <p class="meta">
        




<time class='entry-date' datetime='2013-12-14T09:48:00+08:00'><span class='date'><span class='date-month'>Dec</span> <span class='date-day'>14</span><span class='date-suffix'>th</span>, <span class='date-year'>2013</span></span> <span class='time'>9:48 am</span></time>
        
         | <a href="/blog/2013/12/14/deploy-your-octopress-website-on-heroku/#disqus_thread">Comments</a>
        
      </p>
    
  </header>


  <div class="entry-content"><p>I&rsquo;ve been using octopress for writing blogs for nearly half of a year. The website is hosted on my family computer, which is a arm-based machine, runs Debian Linux. But such machine can sometimes be powered off by accident. That&rsquo;s while I want to put my webpages onto a stable server. Most of the people put their website on github, but github may be banned in china, so I choose heroku, I think it may be much more safer.</p>

<h3>Preparation</h3>

<p>First you have to register the heroku, and then create a new App, you will got a pop-up window which contains following message:</p>

<figure class='code'><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
<span class='line-number'>3</span>
<span class='line-number'>4</span>
<span class='line-number'>5</span>
</pre></td><td class='code'><pre><code class=''><span class='line'>Your app, XXXX, has been Created.
</span><span class='line'>App URL:   http://XXXX.herokuapp.com/
</span><span class='line'>Git URL: git@heroku.com:XXXX.git
</span><span class='line'>Use the following code to set up your app for local development
</span><span class='line'>git clone git@heroku.com:XXXX.git -o heroku
</span></code></pre></td></tr></table></div></figure>


<p>You have to remember these messages, for later we will use them to upload our own website.</p>

<h3>Local Modification</h3>

<p>Clone your remote app to local directory</p>

<figure class='code'><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
</pre></td><td class='code'><pre><code class=''><span class='line'>git clone git@heroku.com:XXXX.git -o heroku
</span><span class='line'>cd heroku
</span></code></pre></td></tr></table></div></figure>


<p>Copy your existing octopress to local directory, be sure to remove the existing .git directory in your octopress directory.</p>

<figure class='code'><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
</pre></td><td class='code'><pre><code class=''><span class='line'>cp Source_Directory ./
</span></code></pre></td></tr></table></div></figure>


<p>Remove some files</p>

<figure class='code'><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
</pre></td><td class='code'><pre><code class=''><span class='line'>rm Gemfile.lock README.markdown CHANGELOG.markdown
</span></code></pre></td></tr></table></div></figure>


<p>Clear out the .slugignore file</p>

<figure class='code'><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
</pre></td><td class='code'><pre><code class=''><span class='line'>&gt;.slugignore
</span></code></pre></td></tr></table></div></figure>


<p>Update your gemfile:</p>

<figure class='code'><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
<span class='line-number'>3</span>
<span class='line-number'>4</span>
<span class='line-number'>5</span>
<span class='line-number'>6</span>
<span class='line-number'>7</span>
<span class='line-number'>8</span>
<span class='line-number'>9</span>
<span class='line-number'>10</span>
<span class='line-number'>11</span>
<span class='line-number'>12</span>
<span class='line-number'>13</span>
<span class='line-number'>14</span>
<span class='line-number'>15</span>
<span class='line-number'>16</span>
<span class='line-number'>17</span>
<span class='line-number'>18</span>
<span class='line-number'>19</span>
<span class='line-number'>20</span>
<span class='line-number'>21</span>
<span class='line-number'>22</span>
<span class='line-number'>23</span>
<span class='line-number'>24</span>
<span class='line-number'>25</span>
<span class='line-number'>26</span>
<span class='line-number'>27</span>
<span class='line-number'>28</span>
<span class='line-number'>29</span>
<span class='line-number'>30</span>
</pre></td><td class='code'><pre><code class=''><span class='line'>source "https://rubygems.org"
</span><span class='line'>
</span><span class='line'>group :development do
</span><span class='line'>  gem 'rake', '~&gt; 0.9'
</span><span class='line'>  gem 'jekyll', '~&gt; 0.12'
</span><span class='line'>  gem 'rdiscount', '~&gt; 1.6.8'
</span><span class='line'>  gem 'pygments.rb', '~&gt; 0.3.4'
</span><span class='line'>  gem 'RedCloth', '~&gt; 4.2.9'
</span><span class='line'>  gem 'haml', '~&gt; 3.1.7'
</span><span class='line'>  gem 'compass', '~&gt; 0.12.2'
</span><span class='line'>  gem 'sass', '~&gt; 3.2'
</span><span class='line'>  gem 'sass-globbing', '~&gt; 1.0.0'
</span><span class='line'>  gem 'rubypants', '~&gt; 0.2.0'
</span><span class='line'>  gem 'rb-fsevent', '~&gt; 0.9'
</span><span class='line'>  gem 'stringex', '~&gt; 1.4.0'
</span><span class='line'>  gem 'liquid', '~&gt; 2.3.0'
</span><span class='line'>  gem 'directory_watcher', '1.4.1'
</span><span class='line'>end
</span><span class='line'>gem 'rake', '~&gt; 0.9'
</span><span class='line'>gem 'jekyll', '~&gt; 0.12'
</span><span class='line'>gem 'rdiscount', '~&gt; 1.6.8'
</span><span class='line'>gem 'pygments.rb', '~&gt; 0.3.4'
</span><span class='line'>gem 'RedCloth', '~&gt; 4.2.9'
</span><span class='line'>gem 'haml', '~&gt; 3.1.7'
</span><span class='line'>gem 'compass', '~&gt; 0.12.2'
</span><span class='line'>gem 'sass-globbing', '~&gt; 1.0.0'
</span><span class='line'>gem 'rubypants', '~&gt; 0.2.0'
</span><span class='line'>gem 'stringex', '~&gt; 1.4.0'
</span><span class='line'>gem 'liquid', '~&gt; 2.3.0'
</span><span class='line'>gem 'sinatra', '~&gt; 1.4.2'
</span></code></pre></td></tr></table></div></figure>


<p>Since we use the rdiscount version is 1.6.8, when generate pages, this will cause failure, we also have to update one line in &ldquo;_config.yml&rdquo;:</p>

<figure class='code'><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
<span class='line-number'>3</span>
<span class='line-number'>4</span>
<span class='line-number'>5</span>
<span class='line-number'>6</span>
</pre></td><td class='code'><pre><code class=''><span class='line'>markdown: rdiscount
</span><span class='line'>rdiscount:
</span><span class='line'>  extensions:
</span><span class='line'>    - autolink
</span><span class='line'>      #- footnotes
</span><span class='line'>    - smart
</span></code></pre></td></tr></table></div></figure>


<h3>Setup</h3>

<p>Install the dependencies:</p>

<figure class='code'><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
</pre></td><td class='code'><pre><code class=''><span class='line'>bundle install
</span></code></pre></td></tr></table></div></figure>


<p>Also you want to notice the rvm information, for example I use 1.9.3 for octopress, then my configuration is listed as:</p>

<figure class='code'><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
<span class='line-number'>3</span>
<span class='line-number'>4</span>
</pre></td><td class='code'><pre><code class=''><span class='line'>$ cat .rvmrc
</span><span class='line'>rvm use 1.9.3
</span><span class='line'>$ cat ~/.bashrc | grep rvm
</span><span class='line'>PATH=$PATH:$HOME/.rvm/bin # Add RVM to PATH for scripting
</span></code></pre></td></tr></table></div></figure>


<h3>Testing</h3>

<p>Generate the website:</p>

<figure class='code'><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
</pre></td><td class='code'><pre><code class=''><span class='line'>rake generate
</span></code></pre></td></tr></table></div></figure>


<p>Preview the website:</p>

<figure class='code'><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
</pre></td><td class='code'><pre><code class=''><span class='line'>rake preview
</span></code></pre></td></tr></table></div></figure>


<p>Open <a href="http://127.0.0.1:4000">http://127.0.0.1:4000</a> to view the preview result.</p>

<h3>Deploy</h3>

<p>Add all of the files in current directory to git</p>

<figure class='code'><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
</pre></td><td class='code'><pre><code class=''><span class='line'>git add .
</span></code></pre></td></tr></table></div></figure>


<p>Commit all of the changes:</p>

<figure class='code'><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
</pre></td><td class='code'><pre><code class=''><span class='line'>git commit -m 'site initialized'
</span></code></pre></td></tr></table></div></figure>


<p>Push your changes to heroku</p>

<figure class='code'><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
</pre></td><td class='code'><pre><code class=''><span class='line'>git push heroku master
</span></code></pre></td></tr></table></div></figure>


<p>View your website:</p>

<figure class='code'><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
</pre></td><td class='code'><pre><code class=''><span class='line'>heroku open
</span></code></pre></td></tr></table></div></figure>


<h3>Ignore some tmp files</h3>

<p>Create a .gitignore file under the current directory</p>

<figure class='code'><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
<span class='line-number'>3</span>
<span class='line-number'>4</span>
<span class='line-number'>5</span>
<span class='line-number'>6</span>
<span class='line-number'>7</span>
<span class='line-number'>8</span>
<span class='line-number'>9</span>
<span class='line-number'>10</span>
<span class='line-number'>11</span>
<span class='line-number'>12</span>
<span class='line-number'>13</span>
<span class='line-number'>14</span>
</pre></td><td class='code'><pre><code class=''><span class='line'>.bundle
</span><span class='line'>.DS_Store
</span><span class='line'>.sass-cache
</span><span class='line'>.gist-cache
</span><span class='line'>.pygments-cache
</span><span class='line'>_deploy
</span><span class='line'>public
</span><span class='line'>sass.old
</span><span class='line'>source.old
</span><span class='line'>source/_stash
</span><span class='line'>source/stylesheets/screen.css
</span><span class='line'>vendor
</span><span class='line'>node_modules
</span><span class='line'>*~
</span></code></pre></td></tr></table></div></figure>


<p>Update the cache via:</p>

<figure class='code'><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
<span class='line-number'>3</span>
</pre></td><td class='code'><pre><code class=''><span class='line'>git rm -r --cached .
</span><span class='line'>git add .
</span><span class='line'>git commit -m "fixed untracked files"
</span></code></pre></td></tr></table></div></figure>


<p>Push again:</p>

<figure class='code'><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
</pre></td><td class='code'><pre><code class=''><span class='line'>git push heroku master
</span></code></pre></td></tr></table></div></figure>


<p>Unfortunately, the .gitignore couldn&rsquo;t remove public, so the final file only contains:</p>

<figure class='code'><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
</pre></td><td class='code'><pre><code class=''><span class='line'>*~
</span></code></pre></td></tr></table></div></figure>


<h3>Future Modification</h3>

<p>Add new blogs:</p>

<figure class='code'><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
</pre></td><td class='code'><pre><code class=''><span class='line'>rake new_post["Your_Article_Name"]
</span></code></pre></td></tr></table></div></figure>


<p>Generate locally:</p>

<figure class='code'><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
</pre></td><td class='code'><pre><code class=''><span class='line'>rake generate 
</span></code></pre></td></tr></table></div></figure>


<p>Add changes:</p>

<figure class='code'><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
</pre></td><td class='code'><pre><code class=''><span class='line'>git commit -a 
</span></code></pre></td></tr></table></div></figure>


<p>Push to heroku:</p>

<figure class='code'><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
</pre></td><td class='code'><pre><code class=''><span class='line'>git push heroku master
</span></code></pre></td></tr></table></div></figure>


<p>Now you have a stable and swift website on heroku, enjoy it.</p>

<h3>Modify theme</h3>

<figure class='code'><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
<span class='line-number'>3</span>
</pre></td><td class='code'><pre><code class=''><span class='line'>git clone git://github.com/lucaslew/whitespace .themes/Whitespace
</span><span class='line'>rake install['Whitespace']
</span><span class='line'>rake generate
</span></code></pre></td></tr></table></div></figure>


<p>More themes could be found at <a href="https://github.com/imathis/octopress/wiki/3rd-Party-Octopress-Themes">https://github.com/imathis/octopress/wiki/3rd-Party-Octopress-Themes</a>.   <br/>
You can preview these themes at <a href="http://opthemes.com/">http://opthemes.com/</a>.</p>

<h3>Change Colorscheme</h3>

<p>Since our theme locates under the .themes/Whitespace folder, simply change the following files:</p>

<figure class='code'><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
<span class='line-number'>3</span>
<span class='line-number'>4</span>
<span class='line-number'>5</span>
</pre></td><td class='code'><pre><code class=''><span class='line'>$ pwd
</span><span class='line'>/home/Trusty/code/octo/heroku/Tomcat/.themes/Whitespace/sass/base
</span><span class='line'>[Trusty@~/code/octo/heroku/Tomcat/.themes/Whitespace/sass/base]$ cat _solarized.scss
</span><span class='line'>//$solarized: dark !default;
</span><span class='line'>$solarized: light !default;
</span></code></pre></td></tr></table></div></figure>


<p>Now your blog should have the light theme of solarized.</p>
</div>
  
  


    </article>
  
  
    <article>
      
  <header>
    
      <h1 class="entry-title"><a href="/blog/2013/12/13/ssh-with-no-password-for-github/">Ssh With No Password for Github</a></h1>
    
    
      <p class="meta">
        




<time class='entry-date' datetime='2013-12-13T17:07:00+08:00'><span class='date'><span class='date-month'>Dec</span> <span class='date-day'>13</span><span class='date-suffix'>th</span>, <span class='date-year'>2013</span></span> <span class='time'>5:07 pm</span></time>
        
         | <a href="/blog/2013/12/13/ssh-with-no-password-for-github/#disqus_thread">Comments</a>
        
      </p>
    
  </header>


  <div class="entry-content"><h3>Github Account Setting</h3>

<p>Steps for settingup in your github accounting:  <br/>
Go to your Settings.   <br/>
Click &ldquo;SSH Keys&rdquo; in the left sidebar  <br/>
Click &ldquo;Add SSH key&rdquo;   <br/>
Paste your key into the &ldquo;Key&rdquo; field   <br/>
Click &ldquo;Add key&rdquo;   <br/>
Confirm the action by entering your GitHub password</p>

<p>The public key could be got via:</p>

<figure class='code'><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
</pre></td><td class='code'><pre><code class=''><span class='line'>$ xclip -sel clip &lt; ~/.ssh/id_rsa.pub
</span></code></pre></td></tr></table></div></figure>


<p>Then see if you were authorized by github:</p>

<figure class='code'><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
</pre></td><td class='code'><pre><code class=''><span class='line'>[Trusty@XXXyyy debian_octopress]$ ssh -T git@github.com
</span><span class='line'>Hi geogueo! You've successfully authenticated, but GitHub does not provide shell access.
</span></code></pre></td></tr></table></div></figure>


<h3>Setting for repository</h3>

<p>Add the remote url for local repository</p>

<figure class='code'><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
</pre></td><td class='code'><pre><code class=''><span class='line'>[Trusty@XXXyyy debian_octopress]$ git remote set-url origin git@github.com:geogueo/debian_octopress.git
</span></code></pre></td></tr></table></div></figure>


<p>Now you can use the following command for swiftly commit your code</p>

<figure class='code'><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
<span class='line-number'>3</span>
<span class='line-number'>4</span>
</pre></td><td class='code'><pre><code class=''><span class='line'>[Trusty@XXXyyy debian_octopress]$ unset SSH_ASKPASS
</span><span class='line'>[Trusty@XXXyyy debian_octopress]$ git push origin master
</span><span class='line'>Warning: Permanently added the RSA host key for IP address '192.30.252.129' to the list of known hosts.
</span><span class='line'>Everything up-to-date
</span></code></pre></td></tr></table></div></figure>

</div>
  
  


    </article>
  
  
    <article>
      
  <header>
    
      <h1 class="entry-title"><a href="/blog/2013/12/13/write-blogger-in-linux/">Write Blogger in Linux</a></h1>
    
    
      <p class="meta">
        




<time class='entry-date' datetime='2013-12-13T14:52:00+08:00'><span class='date'><span class='date-month'>Dec</span> <span class='date-day'>13</span><span class='date-suffix'>th</span>, <span class='date-year'>2013</span></span> <span class='time'>2:52 pm</span></time>
        
         | <a href="/blog/2013/12/13/write-blogger-in-linux/#disqus_thread">Comments</a>
        
      </p>
    
  </header>


  <div class="entry-content"><h3>blogtk</h3>

<p>Install it via &ldquo;yaourt -S blogtk&rdquo;</p>
</div>
  
  


    </article>
  
  
    <article>
      
  <header>
    
      <h1 class="entry-title"><a href="/blog/2013/12/12/western-digits-green-disk-on-ubuntu/">Western Digital Green Disk on Ubuntu</a></h1>
    
    
      <p class="meta">
        




<time class='entry-date' datetime='2013-12-12T18:55:00+08:00'><span class='date'><span class='date-month'>Dec</span> <span class='date-day'>12</span><span class='date-suffix'>th</span>, <span class='date-year'>2013</span></span> <span class='time'>6:55 pm</span></time>
        
         | <a href="/blog/2013/12/12/western-digits-green-disk-on-ubuntu/#disqus_thread">Comments</a>
        
      </p>
    
  </header>


  <div class="entry-content"><p>The WD20EARS (and other sizes include 1.0 and 1.5 TB driver in the series) will attempt to park the read heads once every 8 seconds FOR THE LIFE OF THE HDD which is just horrible! To see if you are affected use the smartctl command (part of smartmontools). If the last column changes rapidly, this section applies to your drive.</p>

<figure class='code'><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
</pre></td><td class='code'><pre><code class=''><span class='line'># smartctl /dev/sdb -a | grep Load_Cycle
</span><span class='line'>193 Load_Cycle_Count        0x0032   001   001   000    Old_age   Always       -       597115 
</span></code></pre></td></tr></table></div></figure>


<p>We have to disable this feature. Add lines to /etc/rc.local</p>

<figure class='code'><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
</pre></td><td class='code'><pre><code class=''><span class='line'>hdparam -S 242 /dev/sda
</span><span class='line'>exit 0
</span></code></pre></td></tr></table></div></figure>


<p>The effect for upper comand is listed as:</p>

<figure class='code'><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
<span class='line-number'>3</span>
</pre></td><td class='code'><pre><code class=''><span class='line'># hdparm -S 242 /dev/sda
</span><span class='line'>/dev/sda:
</span><span class='line'> setting standby to 242 (1 hours)
</span></code></pre></td></tr></table></div></figure>


<p>By default the disk will standby when 1 hours reached, that will avoid our disk from broken.</p>
</div>
  
  


    </article>
  
  
    <article>
      
  <header>
    
      <h1 class="entry-title"><a href="/blog/2013/12/12/kali-linux-in-qemu/">KALI Linux in Qemu</a></h1>
    
    
      <p class="meta">
        




<time class='entry-date' datetime='2013-12-12T17:32:00+08:00'><span class='date'><span class='date-month'>Dec</span> <span class='date-day'>12</span><span class='date-suffix'>th</span>, <span class='date-year'>2013</span></span> <span class='time'>5:32 pm</span></time>
        
         | <a href="/blog/2013/12/12/kali-linux-in-qemu/#disqus_thread">Comments</a>
        
      </p>
    
  </header>


  <div class="entry-content"><p>Download the iso from kali website<a href="http://www.kali.org/downloads/">http://www.kali.org/downloads/</a>:</p>

<figure class='code'><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
</pre></td><td class='code'><pre><code class=''><span class='line'>$ wget http://cdimage.kali.org/kali-images/kali-1.0.5/kali-linux-1.0.5-i386.iso
</span></code></pre></td></tr></table></div></figure>


<p>Create qemu img file:</p>

<figure class='code'><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
<span class='line-number'>3</span>
<span class='line-number'>4</span>
</pre></td><td class='code'><pre><code class=''><span class='line'>$ qemu-img create -f qcow2 kali.qcow2 30G
</span><span class='line'>Formatting 'kali.qcow2', fmt=qcow2 size=32212254720 encryption=off cluster_size=65536 lazy_refcounts=off 
</span><span class='line'>Run installation. Here we use the run-qemu script which has been generated before under the same directory:
</span><span class='line'>[Trusty@DashArch kali]$ ./run-qemu -hda ./kali.qcow2 -boot d -cdrom /media/nfs/iso/kali-linux-1.0.5-i386.iso  -m 1024 -enable-kvm -usb
</span></code></pre></td></tr></table></div></figure>


<p>Choose &ldquo;Graphic Install&rdquo; because currently we are not familiar with this brand new distribution.   <br/>
Command for startup the sytem is:</p>

<figure class='code'><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
</pre></td><td class='code'><pre><code class=''><span class='line'>[Trusty@DashArch kali]$ ./run-qemu -hda ./kali.qcow2 -boot d -cdrom /media/nfs/iso/kali-linux-1.0.5-i386.iso  -m 1024 -enable-kvm -usb
</span></code></pre></td></tr></table></div></figure>


<p>After installation finished, run &ldquo;sudo apt-get update&rdquo; and &ldquo;sudo apt-get upgrade&rdquo; to update your system to the newest version.</p>
</div>
  
  


    </article>
  
  
    <article>
      
  <header>
    
      <h1 class="entry-title"><a href="/blog/2013/12/12/ntp-in-lan-based-on-openwrt/">NTP in LAN Based on OPENWRT</a></h1>
    
    
      <p class="meta">
        




<time class='entry-date' datetime='2013-12-12T14:13:00+08:00'><span class='date'><span class='date-month'>Dec</span> <span class='date-day'>12</span><span class='date-suffix'>th</span>, <span class='date-year'>2013</span></span> <span class='time'>2:13 pm</span></time>
        
         | <a href="/blog/2013/12/12/ntp-in-lan-based-on-openwrt/#disqus_thread">Comments</a>
        
      </p>
    
  </header>


  <div class="entry-content"><h3>Package Installation</h3>

<p>Disable the system default ntp server and install ntpd, this ntpd is the real ntpd package, not busybox-ntpd</p>

<figure class='code'><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
<span class='line-number'>3</span>
<span class='line-number'>4</span>
<span class='line-number'>5</span>
<span class='line-number'>6</span>
</pre></td><td class='code'><pre><code class=''><span class='line'>opkg update
</span><span class='line'>opkg install ntpd
</span><span class='line'>/etc/init.d/sysntpd disable
</span><span class='line'>/etc/init.d/ntpd enable
</span><span class='line'>/etc/init.d/ntpd start
</span><span class='line'>netstat -l | grep ntp
</span></code></pre></td></tr></table></div></figure>


<p>The client installation, on debian:</p>

<figure class='code'><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
</pre></td><td class='code'><pre><code class=''><span class='line'>apt-get install ntp
</span></code></pre></td></tr></table></div></figure>


<h3>Server Configuration</h3>

<p>Comment all of the possible reference server, use local time source.</p>

<figure class='code'><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
<span class='line-number'>3</span>
<span class='line-number'>4</span>
<span class='line-number'>5</span>
<span class='line-number'>6</span>
<span class='line-number'>7</span>
<span class='line-number'>8</span>
<span class='line-number'>9</span>
<span class='line-number'>10</span>
<span class='line-number'>11</span>
<span class='line-number'>12</span>
<span class='line-number'>13</span>
<span class='line-number'>14</span>
</pre></td><td class='code'><pre><code class=''><span class='line'>root@OpenWrt:~# cat /etc/ntp.conf 
</span><span class='line'># use a random selection of 4 public stratum 2 servers
</span><span class='line'># see http://twiki.ntp.org/bin/view/Servers/NTPPoolServers
</span><span class='line'>
</span><span class='line'>restrict default nomodify notrap noquery
</span><span class='line'>#restrict default noquery
</span><span class='line'>
</span><span class='line'>#restrict 127.0.0.1
</span><span class='line'>restrict 10.0.0.0 mask 255.255.255.0 nomodify notrap
</span><span class='line'>
</span><span class='line'>server 127.127.1.0    # LOCAL CLOCK
</span><span class='line'>fudge 127.127.1.0 stratum 0
</span><span class='line'>
</span><span class='line'>driftfile  /var/lib/ntp/ntp.drift
</span></code></pre></td></tr></table></div></figure>


<p>Then restart the service. Your ntp server is available.</p>

<h3>Client Configuration</h3>

<p>Enable saned to enable ntp client on beaglebone:</p>

<figure class='code'><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
<span class='line-number'>3</span>
<span class='line-number'>4</span>
<span class='line-number'>5</span>
</pre></td><td class='code'><pre><code class=''><span class='line'># error message
</span><span class='line'>[....] Starting NTP server: ntpdsaned disabled; edit /etc/default/saned
</span><span class='line'>vim /etc/default/saned 
</span><span class='line'># Set to yes to start saned
</span><span class='line'>RUN=yes
</span></code></pre></td></tr></table></div></figure>


<p>Then we have to enable the ntp client&rsquo;s configuration:   <br/>
For Client manually synchornize</p>

<figure class='code'><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
<span class='line-number'>3</span>
<span class='line-number'>4</span>
<span class='line-number'>5</span>
<span class='line-number'>6</span>
<span class='line-number'>7</span>
<span class='line-number'>8</span>
<span class='line-number'>9</span>
<span class='line-number'>10</span>
<span class='line-number'>11</span>
<span class='line-number'>12</span>
</pre></td><td class='code'><pre><code class=''><span class='line'>root@arm:~# ntpdate 10.0.0.1
</span><span class='line'> 1 Jan 05:18:55 ntpdate[2243]: the NTP socket is in use, exiting
</span><span class='line'>root@arm:~# ps -ef | grep ntp
</span><span class='line'>ntp       1805     1  0 04:30 ?        00:00:00 /usr/sbin/ntpd -p /var/run/ntpd.pid -g -u 107:112
</span><span class='line'>root      2245  2127  0 05:19 pts/0    00:00:00 grep ntp
</span><span class='line'>root@arm:~# kill 1805
</span><span class='line'>root@arm:~# date
</span><span class='line'>Sat Jan  1 05:19:05 UTC 2000
</span><span class='line'>root@arm:~# ntpdate 10.0.0.1
</span><span class='line'>12 Dec 07:38:44 ntpdate[2247]: step time server 10.0.0.1 offset 440129967.397166 sec
</span><span class='line'>root@arm:~# date
</span><span class='line'>Thu Dec 12 07:38:46 UTC 2013
</span></code></pre></td></tr></table></div></figure>


<p>The client configuration for ntp, remove all of the possible server, use LAN server:</p>

<figure class='code'><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
</pre></td><td class='code'><pre><code class=''><span class='line'>server 10.0.0.1
</span></code></pre></td></tr></table></div></figure>


<p>tzselect will set the timezone of the equipment. The result is:</p>

<figure class='code'><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
</pre></td><td class='code'><pre><code class=''><span class='line'>TZ='Asia/Shanghai'; export TZ
</span></code></pre></td></tr></table></div></figure>


<p>Add it into the ~/.profile, then your time will be adjusted to Shanghai Time.</p>

<h3>Update time via http</h3>

<p>Since I located in UMT+8, I will use following commands for sync the time</p>

<figure class='code'><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
</pre></td><td class='code'><pre><code class=''><span class='line'>date $(wget -O - "http://www.timeapi.org/utc/in+eight+hours" 2&gt;/dev/null | sed s/[-T:+]/\ /g | awk '{print $2,$3,$4,$5,".",$6}' | tr -d " " )
</span></code></pre></td></tr></table></div></figure>


<p>Then add it to crontab</p>

<figure class='code'><figcaption><span>time.sh</span></figcaption><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
<span class='line-number'>3</span>
<span class='line-number'>4</span>
<span class='line-number'>5</span>
</pre></td><td class='code'><pre><code class='sh'><span class='line'>root@OpenWrt:~# cat /bin/time.sh
</span><span class='line'><span class="c">#!/bin/sh</span>
</span><span class='line'><span class="c">#echo $http_proxy</span>
</span><span class='line'><span class="c">#echo $https_proxy</span>
</span><span class='line'>date <span class="k">$(</span>wget -O - <span class="s2">&quot;http://www.timeapi.org/utc/in+eight+hours&quot;</span> 2&gt;/dev/null <span class="p">|</span> sed s/<span class="o">[</span>-T:+<span class="o">]</span>/<span class="se">\ </span>/g <span class="p">|</span> awk <span class="s1">&#39;{print $2,$3,$4,$5,&quot;.&quot;,$6}&#39;</span> <span class="p">|</span> tr -d <span class="s2">&quot; &quot;</span> <span class="k">)</span>
</span></code></pre></td></tr></table></div></figure>


<p>The crontab -e should like following:</p>

<figure class='code'><figcaption><span>time.sh</span></figcaption><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
</pre></td><td class='code'><pre><code class='sh'><span class='line'>* */3 * * * /bin/time.sh
</span></code></pre></td></tr></table></div></figure>


<p>This means every 3 hours the script will be called for synchronizing the time.   <br/>
Now we can enjoy the precise time from the internet and make it availale for the service on LAN.</p>
</div>
  
  


    </article>
  
  <div class="pagination">
    
      <a class="prev" href="/posts/50">&larr; Older</a>
    
    <a href="/blog/archives">Blog Archives</a>
    
    <a class="next" href="/posts/48">Newer &rarr;</a>
    
  </div>
</div>
<aside class="sidebar">
  
    <section>
  <h1>Recent Posts</h1>
  <ul id="recent_posts">
    
      <li class="post">
        <a href="/blog/2016/03/10/pei-zhi-qemude-vdewang-luo/">QemuVDE</a>
      </li>
    
      <li class="post">
        <a href="/blog/2016/03/07/tips-on-v-usb-and-arduino-5/">Tips on V-USB and Arduino(5)</a>
      </li>
    
      <li class="post">
        <a href="/blog/2016/03/07/tips-on-v-usb-and-arduino-4/">Tips on V-USB and Arduino(4)</a>
      </li>
    
      <li class="post">
        <a href="/blog/2016/03/05/ba-wan-ebuddy-3/">ebuddy(3)</a>
      </li>
    
      <li class="post">
        <a href="/blog/2016/03/03/ba-wan-ebuddy-2/">ebuddy(2)</a>
      </li>
    
  </ul>
</section>





  
</aside>

    </div>
  </div>
  <footer role="contentinfo"><p>
  Copyright &copy; 2016 - Dash -
  <span class="credit">Powered by <a href="http://octopress.org">Octopress</a></span>
</p>

</footer>
  

<script type="text/javascript">
      var disqus_shortname = 'dashsagittariussglory';
      
        
        var disqus_script = 'count.js';
      
    (function () {
      var dsq = document.createElement('script'); dsq.type = 'text/javascript'; dsq.async = true;
      dsq.src = '//' + disqus_shortname + '.disqus.com/' + disqus_script;
      (document.getElementsByTagName('head')[0] || document.getElementsByTagName('body')[0]).appendChild(dsq);
    }());
</script>











</body>
</html>
