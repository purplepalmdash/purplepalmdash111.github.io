<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml" xml:lang="en" lang="en-us">
<head>
	<meta name="generator" content="Hugo 0.17-DEV" />
  <link href="http://gmpg.org/xfn/11" rel="profile">
  <meta http-equiv="content-type" content="text/html; charset=utf-8">
  
  <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1">

  <title>Dash &middot; Dash</title>

  
  <link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.5/css/bootstrap-theme.min.css">
  <link rel="stylesheet" href="http://purplepalmdash.github.io/css/poole.css?ref=abc124">
  <link rel="stylesheet" href="http://purplepalmdash.github.io/css/hyde.css?ref=abc124">
  <link rel="stylesheet" href="http://purplepalmdash.github.io/css/poole-overrides.css?ref=abc124">
  <link rel="stylesheet" href="http://purplepalmdash.github.io/css/hyde-overrides.css?ref=abc124">
  <link rel="stylesheet" href="http://purplepalmdash.github.io/css/hyde-a.css?ref=abc124">
  <link rel="stylesheet" href="http://purplepalmdash.github.io/css/custom-additions.css?ref=abc124">
  <link rel="stylesheet" href="http://purplepalmdash.github.io/css/highlight/googlecode.css">
  <link rel="stylesheet" href="https://fonts.googleapis.com/css?family=PT+Sans:400,400italic,700|Abril+Fatface">
  <link rel="stylesheet" href="//maxcdn.bootstrapcdn.com/font-awesome/4.3.0/css/font-awesome.min.css">

  
  <link rel="apple-touch-icon-precomposed" sizes="144x144" href="http://purplepalmdash.github.io/touch-icon-144-precomposed.png?ref=abc124">
  <link href="http://purplepalmdash.github.io/favicon.png?ref=abc124" rel="icon">

  
  
  
  <link href="http://purplepalmdash.github.io/index.xml" rel="alternate" type="application/rss+xml" title="Dash &middot; Dash" />

  <meta name="description" content="Get busy living, or get busy dying.">
  <meta name="keywords" content="unix,virtualization,embedded,linux">
  <link rel="author" href="http://plus.google.com/106572959364703833986">
  
  <script>
      (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
      (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
      m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
      })(window,document,'script','//www.google-analytics.com/analytics.js','ga');

      ga('create', 'UA-42175003-1', 'auto');
      ga('send', 'pageview');
  </script>

</head>
<body class="theme-base-0c">
<div class="sidebar">
  <div class="container sidebar-sticky">
    <div class="sidebar-about">
      <img src="https://www.gravatar.com/avatar/49381c0004d32c0a4296b92dff0c0ae5?s=200" alt="gravatar">
      <h1><a href="http://purplepalmdash.github.io/">Get busy living, or get busy dying.</a></h1>
      <a href="http://purplepalmdash.github.io/"><p>Dash</p></a>
    </div>

    <ul class="sidebar-nav">
      
      <li class="sidebar-nav-item"><a href="http://purplepalmdash.github.io/">First Page</a></li>
      
      <li class="sidebar-nav-item"><a href="http://purplepalmdash.github.io/post/">All Posts</a></li>
      
      <li class="sidebar-nav-item"><a href="http://purplepalmdash.github.io/categories/linux/">Linux</a></li>
      
      <li class="sidebar-nav-item"><a href="http://purplepalmdash.github.io/categories/embedded/">Embedded System</a></li>
      
      <li class="sidebar-nav-item"><a href="http://purplepalmdash.github.io/categories/virtualization">Virtualization</a></li>
      
    </ul>

    <ul class="sidebar-nav">
      <li class="sidebar-nav-item">
      <a href="https://github.com/purplepalmdash"><i class="fa fa-github-square fa-3x"></i></a>
      
      <a href="https://cn.linkedin.com/in/yang-feipeng-1b909319"><i class="fa fa-linkedin-square fa-3x"></i></a>
      <a href="https://plus.google.com/u/0/106572959364703833986"><i class="fa fa-google-plus-square fa-3x"></i></a>
      <a href="https://www.facebook.com/yang.feipeng"><i class="fa fa-facebook-square fa-3x"></i></a>
      <a href="https://twitter.com/dashwillfly"><i class="fa fa-twitter-square fa-3x"></i></a>
      
      <a href="http://purplepalmdash.github.io/index.xml" type="application/rss+xml"><i class="fa fa-rss-square fa-3x"></i></a>
      </li>
    </ul>

    

  </div>
</div>


<div class="content container">
  <div class="posts">
    
    
    <div class="post">
      <h1 class="post-title">
        <a href="http://purplepalmdash.github.io/blog/2016/08/31/worktipsonopenstackdeployment/">WorkTipsOnOpenStackDeployment</a>
      </h1>
      <span class="post-date">Aug 31, 2016  &middot; <a href="http://purplepalmdash.github.io/blog/2016/08/31/worktipsonopenstackdeployment/#disqus_thread">Comments</a>
      
      <br/>
      <a class="a_cat" href="http://purplepalmdash.github.io/categories/virtualization">Virtualization</a>
        
      </span>
      
      

<h3 id="repository-sync">Repository Sync</h3>

<p>The current version of OpenStack could be found in:</p>

<p><a href="https://releases.openstack.org/">https://releases.openstack.org/</a></p>

<p>Mitaka is the recent version.</p>

<pre><code>Mitaka	Current stable release, security-supported	2016-04-07	2017-04-10
</code></pre>

<p>Ubuntu repository could be found at:</p>

<p><a href="http://ubuntu-cloud.archive.canonical.com/ubuntu/dists/">http://ubuntu-cloud.archive.canonical.com/ubuntu/dists/</a></p>

<p>Use apt-mirror for syncing them. Current the ubuntu1404 is well supported.</p>

      
    </div>
    
    <div class="post">
      <h1 class="post-title">
        <a href="http://purplepalmdash.github.io/blog/2016/08/23/onfreenasandcloudstack/">OnFreeNASAndCloudStack</a>
      </h1>
      <span class="post-date">Aug 23, 2016  &middot; <a href="http://purplepalmdash.github.io/blog/2016/08/23/onfreenasandcloudstack/#disqus_thread">Comments</a>
      
      <br/>
      <a class="a_cat" href="http://purplepalmdash.github.io/categories/iscsi">iscsi</a>
        
      </span>
      
      

<h3 id="iscsi-service">iscsi service</h3>

<p>Enable it via:</p>

<p><img src="/images/2016_08_23_18_06_58_278x449.jpg" alt="/images/2016_08_23_18_06_58_278x449.jpg" /></p>

<p>Configuration steps could be refers to:</p>

<p><a href="http://purplepalmdash.github.io/2015/07/17/iscsi-installed-debian-jessie/">http://purplepalmdash.github.io/2015/07/17/iscsi-installed-debian-jessie/</a></p>

<h3 id="integration">Integration</h3>

<p>Discover the iscsi storage via:</p>

<pre><code># iscsiadm -m discovery -t st -p 192.168.10.5:3260
192.168.10.5:3260,-1 iqn.xxxxxx.iscsi:cloudstackiscsi
</code></pre>

<p>Then you could add it into cloudstack via:</p>

<p><img src="/images/2016_08_23_20_25_24_433x634.jpg" alt="/images/2016_08_23_20_25_24_433x634.jpg" /></p>

<p>Add a service offering which tag is <code>iscsi</code>, then start the instance with this tagged
service offering.</p>

<h3 id="test">Test</h3>

<p>Find and login with following command:</p>

<pre><code># iscsiadm -m discovery -t st -p 192.168.10.5:3260
# iscsiadm -m node -T iqn.xxxxx.iscsi:forlinux -p 192.168.10.5:3260 -l
</code></pre>

<p>Use fio for testing:</p>

<pre><code># fio --ioengine=libaio --direct=1 --gtod_reduce=1 --name=test --filename=/dev/sdb
--bs=4k --iodepth=2 --size=125G --readwrite=randread --runtime=1800
</code></pre>

      
    </div>
    
    <div class="post">
      <h1 class="post-title">
        <a href="http://purplepalmdash.github.io/blog/2016/08/19/onxenserverbridgeworkingtips2/">OnXenServerBridgeWorkingTips2</a>
      </h1>
      <span class="post-date">Aug 19, 2016  &middot; <a href="http://purplepalmdash.github.io/blog/2016/08/19/onxenserverbridgeworkingtips2/#disqus_thread">Comments</a>
      
      <br/>
      <a class="a_cat" href="http://purplepalmdash.github.io/categories/virtualization">Virtualization</a>
        
      </span>
      
      

<h3 id="virtualbox-setup">VirtualBox Setup</h3>

<p>Define a virtual machine:</p>

<p><img src="/images/2016_08_19_14_36_05_517x355.jpg" alt="/images/2016_08_19_14_36_05_517x355.jpg" /></p>

<p>Use 7G of 8G memory for this VM:<br />
<img src="/images/2016_08_19_14_36_27_520x358.jpg" alt="/images/2016_08_19_14_36_27_520x358.jpg" /></p>

<p>Create a new disk(200G), choose VDI, Dynamically allocated, And specify the location
for storing it.</p>

<p>Now create the virtual machine, and configure its networking like following:</p>

<p><img src="/images/2016_08_19_14_45_56_691x410.jpg" alt="/images/2016_08_19_14_45_56_691x410.jpg" /></p>

<p>CPUs, we allocated 4:</p>

<p><img src="/images/2016_08_19_14_48_55_532x197.jpg" alt="/images/2016_08_19_14_48_55_532x197.jpg" /></p>

<p>And also the acceleration configuration:</p>

<p><img src="/images/2016_08_19_14_50_06_380x171.jpg" alt="/images/2016_08_19_14_50_06_380x171.jpg" /></p>

<p>Storage Configuration:</p>

<p><img src="/images/2016_08_19_14_51_57_544x202.jpg" alt="/images/2016_08_19_14_51_57_544x202.jpg" /></p>

<p>For saving the resources, disable USB/Audio.</p>

<p>Now insert the XenServer Installation CDROM, and install it.</p>

<h3 id="xenserver-configuration">XenServer Configuration</h3>

<p>IP Address, for bridged networking:</p>

<p><img src="/images/2016_08_19_14_56_46_486x268.jpg" alt="/images/2016_08_19_14_56_46_486x268.jpg" /></p>

<p>DNS Configuration:</p>

<p><img src="/images/2016_08_19_14_58_02_434x249.jpg" alt="/images/2016_08_19_14_58_02_434x249.jpg" /></p>

<p>NTP Server Configuration:</p>

<pre><code>server 0.cn.pool.ntp.org
server 0.asia.pool.ntp.org
server 2.asia.pool.ntp.org
</code></pre>

<p>Now Install the XenServer.</p>

<p>After installation, apply xs patches.</p>

      
    </div>
    
    <div class="post">
      <h1 class="post-title">
        <a href="http://purplepalmdash.github.io/blog/2016/08/18/onxenserverbridgeworkingtips/">OnXenServerBridgeWorkingTips</a>
      </h1>
      <span class="post-date">Aug 18, 2016  &middot; <a href="http://purplepalmdash.github.io/blog/2016/08/18/onxenserverbridgeworkingtips/#disqus_thread">Comments</a>
      
      <br/>
      <a class="a_cat" href="http://purplepalmdash.github.io/categories/virtualization">Virtualization</a>
        
      </span>
      
      

<h3 id="background">Background</h3>

<p>I will use XenServer for testing, while I made a vagrant box of XenServer 6.5, it could
work properly in seperated networking, so following I will try to setup a bridged
&ldquo;XenServer&rdquo; which will acts like a real physical machine.</p>

<h3 id="vagrantfile">Vagrantfile</h3>

<p>The configuration part is listed as:</p>

<pre><code>  # csagentxen65 node.
  # Add one networking, modify hostname, define memory, CPU cores.
  config.vm.define :csagentxen65 do |csagentxen65|
    csagentxen65.vm.box = &quot;Xen65Box&quot;
    csagentxen65.vm.boot_timeout = '36000'
    csagentxen65.vm.hostname = CLOUDSTACK_AGENT_HOSTNAME
    csagentxen65.vm.network :public_network, 
	    :dev =&gt; &quot;br0&quot;,
	    :mode =&gt; &quot;bridge&quot;,
	    :type =&gt; &quot;bridge&quot;,
	    :ip =&gt; &quot;192.168.10.3&quot;
    # Disable mounting of vagrant folder as it's not supported on xenserver
    csagentxen65.vm.synced_folder &quot;.&quot;, &quot;/vagrant&quot;, disabled: true
    csagentxen65.vm.provider :libvirt do |domain|
      domain.memory = 8192
      domain.cpus = 4
      domain.storage_pool_name = 'XenStoragePool'
      domain.nested = true
      domain.cpu_mode = 'host-passthrough'
      domain.nic_model_type = 'e1000'
      domain.management_network_mac = &quot;08:00:27:1D:90:A8&quot;
    end
  end
</code></pre>

<p>Here we used our newly created storage pool, I use virt-manager for creating a new
storage pool, which is in a seprated disk, could gain much more IOPS.</p>

<h3 id="bug-fix">Bug-Fix</h3>

<p>vagrant-libvirt will create 2 ethernet port, while the default one is xenbr0, but we
want the xenbr1 be the management port.</p>

<p>Gain a administration shell:</p>

<p><img src="/images/2016_08_18_19_34_41_498x510.jpg" alt="/images/2016_08_18_19_34_41_498x510.jpg" /><br />
Enter following command:</p>

<pre><code># ifconfig eth1 netmask 255.255.0.0
# route add default gw 192.168.0.xxx eth1
</code></pre>

<p>Now you can run ansible-playbook against the XenServer, but it will stuck.</p>

<p>Now manually configure eth1&rsquo;s netmask and its gateway. ansible-playbook could be run
properly.</p>

      
    </div>
    
    <div class="post">
      <h1 class="post-title">
        <a href="http://purplepalmdash.github.io/blog/2016/08/10/cloudstacksitetositevpnhowto/">CloudStackSiteToSiteVPNHowTo</a>
      </h1>
      <span class="post-date">Aug 10, 2016  &middot; <a href="http://purplepalmdash.github.io/blog/2016/08/10/cloudstacksitetositevpnhowto/#disqus_thread">Comments</a>
      
      <br/>
      <a class="a_cat" href="http://purplepalmdash.github.io/categories/virtualization">Virtualization</a>
        
      </span>
      
      

<p>Recently I am investigating the VPN solution on company&rsquo;s private cloud. Some guys
insist on setting up the site-to-site VPN on Juniper&rsquo;s firewall(SR240), but I think
this is a piece of shit. Setting up the VPN on physical firewall will lose the <code>ease of
use</code> and <code>ease of configuration</code> of CloudStack&rsquo;s built-in VPN functionality, so
following are the steps for me to investigate the CloudStack&rsquo;s site-to-site VPN among
different vpcs. Follow the guide line you will get two or more geographical independent
sites working as in a big ethernet.</p>

<h3 id="prerequisites">Prerequisites</h3>

<p>The environment is pretty simple, you need 2 PCs(Or more) for experiment.</p>

<p><img src="/images/2016_08_10_14_45_50_603x334.jpg" alt="/images/2016_08_10_14_45_50_603x334.jpg" /></p>

<p>Working Machine 1&rsquo;s configuration:</p>

<pre><code>Intel(R) Core(TM) i7-3770 CPU @ 3.40GHz
24 G Memory
1000M Ethernet Card
More than 20G Free disk    
ArchLinux
</code></pre>

<p>Working Machine 2&rsquo;s configuration:</p>

<pre><code>Intel(R) Core(TM) i3 CPU         540  @ 3.07GHz
8 G Memory
1000M Ethernet Card
More than 20G Free disk    
ArchLinux
</code></pre>

<p>Make sure the nested KVM is configurated in both machine:</p>

<pre><code>$ systool -m kvm_intel -v | grep nested
    nested              = &quot;Y&quot;
</code></pre>

<p>Also make sure you have a Linux Bridge(Not the physical card or OpenVswitch Bridge!).</p>

<h3 id="testing-vm">Testing VM</h3>

<p>We create two virtual machines for installing cloudstack all in one environment, like
following picture.</p>

<p><img src="/images/2016_08_10_14_53_23_652x427.jpg" alt="/images/2016_08_10_14_53_23_652x427.jpg" /></p>

<p>Virtual Machine 1:</p>

<pre><code>4 core(host-passthrough CPU)
8G Memory
200G Disk
Bridged to br0
CentOS 6.8 X86_64
</code></pre>

<p>Virtual Machine 2(Because working Machine 2 only have 8G memory, we allocated 7G to
it):</p>

<pre><code>4 core(host-passthrough CPU)
7G Memory
200G Disk
Bridged to br0
CentOS 6.8 X86_64
</code></pre>

<p>The network configuration is listed as:</p>

<p><img src="/images/2016_08_10_14_56_33_689x188.jpg" alt="/images/2016_08_10_14_56_33_689x188.jpg" /></p>

<p>Specified <code>shared</code> is very important, or you won&rsquo;t get networking works.</p>

<p>We named VirtualMachine1 to <code>vpn1452</code>, VirtualMachine2 to <code>vpn2452</code>, because we do the
investigation based on CloudStack 4.5.2 version.</p>

<h3 id="vpn1452">vpn1452</h3>

<p>vpn1452&rsquo;s IP Address is <code>172.16.0.2</code>, we started from the CloudStack management
webpage:</p>

<p><img src="/images/2016_08_10_15_45_14_487x432.jpg" alt="/images/2016_08_10_15_45_14_487x432.jpg" /><br />
Click <code>I have used cloudstack before</code>, continue to configurate the environment.</p>

<p>Change the options of following:</p>

<p>Secondary storage allow(value: 172.16.0.0/16):</p>

<p><img src="/images/2016_08_10_15_47_49_1140x252.jpg" alt="/images/2016_08_10_15_47_49_1140x252.jpg" /></p>

<p>Local Storage, systemvm.use to true:</p>

<p><img src="/images/2016_08_10_15_49_05_1022x371.jpg" alt="/images/2016_08_10_15_49_05_1022x371.jpg" /></p>

<p>Save the configuration via restart the cloudstack-management service <code>service
cloudstack-management restart</code></p>

<p>Create a new zone(Select Advanced zone):</p>

<p><img src="/images/2016_08_10_15_51_37_642x407.jpg" alt="/images/2016_08_10_15_51_37_642x407.jpg" /></p>

<p>Zone Name and DNS:</p>

<p><img src="/images/2016_08_10_15_52_40_417x464.jpg" alt="/images/2016_08_10_15_52_40_417x464.jpg" /></p>

<p>Select hypervisor and enable local storages:</p>

<p><img src="/images/2016_08_10_15_53_32_472x345.jpg" alt="/images/2016_08_10_15_53_32_472x345.jpg" /></p>

<p>Public Networking configuration:</p>

<p><img src="/images/2016_08_10_15_55_01_614x108.jpg" alt="/images/2016_08_10_15_55_01_614x108.jpg" /></p>

<p>Hit add and hit next:</p>

<p><img src="/images/2016_08_10_15_55_38_637x132.jpg" alt="/images/2016_08_10_15_55_38_637x132.jpg" /></p>

<p>A New pod named <code>pod1452</code>:</p>

<p><img src="/images/2016_08_10_15_56_46_472x404.jpg" alt="/images/2016_08_10_15_56_46_472x404.jpg" /></p>

<p>Guest Traffic :</p>

<p><img src="/images/2016_08_10_15_57_24_367x202.jpg" alt="/images/2016_08_10_15_57_24_367x202.jpg" /></p>

<p>Cluster Name:</p>

<p><img src="/images/2016_08_10_15_58_05_495x100.jpg" alt="/images/2016_08_10_15_58_05_495x100.jpg" /></p>

<p>Add Host(172.16.0.2):</p>

<p><img src="/images/2016_08_10_15_58_57_428x294.jpg" alt="/images/2016_08_10_15_58_57_428x294.jpg" /></p>

<p>Secondary storage:</p>

<p><img src="/images/2016_08_10_15_59_44_433x211.jpg" alt="/images/2016_08_10_15_59_44_433x211.jpg" /></p>

<p>Hit next and finally enable the zone:</p>

<p><img src="/images/2016_08_10_16_01_22_508x449.jpg" alt="/images/2016_08_10_16_01_22_508x449.jpg" /></p>

<p>Wait for a while to see the infrastucture works properly.</p>

<h4 id="create-vpc">Create VPC</h4>

<p>Hit Network-&gt; VPC, <code>Add VPC</code>:</p>

<p><img src="/images/2016_08_10_16_06_21_760x141.jpg" alt="/images/2016_08_10_16_06_21_760x141.jpg" /></p>

<p>Add a new VPC like following:</p>

<p><img src="/images/2016_08_10_16_07_07_405x442.jpg" alt="/images/2016_08_10_16_07_07_405x442.jpg" /></p>

<p>Wait for VR start up, when VR becomes ready, add a new tier via clicking <code>Configure</code>
button:</p>

<p><img src="/images/2016_08_10_16_08_39_662x145.jpg" alt="/images/2016_08_10_16_08_39_662x145.jpg" /></p>

<p>Configuration:</p>

<p><img src="/images/2016_08_10_16_09_35_377x324.jpg" alt="/images/2016_08_10_16_09_35_377x324.jpg" /></p>

<p>Your new vpc and tier will be viewed as following:</p>

<p><img src="/images/2016_08_10_16_10_14_712x412.jpg" alt="/images/2016_08_10_16_10_14_712x412.jpg" /></p>

<p>Add an instance which in the new tier,</p>

<p><img src="/images/2016_08_10_16_11_37_638x254.jpg" alt="/images/2016_08_10_16_11_37_638x254.jpg" /></p>

<p>Examine the instance&rsquo;s ip configuration:</p>

<p><img src="/images/2016_08_10_16_13_21_340x313.jpg" alt="/images/2016_08_10_16_13_21_340x313.jpg" /></p>

<h3 id="vpn2452">vpn2452</h3>

<p>The steps are mainly the same as in vpn1452, but with the following parameters:</p>

<pre><code>zone name: zone2452
public: 10.168.72.110~10.168.72.129
podname: pod2452
pod ip: 172.16.0.130~172.16.0.149
host: 172.16.0.3
</code></pre>

<h4 id="vpc2452">vpc2452</h4>

<p>Configuration for vpc2452:</p>

<p><img src="/images/2016_08_10_16_29_05_383x430.jpg" alt="/images/2016_08_10_16_29_05_383x430.jpg" /></p>

<p>tier 2452:</p>

<p><img src="/images/2016_08_10_16_30_21_398x340.jpg" alt="/images/2016_08_10_16_30_21_398x340.jpg" /></p>

<p>Now use a instance for testing the tier2452:</p>

<p><img src="/images/2016_08_10_16_34_15_456x306.jpg" alt="/images/2016_08_10_16_34_15_456x306.jpg" /></p>

<p>Without site-to-site vpn, testing ping:</p>

<p><img src="/images/2016_08_10_16_35_24_380x180.jpg" alt="/images/2016_08_10_16_35_24_380x180.jpg" /></p>

<h3 id="site-to-site-vpn">Site-to-Site VPN</h3>

<p>We will configure both side, first we create vpc1452:</p>

<h4 id="vpc1452">vpc1452</h4>

<p>Fist use following command for generating the key:</p>

<pre><code># dd if=/dev/random count=16 bs=1 | xxd -ps
</code></pre>

<p>Record the key, for later on vpc2452 we will use the same key for configurating the
site-to-site VPN.</p>

<p>Click vpc&rsquo;s configure button, to get the configuration window:</p>

<p><img src="/images/2016_08_10_16_43_48_600x145.jpg" alt="/images/2016_08_10_16_43_48_600x145.jpg" /></p>

<p>Click the <code>site-to-site VPNS</code>, a VPN Gateway will be generated:</p>

<p><img src="/images/2016_08_10_16_44_51_568x151.jpg" alt="/images/2016_08_10_16_44_51_568x151.jpg" /></p>

<p>Create a VPN Customer Gateway, like following configuration:</p>

<p><img src="/images/2016_08_10_16_46_14_352x511.jpg" alt="/images/2016_08_10_16_46_14_352x511.jpg" /></p>

<p>Notice, the Gateway<code>10.168.72.112</code> is generated in the same procedure in vpn2452 side.
the CIDR list is the vpn2452 side&rsquo;s tier ip ranges, ipsec preshared-key is gerated via
<code>dd</code> commands.</p>

<p>Now a new <code>vpnto2452</code> vpn customer gateway is generated,</p>

<p><img src="/images/2016_08_10_16_48_17_661x142.jpg" alt="/images/2016_08_10_16_48_17_661x142.jpg" /></p>

<p>Back to vpc window, site-to-site vpn, create a new vpn connection:</p>

<p><img src="/images/2016_08_10_16_49_18_683x123.jpg" alt="/images/2016_08_10_16_49_18_683x123.jpg" /></p>

<p>The configuration for the VPN connection is listed as: notice we must select Passive:</p>

<p><img src="/images/2016_08_10_16_50_11_341x185.jpg" alt="/images/2016_08_10_16_50_11_341x185.jpg" /></p>

<p>Now the created VPN Connection is like following, remains state <code>Disconnected</code> because
it will be triggered via VPN2452&rsquo;s dial-in.</p>

<p><img src="/images/2016_08_10_16_51_16_692x152.jpg" alt="/images/2016_08_10_16_51_16_692x152.jpg" /></p>

<h4 id="vpc2452-1">vpc2452</h4>

<p>The vpc and <code>site-to-site VPNS</code> configuration is the same as vpc1452, for VPN Customer
Gateway, the configuration is listed :</p>

<p><img src="/images/2016_08_10_16_57_50_364x533.jpg" alt="/images/2016_08_10_16_57_50_364x533.jpg" /></p>

<p>a new VPN Customer Gateway is created as:</p>

<p><img src="/images/2016_08_10_16_58_45_702x166.jpg" alt="/images/2016_08_10_16_58_45_702x166.jpg" /></p>

<p>Then back to <code>site-to-site</code> VPN connection, create a new VPN connection:</p>

<p><img src="/images/2016_08_10_16_59_41_393x216.jpg" alt="/images/2016_08_10_16_59_41_393x216.jpg" /></p>

<p>DO NOT select passive, because this one will be activate the remote(vpc1452)&rsquo;s VPN
connection.</p>

<p>A new connection will be setup:</p>

<p><img src="/images/2016_08_10_17_00_48_734x210.jpg" alt="/images/2016_08_10_17_00_48_734x210.jpg" /></p>

<p>Now the created instance in vpc2452 will get reach with the instance which runs in vpc1452:</p>

<p><img src="/images/2016_08_10_17_02_09_356x288.jpg" alt="/images/2016_08_10_17_02_09_356x288.jpg" /></p>

<p><img src="/images/2016_08_10_17_03_02_347x138.jpg" alt="/images/2016_08_10_17_03_02_347x138.jpg" /></p>

<p>You can login to the VR for examing the ipsec processes:</p>

<p><img src="/images/2016_08_10_17_04_17_604x317.jpg" alt="/images/2016_08_10_17_04_17_604x317.jpg" /></p>

<h4 id="back-to-vpc1452">Back to vpc1452</h4>

<p>Now the site-to-site vpn status has changed to:</p>

<p><img src="/images/2016_08_10_17_05_27_766x177.jpg" alt="/images/2016_08_10_17_05_27_766x177.jpg" /></p>

<h3 id="conclusion">Conclusion</h3>

<p>The cloudstack&rsquo;s site-to-site VPN functionality is very easy to use. Use it we could
easily setup the connections between different VPCs across Internet.</p>

<p>Later I will show how to setup the site-to-site VPN with OpenStack and other platforms.</p>

      
    </div>
    
    
    
    <ul class="pagination">
        
        <li>
            <a href="/" aria-label="First"><span aria-hidden="true">&laquo;&laquo;</span></a>
        </li>
        
        <li
        >
        <a href="/" aria-label="Previous"><span aria-hidden="true">&laquo;</span></a>
        </li>
        
        <li
        ><a href="/">1</a></li>
        
        <li
        class="active"><a href="/page/2/">2</a></li>
        
        <li
        ><a href="/page/3/">3</a></li>
        
        <li
        ><a href="/page/4/">4</a></li>
        
        <li
        ><a href="/page/5/">5</a></li>
        
        <li
        ><a href="/page/6/">6</a></li>
        
        <li
        ><a href="/page/7/">7</a></li>
        
        <li
        ><a href="/page/8/">8</a></li>
        
        <li
        ><a href="/page/9/">9</a></li>
        
        <li
        ><a href="/page/10/">10</a></li>
        
        <li
        ><a href="/page/11/">11</a></li>
        
        <li
        ><a href="/page/12/">12</a></li>
        
        <li
        ><a href="/page/13/">13</a></li>
        
        <li
        ><a href="/page/14/">14</a></li>
        
        <li
        ><a href="/page/15/">15</a></li>
        
        <li
        ><a href="/page/16/">16</a></li>
        
        <li
        ><a href="/page/17/">17</a></li>
        
        <li
        ><a href="/page/18/">18</a></li>
        
        <li
        ><a href="/page/19/">19</a></li>
        
        <li
        ><a href="/page/20/">20</a></li>
        
        <li
        ><a href="/page/21/">21</a></li>
        
        <li
        ><a href="/page/22/">22</a></li>
        
        <li
        ><a href="/page/23/">23</a></li>
        
        <li
        ><a href="/page/24/">24</a></li>
        
        <li
        ><a href="/page/25/">25</a></li>
        
        <li
        ><a href="/page/26/">26</a></li>
        
        <li
        ><a href="/page/27/">27</a></li>
        
        <li
        ><a href="/page/28/">28</a></li>
        
        <li
        ><a href="/page/29/">29</a></li>
        
        <li
        ><a href="/page/30/">30</a></li>
        
        <li
        ><a href="/page/31/">31</a></li>
        
        <li
        ><a href="/page/32/">32</a></li>
        
        <li
        ><a href="/page/33/">33</a></li>
        
        <li
        ><a href="/page/34/">34</a></li>
        
        <li
        ><a href="/page/35/">35</a></li>
        
        <li
        ><a href="/page/36/">36</a></li>
        
        <li
        ><a href="/page/37/">37</a></li>
        
        <li
        ><a href="/page/38/">38</a></li>
        
        <li
        ><a href="/page/39/">39</a></li>
        
        <li
        ><a href="/page/40/">40</a></li>
        
        <li
        ><a href="/page/41/">41</a></li>
        
        <li
        ><a href="/page/42/">42</a></li>
        
        <li
        ><a href="/page/43/">43</a></li>
        
        <li
        ><a href="/page/44/">44</a></li>
        
        <li
        ><a href="/page/45/">45</a></li>
        
        <li
        ><a href="/page/46/">46</a></li>
        
        <li
        ><a href="/page/47/">47</a></li>
        
        <li
        ><a href="/page/48/">48</a></li>
        
        <li
        ><a href="/page/49/">49</a></li>
        
        <li
        ><a href="/page/50/">50</a></li>
        
        <li
        ><a href="/page/51/">51</a></li>
        
        <li
        ><a href="/page/52/">52</a></li>
        
        <li
        ><a href="/page/53/">53</a></li>
        
        <li
        ><a href="/page/54/">54</a></li>
        
        <li
        ><a href="/page/55/">55</a></li>
        
        <li
        ><a href="/page/56/">56</a></li>
        
        <li
        ><a href="/page/57/">57</a></li>
        
        <li
        ><a href="/page/58/">58</a></li>
        
        <li
        ><a href="/page/59/">59</a></li>
        
        <li
        ><a href="/page/60/">60</a></li>
        
        <li
        ><a href="/page/61/">61</a></li>
        
        <li
        ><a href="/page/62/">62</a></li>
        
        <li
        ><a href="/page/63/">63</a></li>
        
        <li
        ><a href="/page/64/">64</a></li>
        
        <li
        ><a href="/page/65/">65</a></li>
        
        <li
        ><a href="/page/66/">66</a></li>
        
        <li
        ><a href="/page/67/">67</a></li>
        
        <li
        ><a href="/page/68/">68</a></li>
        
        <li
        ><a href="/page/69/">69</a></li>
        
        <li
        ><a href="/page/70/">70</a></li>
        
        <li
        ><a href="/page/71/">71</a></li>
        
        <li
        ><a href="/page/72/">72</a></li>
        
        <li
        ><a href="/page/73/">73</a></li>
        
        <li
        ><a href="/page/74/">74</a></li>
        
        <li
        ><a href="/page/75/">75</a></li>
        
        <li
        ><a href="/page/76/">76</a></li>
        
        <li
        ><a href="/page/77/">77</a></li>
        
        <li
        ><a href="/page/78/">78</a></li>
        
        <li
        ><a href="/page/79/">79</a></li>
        
        <li
        ><a href="/page/80/">80</a></li>
        
        <li
        ><a href="/page/81/">81</a></li>
        
        <li
        ><a href="/page/82/">82</a></li>
        
        <li
        ><a href="/page/83/">83</a></li>
        
        <li
        ><a href="/page/84/">84</a></li>
        
        <li
        ><a href="/page/85/">85</a></li>
        
        <li
        ><a href="/page/86/">86</a></li>
        
        <li
        ><a href="/page/87/">87</a></li>
        
        <li
        ><a href="/page/88/">88</a></li>
        
        <li
        ><a href="/page/89/">89</a></li>
        
        <li
        ><a href="/page/90/">90</a></li>
        
        <li
        ><a href="/page/91/">91</a></li>
        
        <li
        ><a href="/page/92/">92</a></li>
        
        <li
        ><a href="/page/93/">93</a></li>
        
        <li
        ><a href="/page/94/">94</a></li>
        
        <li
        ><a href="/page/95/">95</a></li>
        
        <li
        ><a href="/page/96/">96</a></li>
        
        <li
        ><a href="/page/97/">97</a></li>
        
        <li
        ><a href="/page/98/">98</a></li>
        
        <li
        ><a href="/page/99/">99</a></li>
        
        <li
        ><a href="/page/100/">100</a></li>
        
        <li
        ><a href="/page/101/">101</a></li>
        
        <li
        ><a href="/page/102/">102</a></li>
        
        <li
        ><a href="/page/103/">103</a></li>
        
        <li
        ><a href="/page/104/">104</a></li>
        
        <li
        ><a href="/page/105/">105</a></li>
        
        <li
        ><a href="/page/106/">106</a></li>
        
        <li
        ><a href="/page/107/">107</a></li>
        
        <li
        ><a href="/page/108/">108</a></li>
        
        <li
        ><a href="/page/109/">109</a></li>
        
        <li
        ><a href="/page/110/">110</a></li>
        
        <li
        ><a href="/page/111/">111</a></li>
        
        <li
        ><a href="/page/112/">112</a></li>
        
        <li
        ><a href="/page/113/">113</a></li>
        
        <li
        ><a href="/page/114/">114</a></li>
        
        <li
        ><a href="/page/115/">115</a></li>
        
        <li
        ><a href="/page/116/">116</a></li>
        
        <li
        ><a href="/page/117/">117</a></li>
        
        <li
        ><a href="/page/118/">118</a></li>
        
        <li
        ><a href="/page/119/">119</a></li>
        
        <li
        ><a href="/page/120/">120</a></li>
        
        <li
        ><a href="/page/121/">121</a></li>
        
        <li
        ><a href="/page/122/">122</a></li>
        
        <li
        ><a href="/page/123/">123</a></li>
        
        <li
        ><a href="/page/124/">124</a></li>
        
        <li
        ><a href="/page/125/">125</a></li>
        
        <li
        ><a href="/page/126/">126</a></li>
        
        <li
        ><a href="/page/127/">127</a></li>
        
        <li
        ><a href="/page/128/">128</a></li>
        
        <li
        ><a href="/page/129/">129</a></li>
        
        <li
        ><a href="/page/130/">130</a></li>
        
        <li
        ><a href="/page/131/">131</a></li>
        
        <li
        ><a href="/page/132/">132</a></li>
        
        <li
        ><a href="/page/133/">133</a></li>
        
        <li
        ><a href="/page/134/">134</a></li>
        
        <li
        ><a href="/page/135/">135</a></li>
        
        <li
        ><a href="/page/136/">136</a></li>
        
        <li
        >
        <a href="/page/3/" aria-label="Next"><span aria-hidden="true">&raquo;</span></a>
        </li>
        
        <li>
            <a href="/page/136/" aria-label="Last"><span aria-hidden="true">&raquo;&raquo;</span></a>
        </li>
        
    </ul>
    
  </div>
</div>


<script type="text/javascript">
var disqus_shortname = "dashsagittariussglory";
(function () {
    var s = document.createElement('script'); s.async = true;
    s.type = 'text/javascript';
    s.src = '//' + disqus_shortname + '.disqus.com/count.js';
    (document.getElementsByTagName('HEAD')[0] || document.getElementsByTagName('BODY')[0]).appendChild(s);
}());
</script>

<script src="http://purplepalmdash.github.io/js/highlight.pack.js"></script>
<script>hljs.initHighlightingOnLoad();</script>
</body>
</html>

