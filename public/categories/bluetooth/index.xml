<?xml version="1.0" encoding="utf-8" standalone="yes" ?>
<rss version="2.0" xmlns:atom="http://www.w3.org/2005/Atom">
  <channel>
    <title>Bluetooth on Dash</title>
    <link>http://purplepalmdash.github.io/categories/bluetooth/</link>
    <description>Recent content in Bluetooth on Dash</description>
    <generator>Hugo -- gohugo.io</generator>
    <language>en-us</language>
    <lastBuildDate>Thu, 19 Dec 2013 00:00:00 +0000</lastBuildDate>
    <atom:link href="http://purplepalmdash.github.io/categories/bluetooth/index.xml" rel="self" type="application/rss+xml" />
    
    <item>
      <title>Bluetooth Headset on ArchLinux</title>
      <link>http://purplepalmdash.github.io/2013/12/19/bluetooth-headset-on-archlinux/</link>
      <pubDate>Thu, 19 Dec 2013 00:00:00 +0000</pubDate>
      
      <guid>http://purplepalmdash.github.io/2013/12/19/bluetooth-headset-on-archlinux/</guid>
      <description>&lt;p&gt;After 4 days struggling, I finally make bluetooth headset working on my ArchLinux. Following is the detailed how-to which shows how to enable bluetooth playing.&lt;br /&gt;
###Software Installation
Currently blueman is still the best bluetooth management software, we can install it via:&lt;/p&gt;

&lt;pre&gt;&lt;code&gt;	$ yaourt blueman
	1 aur/blueman-bzr 726-2 [installed] (38)
	    GTK+ bluetooth management utility

&lt;/code&gt;&lt;/pre&gt;

&lt;p&gt;Then we have to install bluez related items:&lt;/p&gt;

&lt;pre&gt;&lt;code&gt;	$ pacman -S bluez-utils bluez-libs python2-pybluez
	$ yaourt -S bluez4
	$ yaourt pulseaudio-bluez4

&lt;/code&gt;&lt;/pre&gt;

&lt;p&gt;###Bluetooth Configuration
First make sure your bluetooth service is enabled.&lt;/p&gt;

&lt;pre&gt;&lt;code&gt;	$ sudo systemctl start bluetooth
	$ sudo systemctl enable bluetooth

&lt;/code&gt;&lt;/pre&gt;

&lt;p&gt;Now we need to make change to following files:&lt;/p&gt;

&lt;pre&gt;&lt;code&gt;	[Trusty@XXXyyy ~]$ cat /etc/bluetooth/audio.conf
	
	[General]
	Enable=Socket
	
	[A2DP]
	SBCSources=1

&lt;/code&gt;&lt;/pre&gt;

&lt;p&gt;Now we can manually startup blueman manager via:&lt;/p&gt;

&lt;pre&gt;&lt;code&gt;	$ blueman-manager

&lt;/code&gt;&lt;/pre&gt;

&lt;p&gt;&lt;img src=&#34;http://purplepalmdash.github.io/images/blueman.jpg&#34; alt=&#34;blueman.jpg&#34; /&gt;&lt;br /&gt;
Click &amp;ldquo;Search&amp;rdquo; to find the avaiable headset, pair, trust, setup. Right click the found headset, choose &amp;ldquo;Audio Sink&amp;rdquo;, if successful, you will see the equipment has been successfully added into the system.&lt;br /&gt;
Add blueman automatically to the system startup script. We can add it into the awsome window manager:&lt;/p&gt;

&lt;pre&gt;&lt;code&gt;	autorunApps = 
	{ 
	--.........
	&amp;quot;blueman-manager&amp;quot;,
	--.........
	}

&lt;/code&gt;&lt;/pre&gt;

&lt;p&gt;###PulseAudio Configuration
First we have to define the alsa device in /etc/asound.conf:&lt;/p&gt;

&lt;pre&gt;&lt;code&gt;	pcm.btheadset {
	   type plug
	   slave {
	       pcm {
	           type bluetooth
	           device 8C:64:goewugowugoeu
	           profile &amp;quot;auto&amp;quot;
	       }   
	   }   
	   hint {
	       show on
	       description &amp;quot;BT Headset&amp;quot;
	   }   
	}
	ctl.btheadset {
	  type bluetooth
	}  

&lt;/code&gt;&lt;/pre&gt;

&lt;p&gt;Now via &amp;ldquo;aplay -l&amp;rdquo; we can see the following item:&lt;/p&gt;

&lt;pre&gt;&lt;code&gt;	$ aplay -L
	null
	    Discard all samples (playback) or generate zero samples (capture)
	pulse
	    PulseAudio Sound Server
	btheadset
	    BT Headset

&lt;/code&gt;&lt;/pre&gt;

&lt;p&gt;In fact currently we can play sounds via mplayer, by specifying its default audio path is OK. But we want to make this audio sink path globally.&lt;br /&gt;
The steps for manually enabling the audio sink path via following steps:&lt;br /&gt;
Load device of btheadset&lt;/p&gt;

&lt;pre&gt;&lt;code&gt;	$ pactl load-module module-alsa-sink device=btheadset	

&lt;/code&gt;&lt;/pre&gt;

&lt;p&gt;Load bluetooth discover module&lt;/p&gt;

&lt;pre&gt;&lt;code&gt;	$ pacmd load_module module-bluetooth-discover

&lt;/code&gt;&lt;/pre&gt;

&lt;p&gt;List the available cards&lt;/p&gt;

&lt;pre&gt;&lt;code&gt;	$ pactl list cards short

&lt;/code&gt;&lt;/pre&gt;

&lt;p&gt;The upper output is still one audio card, but all we care is the audio sink, so we list all of the available audio sinks via:&lt;/p&gt;

&lt;pre&gt;&lt;code&gt;	$ pactl list sinks short
	0	alsa_output.pci-0000_00_1b.0.analog-stereo	module-alsa-card.c	s16le 2ch 44100Hz	SUSPENDED
	1	alsa_output.btheadset	module-alsa-sink.c	s16le 2ch 44100Hz	SUSPENDED
Set the default audio sink to bluetooth headset: 
	$ pacmd set-default-sink 1

&lt;/code&gt;&lt;/pre&gt;

&lt;p&gt;Congratulations! Now you can listen to music via bluetooth headset!
###Automatically Configuration
Following is the configuration for my machine, you have to adjust the parameters according to yourself:&lt;br /&gt;
Comment the following items in /etc/pulse/default.pa, the module-bluetooth-policy should be commented, or the pulse audio will not start:&lt;/p&gt;

&lt;pre&gt;&lt;code&gt;	### Automatically load driver modules for Bluetooth hardware
	#.ifexists module-bluetooth-policy.so
	#load-module module-bluetooth-policy
	#.endif
	#
	.ifexists module-bluetooth-discover.so
	load-module module-bluetooth-discover
	.endif

&lt;/code&gt;&lt;/pre&gt;

&lt;p&gt;Surely you will start bluetooth daemon by default:&lt;/p&gt;

&lt;pre&gt;&lt;code&gt;	$ sudo systemctl enable bluetooth

&lt;/code&gt;&lt;/pre&gt;

&lt;p&gt;Add &amp;ldquo;blueman-applet&amp;rdquo; into the awesome startup file(.config/awesome/rc.lua).&lt;br /&gt;
The right steps for using bluetooth:&lt;/p&gt;

&lt;ol&gt;
&lt;li&gt;Startup Your machine with bluetooth background and blueman-applet enabled.&lt;/li&gt;
&lt;li&gt;Power on your bluetooth headset. If your key is accepted permanately, the bluetooth headset will connect automatically.&lt;/li&gt;
&lt;li&gt;Manually add the audio sink via &amp;ldquo;pactl load-module module-alsa-sink device=btheadset&amp;rdquo;.&lt;/li&gt;
&lt;li&gt;Set the default route path of the audio sink via &amp;ldquo;pacmd set-default-sink 1&amp;rdquo; ( all of the audio sink could be listed via &amp;ldquo;pactl list sinks short&amp;rdquo;)&lt;/li&gt;
&lt;/ol&gt;

&lt;p&gt;Now you can enjoy the bluetooth, for convenient, I made an alias:&lt;/p&gt;

&lt;pre&gt;&lt;code&gt;	alias enableblue=&#39;pactl load-module module-alsa-sink device=btheadset &amp;amp;&amp;amp; pacmd set-default-sink 1&amp;quot;

&lt;/code&gt;&lt;/pre&gt;
</description>
    </item>
    
    <item>
      <title>Bluetooth headset in ArchLinux</title>
      <link>http://purplepalmdash.github.io/2013/12/14/bluetooth-headset-in-archlinux/</link>
      <pubDate>Sat, 14 Dec 2013 00:00:00 +0000</pubDate>
      
      <guid>http://purplepalmdash.github.io/2013/12/14/bluetooth-headset-in-archlinux/</guid>
      <description>&lt;p&gt;I have a Nokia bluetooth headset BH-105,and a bluetooth usb dongle. And I want to connect them together. Following are the steps.&lt;br /&gt;
###Software Preparation
On ArchLinux, Install &amp;ldquo;bluez&amp;rdquo; and &amp;ldquo;bluez-utils&amp;rdquo;&lt;/p&gt;

&lt;pre&gt;&lt;code&gt;	$ sudo pacman -S bluez bluez-utils
	$ sudo systemctl start bluetooth &amp;amp;&amp;amp; sudo systemctl enable bluetooth

&lt;/code&gt;&lt;/pre&gt;
</description>
    </item>
    
  </channel>
</rss>