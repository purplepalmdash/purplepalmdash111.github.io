<?xml version="1.0" encoding="utf-8"?>
<feed xmlns="http://www.w3.org/2005/Atom">

  <title><![CDATA[Category: Virtualization | Dash]]></title>
  <link href="http://purplepalmdash.github.io/blog/categories/virtualization/atom.xml" rel="self"/>
  <link href="http://purplepalmdash.github.io/"/>
  <updated>2016-04-20T19:47:40+08:00</updated>
  <id>http://purplepalmdash.github.io/</id>
  <author>
    <name><![CDATA[Dash]]></name>
    
  </author>
  <generator uri="http://octopress.org/">Octopress</generator>

  
  <entry>
    <title type="html"><![CDATA[DevStack Enable Neutron]]></title>
    <link href="http://purplepalmdash.github.io/blog/2016/04/20/devstack-enable-neutron/"/>
    <updated>2016-04-20T11:11:54+08:00</updated>
    <id>http://purplepalmdash.github.io/blog/2016/04/20/devstack-enable-neutron</id>
    <content type="html"><![CDATA[<h3>Steps</h3>

<p>Install steps are listed as following:</p>

<p>First as root user, create the initial stack user via:</p>

<pre><code># git clone https://git.openstack.org/openstack-dev/devstack
# tools/create-stack-user.sh 
# passwd stack
</code></pre>

<p>Now login with user <code>stack</code>, clone the repository and begin devstack installation:</p>

<pre><code>$ git clone https://git.openstack.org/openstack-dev/devstack
$ cd devstack
$ git checkout stable/liberty
$ cp samples/local.conf ./
$ vim local.conf
</code></pre>

<p>The <code>local.conf</code> file should added following items:</p>

<pre><code>

# use TryStack git mirror
GIT_BASE=http://git.trystack.cn
NOVNC_REPO=http://git.trystack.cn/kanaka/noVNC.git
SPICE_REPO=http://git.trystack.cn/git/spice/spice-html5.git
</code></pre>

<p>Now stacking the devstack:</p>

<pre><code>$ ./stack.sh
</code></pre>
]]></content>
  </entry>
  
  <entry>
    <title type="html"><![CDATA[Change IP in DevStack]]></title>
    <link href="http://purplepalmdash.github.io/blog/2016/04/18/change-ip-in-devstack/"/>
    <updated>2016-04-18T12:15:35+08:00</updated>
    <id>http://purplepalmdash.github.io/blog/2016/04/18/change-ip-in-devstack</id>
    <content type="html"><![CDATA[<h3>Tips</h3>

<p>After changing the IP Address of the DevStack machine, do following for re-installing
the envs:</p>

<pre><code>$ ssh stack@Your_IP
stack@packer-PerforceTest:~$ pwd
/opt/stack
stack@packer-PerforceTest:~$ cd devstack/
stack@packer-PerforceTest:~/devstack$ ./unstack.sh &amp;&amp; ./stack.sh 
</code></pre>

<p>Now visiting your <code>http://Your_New_IP/dashboard</code> you will got the openstack dashborad.</p>
]]></content>
  </entry>
  
  <entry>
    <title type="html"><![CDATA[Extend Vagrant's Disk]]></title>
    <link href="http://purplepalmdash.github.io/blog/2016/04/05/extend-vagrants-disk/"/>
    <updated>2016-04-05T15:30:35+08:00</updated>
    <id>http://purplepalmdash.github.io/blog/2016/04/05/extend-vagrants-disk</id>
    <content type="html"><![CDATA[<p>In Vagrantfile, edit the following definition:</p>

<pre><code>  config.vm.provider "virtualbox" do |vb|
  #   # Display the VirtualBox GUI when booting the machine
  #   vb.gui = true
  #
  #   # Customize the amount of memory on the VM:
    vb.memory = "1024"
    file_to_disk = File.realpath( "." ).to_s + "/disk.vdi"
    if ARGV[0] == "up" &amp;&amp; ! File.exist?(file_to_disk) 
      puts "Creating 5GB disk #{file_to_disk}."
      vb.customize [
        'createhd', 
        '--filename', file_to_disk, 
        '--format', 'VDI', 
        '--size', 5000 * 1024 # 5 GB
        ] 
      vb.customize [
        'storageattach', :id, 
        '--storagectl', 'SATA', 
        '--port', 1, '--device', 0, 
        '--type', 'hdd', '--medium', 
        file_to_disk
        ]
    end
    #config.vm.provision "shell", path: "scripts/add_new_disk.sh"
  end
  config.vm.provision "shell", path: "scripts/add_new_disk.sh"
</code></pre>

<p>The <code>add_new_disk.sh</code> should be written like following:</p>

<pre><code>set -e
set -x

if [ -f /etc/disk_added_date ]
then
   echo "disk already added so exiting."
   exit 0
fi


sudo fdisk -u /dev/sdb &lt;&lt;EOF
n
p
1


t
8e
w
EOF

pvcreate /dev/sdb1
vgextend VolGroup /dev/sdb1
lvextend /dev/VolGroup/lv_root
resize2fs /dev/VolGroup/lv_root

date &gt; /etc/disk_added_date
</code></pre>

<p>Notice: this won&rsquo;t fit for Ubuntu Snappy Core.</p>
]]></content>
  </entry>
  
  <entry>
    <title type="html"><![CDATA[Tips on Shrinking VHD File]]></title>
    <link href="http://purplepalmdash.github.io/blog/2016/03/29/tips-on-shrinking-vhd-file/"/>
    <updated>2016-03-29T18:15:51+08:00</updated>
    <id>http://purplepalmdash.github.io/blog/2016/03/29/tips-on-shrinking-vhd-file</id>
    <content type="html"><![CDATA[<h3>UnCleaned Templates Generation</h3>

<p>Before remove big files:</p>

<pre><code>[root@fwgwg ~]# df -h
Filesystem            Size  Used Avail Use% Mounted on
/dev/mapper/VolGroup00-LogVol00
                       18G  5.1G   12G  31% /
/dev/xvda1             99M   14M   80M  15% /boot
tmpfs                 128M     0  128M   0% /dev/shm
</code></pre>

<p>Create the vhd file in CloudStack:</p>

<p><img src="source/images/2016_03_29_18_17_10_634x380.jpg" alt="source/images/2016_03_29_18_17_10_634x380.jpg" /></p>

<p>Name it:</p>

<p><img src="source/images/2016_03_29_18_17_55_301x382.jpg" alt="source/images/2016_03_29_18_17_55_301x382.jpg" /></p>
]]></content>
  </entry>
  
  <entry>
    <title type="html"><![CDATA[Monitoring XenServer]]></title>
    <link href="http://purplepalmdash.github.io/blog/2016/03/29/monitoring-xenserver/"/>
    <updated>2016-03-29T12:23:50+08:00</updated>
    <id>http://purplepalmdash.github.io/blog/2016/03/29/monitoring-xenserver</id>
    <content type="html"><![CDATA[<h3>Prerequisition</h3>

<p>Refers
to<a href="https://github.com/crashdump/collectd-xenserver">https://github.com/crashdump/collectd-xenserver</a></p>

<ul>
<li>Collected 4.9 or later</li>
<li>Python2.4 Or Later</li>
<li>sudo pip install XenAPI</li>
<li>sudo pip install collectd</li>
</ul>


<h3>Configuration</h3>

<p>The plugin could not working. to be investigated.</p>
]]></content>
  </entry>
  
</feed>
