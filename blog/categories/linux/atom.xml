<?xml version="1.0" encoding="utf-8"?>
<feed xmlns="http://www.w3.org/2005/Atom">

  <title><![CDATA[Category: Linux | Dash]]></title>
  <link href="http://purplepalmdash.github.io/blog/categories/linux/atom.xml" rel="self"/>
  <link href="http://purplepalmdash.github.io/"/>
  <updated>2015-07-04T21:58:01+08:00</updated>
  <id>http://purplepalmdash.github.io/</id>
  <author>
    <name><![CDATA[Dash]]></name>
    
  </author>
  <generator uri="http://octopress.org/">Octopress</generator>

  
  <entry>
    <title type="html"><![CDATA[Try Raid0 Installation on Ubuntu]]></title>
    <link href="http://purplepalmdash.github.io/blog/2015/07/03/try-raid0-installation-on-ubuntu/"/>
    <updated>2015-07-03T10:58:55+08:00</updated>
    <id>http://purplepalmdash.github.io/blog/2015/07/03/try-raid0-installation-on-ubuntu</id>
    <content type="html"><![CDATA[<h3>Preparation</h3>

<p>Prepare the disks:</p>

<pre><code>[root:/home/juju/img]# mkdir Raid0
[root:/home/juju/img]# cd Raid0/
[root:/home/juju/img/Raid0]# ls
[root:/home/juju/img/Raid0]# qemu-img create -f qcow2 disk0.qcow2 10G
Formatting 'disk0.qcow2', fmt=qcow2 size=10737418240 encryption=off cluster_size=65536 
[root:/home/juju/img/Raid0]# qemu-img create -f qcow2 disk1.qcow2 10G
Formatting 'disk1.qcow2', fmt=qcow2 size=10737418240 encryption=off cluster_size=65536 
[root:/home/juju/img/Raid0]# qemu-img create -f qcow2 disk2.qcow2 10G
Formatting 'disk2.qcow2', fmt=qcow2 size=10737418240 encryption=off cluster_size=65536 
</code></pre>

<p>Prepare the Virtual Machine:  <br/>
<img src="/images/2015_07_03_11_06_03_658x441.jpg" alt="/images/2015_07_03_11_06_03_658x441.jpg" /></p>

<p><img src="/images/2015_07_03_11_06_57_556x325.jpg" alt="/images/2015_07_03_11_06_57_556x325.jpg" /></p>

<h3>Partition</h3>

<p><img src="/images/2015_07_03_11_12_18_615x311.jpg" alt="/images/2015_07_03_11_12_18_615x311.jpg" /></p>

<p><img src="/images/2015_07_03_11_15_30_476x216.jpg" alt="/images/2015_07_03_11_15_30_476x216.jpg" /></p>

<p><img src="/images/2015_07_03_11_15_36_384x205.jpg" alt="/images/2015_07_03_11_15_36_384x205.jpg" /></p>

<p><img src="/images/2015_07_03_11_18_30_499x265.jpg" alt="/images/2015_07_03_11_18_30_499x265.jpg" /></p>

<h3>Raid</h3>

<p>Configure the Software Raid0:</p>

<p><img src="/images/2015_07_03_11_19_31_441x260.jpg" alt="/images/2015_07_03_11_19_31_441x260.jpg" /></p>

<p><img src="/images/2015_07_03_11_20_41_655x244.jpg" alt="/images/2015_07_03_11_20_41_655x244.jpg" /></p>

<p><img src="/images/2015_07_03_11_22_43_728x243.jpg" alt="/images/2015_07_03_11_22_43_728x243.jpg" /></p>

<p>After Configuration of SoftRaid1, the screen displayed like:</p>

<p><img src="/images/2015_07_03_11_28_28_687x457.jpg" alt="/images/2015_07_03_11_28_28_687x457.jpg" /></p>

<p>Continue to install.</p>

<h3>Verify Raid.</h3>

<p>Use df and fdisk to verify the partition information:</p>

<pre><code>clouder@UbuntuRaid1:~$ df -h
Filesystem      Size  Used Avail Use% Mounted on
/dev/md0        9.3G  870M  7.9G  10% /
none            4.0K     0  4.0K   0% /sys/fs/cgroup
udev            235M  4.0K  235M   1% /dev
tmpfs            50M  440K   49M   1% /run
none            5.0M     0  5.0M   0% /run/lock
none            246M     0  246M   0% /run/shm
none            100M     0  100M   0% /run/user
clouder@UbuntuRaid1:~$ sudo fdisk -l
[sudo] password for clouder: 

Disk /dev/vda: 10.7 GB, 10737418240 bytes
255 heads, 63 sectors/track, 1305 cylinders, total 20971520 sectors
Units = sectors of 1 * 512 = 512 bytes
Sector size (logical/physical): 512 bytes / 512 bytes
I/O size (minimum/optimal): 512 bytes / 512 bytes
Disk identifier: 0x00035942

   Device Boot      Start         End      Blocks   Id  System
/dev/vda1   *        2048    19922943     9960448   fd  Linux raid autodetect
/dev/vda2        19924990    20969471      522241    5  Extended
/dev/vda5        19924992    20969471      522240   fd  Linux raid autodetect

Disk /dev/vdb: 10.7 GB, 10737418240 bytes
255 heads, 63 sectors/track, 1305 cylinders, total 20971520 sectors
Units = sectors of 1 * 512 = 512 bytes
Sector size (logical/physical): 512 bytes / 512 bytes
I/O size (minimum/optimal): 512 bytes / 512 bytes
Disk identifier: 0x000715e9

   Device Boot      Start         End      Blocks   Id  System
/dev/vdb1   *        2048    19922943     9960448   fd  Linux raid autodetect
/dev/vdb2        19924990    20969471      522241    5  Extended
/dev/vdb5        19924992    20969471      522240   fd  Linux raid autodetect

Disk /dev/md0: 10.2 GB, 10190979072 bytes
2 heads, 4 sectors/track, 2488032 cylinders, total 19904256 sectors
Units = sectors of 1 * 512 = 512 bytes
Sector size (logical/physical): 512 bytes / 512 bytes
I/O size (minimum/optimal): 512 bytes / 512 bytes
Disk identifier: 0x00000000

Disk /dev/md0 doesn't contain a valid partition table

Disk /dev/md1: 534 MB, 534446080 bytes
2 heads, 4 sectors/track, 130480 cylinders, total 1043840 sectors
Units = sectors of 1 * 512 = 512 bytes
Sector size (logical/physical): 512 bytes / 512 bytes
I/O size (minimum/optimal): 512 bytes / 512 bytes
Disk identifier: 0x00000000

Disk /dev/md1 doesn't contain a valid partition table
</code></pre>

<p>Verify the raid status:</p>

<pre><code>root@UbuntuRaid1:/etc/initramfs-tools/conf.d# cat /proc/mdstat 
Personalities : [linear] [multipath] [raid0] [raid1] [raid6] [raid5] [raid4] [raid10] 
md1 : active raid1 vda5[0] vdb5[1]
      521920 blocks super 1.2 [2/2] [UU]

md0 : active raid1 vda1[0] vdb1[1]
      9952128 blocks super 1.2 [2/2] [UU]

unused devices: &lt;none&gt;
</code></pre>

<p>Query the status of SoftRaid1:</p>

<pre><code>root@UbuntuRaid1:/etc/initramfs-tools/conf.d# sudo mdadm --query --detail /dev/md0
/dev/md0:
        Version : 1.2
  Creation Time : Fri Jul  3 11:24:46 2015
     Raid Level : raid1
     Array Size : 9952128 (9.49 GiB 10.19 GB)
  Used Dev Size : 9952128 (9.49 GiB 10.19 GB)
   Raid Devices : 2
  Total Devices : 2
    Persistence : Superblock is persistent

    Update Time : Fri Jul  3 11:46:19 2015
          State : clean 
 Active Devices : 2
Working Devices : 2
 Failed Devices : 0
  Spare Devices : 0

           Name : UbuntuRaid1:0  (local to host UbuntuRaid1)
           UUID : bc091921:c198c219:7162e35c:bfff3c4e
         Events : 19

    Number   Major   Minor   RaidDevice State
       0     253        1        0      active sync   /dev/vda1
       1     253       17        1      active sync   /dev/vdb1
</code></pre>

<h3>Remove One Disk</h3>

<p>Remove one, and see if it could be startup.</p>

<p>Result:  <br/>
Done, it could start into the system.</p>

<pre><code>clouder@UbuntuRaid1:~$ cat /proc/mdstat 
Personalities : [linear] [multipath] [raid0] [raid1] [raid6] [raid5] [raid4] [raid10] 
md1 : active (auto-read-only) raid1 vda5[1]
      521920 blocks super 1.2 [2/1] [_U]

md0 : active raid1 vda1[1]
      9952128 blocks super 1.2 [2/1] [_U]

unused devices: &lt;none&gt;
</code></pre>

<h3>Add A New Empty Disk</h3>

<p>Add a new disk into the system, and first partition.</p>

<pre><code>$ sudo fdisk -l 

Disk /dev/vdb: 10.7 GB, 10737418240 bytes
16 heads, 63 sectors/track, 20805 cylinders, total 20971520 sectors
Units = sectors of 1 * 512 = 512 bytes
Sector size (logical/physical): 512 bytes / 512 bytes
I/O size (minimum/optimal): 512 bytes / 512 bytes
Disk identifier: 0x00000000

Disk /dev/vdb doesn't contain a valid partition table
</code></pre>

<p>Clone the partition table from the vda to the newly added partion:</p>

<pre><code>$ sudo sfdisk -d /dev/vda &gt; vda.desc
$ cat vda.desc 
$ sudo sfdisk /dev/vdb&lt;./vda.desc
</code></pre>

<p>Now Add the new disk for usage:</p>

<pre><code>clouder@UbuntuRaid1:~$ cat /proc/mdstat 
Personalities : [linear] [multipath] [raid0] [raid1] [raid6] [raid5] [raid4] [raid10] 
md1 : active (auto-read-only) raid1 vda5[1]
      521920 blocks super 1.2 [2/1] [_U]

md0 : active raid1 vda1[1]
      9952128 blocks super 1.2 [2/1] [_U]

unused devices: &lt;none&gt;
clouder@UbuntuRaid1:~$ sudo mdadm --manage /dev/md0 --add /dev/vdb1
mdadm: added /dev/vdb1
clouder@UbuntuRaid1:~$ sudo mdadm --manage /dev/md1 --add /dev/vdb5
mdadm: added /dev/vdb5
clouder@UbuntuRaid1:~$ cat /proc/mdstat 
Personalities : [linear] [multipath] [raid0] [raid1] [raid6] [raid5] [raid4] [raid10] 
md1 : active raid1 vdb5[2] vda5[1]
      521920 blocks super 1.2 [2/1] [_U]
        resync=DELAYED

md0 : active raid1 vdb1[2] vda1[1]
      9952128 blocks super 1.2 [2/1] [_U]
      [===&gt;.................]  recovery = 16.6% (1662144/9952128) finish=1.8min speed=75552K/sec

unused devices: &lt;none&gt;
</code></pre>

<h3>Known Bugs</h3>

<p>Error and Solution:</p>

<pre><code>error:  Diskfilter writes are not supported

Edit :/etc/grub.d/10_linux

Replace 'quick_boot="1"' with 'quick_boot="0"'

Then :

sudo update-grub
</code></pre>
]]></content>
  </entry>
  
  <entry>
    <title type="html"><![CDATA[Linux Tips(2)]]></title>
    <link href="http://purplepalmdash.github.io/blog/2015/06/29/linux-tips-2/"/>
    <updated>2015-06-29T09:27:17+08:00</updated>
    <id>http://purplepalmdash.github.io/blog/2015/06/29/linux-tips-2</id>
    <content type="html"><![CDATA[<h3>1. XenCenter Installation</h3>

<p>Just use your windows&rsquo;s browser point to your XenServer IP Address, Download the XenCenter, and install it.</p>

<p>Update Some tools on XenServer:</p>

<pre><code>$ vim /etc/yum.repos.d/CentOS-Base.repo
...
enabled=1
...
$ yum install -y lm_sensors
</code></pre>

<p>After installation of lm_sensors you could see more detailed information on XenServer.</p>

<h3>2. Disable Specified Repository</h3>

<p>Since citrix have no data in its repository, simply disable it.</p>

<pre><code>$ yum update --disablerepo=citrix
</code></pre>

<h3>3. Yum Shell</h3>

<pre><code>yum shell
remove ffmpeg-libpostproc
remove ffmpeg
install ffmpeg-compat
run
</code></pre>

<h3>4. Install lm_sensors In XenServer</h3>

<p>The default lm_sensors could not be insalled due to dependency errors, so we download the source code from lm_sensors website and manually build and install it:</p>

<pre><code>$ wget http://dl.lm-sensors.org/lm-sensors/releases/lm_sensors-3.4.0.tar.bz2
$ tar xzvf lm_sensors-3.4.0.tar.bz2
$ cd lm_sensors
$ yum install -y gcc make flex bison 
$ make &amp;&amp; make install
$ export PATH=/usr/local/bin:$PATH
$ sensors-detect
$ sensors
</code></pre>

<p>In 79 machine, sensors won&rsquo;t printout cpu fan, solved by:</p>

<pre><code>$ modprobe it87 force_id=0x8728
</code></pre>

<p>Or configure the modprobe.d:</p>

<pre><code>[root:/etc/modprobe.d]# cat it87.conf 
options it87 force_id=0x8603

[root:/etc/modprobe.d]# pwd
/etc/modprobe.d
</code></pre>

<h3>5. Detect an AMD Chipset</h3>

<p>First using <code>sensors-detect</code> for detecting the sensors, the result is listed as:</p>

<pre><code>Now follows a summary of the probes I have just done.

Driver `w83627ehf':
  * ISA bus, address 0x290
    Chip `Nuvoton W83677HG-I (NCT5572D/NCT6771F/NCT6772F/NCT6775F) Super IO Sensors' (confidence: 9)

Driver `k10temp' (autoloaded):
  * Chip `AMD Family 12h and 14h thermal sensors' (confidence: 9)
</code></pre>

<p>Now go to the modules directory for finding out the corresponding driver:</p>

<pre><code>[root@xenserver-WolfHunter 3.10.0+2]# find . | grep -i w83
./kernel/drivers/hwmon/w83795.ko
./kernel/drivers/hwmon/w83627hf.ko
./kernel/drivers/hwmon/w83l786ng.ko
./kernel/drivers/hwmon/w83792d.ko
./kernel/drivers/hwmon/w83l785ts.ko
./kernel/drivers/hwmon/w83791d.ko
./kernel/drivers/hwmon/w83793.ko
./kernel/drivers/hwmon/w83781d.ko
./kernel/drivers/hwmon/w83627ehf.ko
[root@xenserver-WolfHunter 3.10.0+2]# pwd
/lib/modules/3.10.0+2
[root@xenserver-WolfHunter 3.10.0+2]# modprobe w83627ehf.ko
</code></pre>

<p>Now you could detect more infos, add to automatically:</p>

<pre><code>[root@xenserver-WolfHunter modprobe.d]# cat w83627ehf.conf
#!/bin/sh 
/sbin/insmod /lib/modules/3.10.0+2/kernel/drivers/hwmon/w83627ehf.ko
</code></pre>

<h3>6. Headless Ubuntu</h3>

<p>Headless Ubuntu, for updating grub.</p>

<pre><code>Add: GRUB_RECORDFAIL_TIMEOUT = 15 in /etc/default/grub, and run "sudo update-grub". You can change the 15 to any arbitrary number of seconds that you like.
</code></pre>

<h3>7.Joggler Bootloader Configuration</h3>

<p>Notice there are 2 systems available on Joggler.</p>

<pre><code>[dash@/run/media/dash/linux-boot]$ cat grub.cfg
loadfont /unicode.pf2
terminal_output gfxterm
set timeout=5
menuentry "Ubuntu 12.04 LTS (Precise) - 3.2.32joggler1" {
  # text mode
  #linux /vmlinuz-3.2.32joggler1 root=LABEL=linux-root 3 ro text pci=routeirq
  # Graphical mode
  linux /vmlinuz-3.2.32joggler1 root=LABEL=linux-root 3 ro pci=routeirq
  initrd /initrd.img-3.2.32joggler1
}
###############Xubuntu#####################3
#menuentry "XUbuntu 12.04 LTS (Precise) - 3.2.32joggler1" {
#  linux /vmlinuz-3.2.32joggler1 root=LABEL=Xubuntu ro quiet splash 
#  initrd /initrd.img-3.2.32joggler1
}
</code></pre>

<h3>8. Use Joggler As a DigitalFrame</h3>

<pre><code>#!/bin/sh
#
# Script to run Digital Picture Frame using Feh
# drware@thewares.net
#

# Change number below to the duration, in seconds
# for each photo to be displayed
DELAY="5"

# hide the cursor after 15 seconds
#/usr/bin/unclutter -idle 15 &amp;

# Start slide show
# /usr/bin/feh --quiet --recursive --randomize --full-screen \ --slideshow-delay $DELAY /home/dash/800480/
/usr/bin/feh --hide-pointer -D $DELAY --quiet --recursive --randomize --full-screen \ --slideshow-delay $DELAY /home/dash/800480 &amp;

# Phone home and sync
# /home/dsl/frame/rsync.sh

exit 0
</code></pre>

<h3>9. Resolving git conflicts</h3>

<p>Once you installed meld or other tools, using following commands.</p>

<pre><code>$ git mergetool
</code></pre>

<h3>10. Enlarge Volume</h3>

<p>Enlarge the qemu disk via:</p>

<pre><code>$ sudo qemu-img resize abc.qcow2 +200GB
</code></pre>

<p>Enlarge the disk via following command:</p>

<pre><code>[root@fuel ~]# df -h
Filesystem            Size  Used Avail Use% Mounted on
/dev/mapper/os-root   9.6G  976M  8.1G  11% /
/dev/mapper/os-var     27G  5.4G   20G  22% /var
[root@fuel ~]# lvs
  LV           VG   Attr       LSize  Pool Origin Data%  Meta%  Move Log Cpy%Sync Convert
  root         os   -wi-ao----  9.78g                                                    
  swap         os   -wi-ao----  2.94g                                                    
  var          os   -wi-ao---- 26.66g       
</code></pre>

<p>Use gparted livecd for enlarge the disk, now you could enjoy the whole 300GiB disk size.</p>

<p>Resize the var partition:</p>

<pre><code>Disk /dev/mapper/os-var: 28.6 GB, 28621930496 bytes
255 heads, 63 sectors/track, 3479 cylinders
Units = cylinders of 16065 * 512 = 8225280 bytes
Sector size (logical/physical): 512 bytes / 512 bytes
I/O size (minimum/optimal): 512 bytes / 512 bytes
[root@fuel ~]# lvextend -L+50G /dev/mapper/os-var
  Size of logical volume os/var changed from 26.66 GiB (853 extents) to 76.66 GiB (2453 extents).
  Logical volume var successfully resized
######Reboot to gdisk iso, and resize2fs.   
# resize2fs /dev/mapper/os-var
</code></pre>

<h3>11. gpg Generation</h3>

<pre><code>$ apt-get install -y rng-tools
$ rngd -r /dev/urandom
$ gpg --gen-key
$ gpg --list-secret-keys
$ gpg-agent --homedir /home/dash/.gnupg --use-standard-socket --daemon
$ sudo apt-get install gnupg
</code></pre>
]]></content>
  </entry>
  
  <entry>
    <title type="html"><![CDATA[Use 8188eu and Hostapd for Setting Soft-AP Router]]></title>
    <link href="http://purplepalmdash.github.io/blog/2015/06/11/use-8188eu-and-hostapd-for-setting-soft-ap-router/"/>
    <updated>2015-06-11T16:25:51+08:00</updated>
    <id>http://purplepalmdash.github.io/blog/2015/06/11/use-8188eu-and-hostapd-for-setting-soft-ap-router</id>
    <content type="html"><![CDATA[<h3>HostAPD</h3>

<p>Install HostAPD via following commands:</p>

<pre><code>$ sudo apt-get autoremove hostapd
$ wget https://github.com/jenssegers/RTL8188-hostapd/archive/v2.0.tar.gz
$ tar -zxvf v2.0.tar.gz
$ cd RTL8188-hostapd-2.0/hostapd
$ sudo make
$ sudo make install
$ sudo service hostapd restart
[ ok ] Stopping advanced IEEE 802.11 management: hostapd.
[ ok ] Starting advanced IEEE 802.11 management: hostapd.
</code></pre>

<h3>dhcpd</h3>

<p>We need a dhcp server for assigning a new IP address to the clients who joins the ap:  <br/>
An example file is listed as following:</p>

<pre><code>ddns-update-style none;
ignore client-updates;
authoritative;
option local-wpad code 252 = text;

subnet
10.0.0.0 netmask 255.255.255.0 {
# --- default gateway
option routers
10.0.0.1;
# --- Netmask
option subnet-mask
255.255.255.0;
# --- Broadcast Address
option broadcast-address
10.0.0.255;
# --- Domain name servers, tells the clients which DNS servers to use.
option domain-name-servers
10.0.0.1, 8.8.8.8, 8.8.4.4;
option time-offset
0;
range 10.0.0.3 10.0.0.13;
default-lease-time 1209600;
max-lease-time 1814400;
}
</code></pre>

<h3>WLAN0 Network</h3>

<p>The WLAN0 equipment network should be configured as following:</p>

<pre><code>$ cat /etc/network/interface
# wireless wlan0
allow-hotplug wlan0
iface wlan0 inet static
address 10.0.70.1
netmask 255.255.255.0
</code></pre>

<p>So next time you reboot the computer, it will automatically get the ip address for wlan0.</p>

<h3>Enable the ip forwarding</h3>

<p>Using following 2 commands for enabling your AP.</p>

<pre><code>$ sudo iptables -t nat -A POSTROUTING -s 10.0.70.0/24 ! -d 10.0.70.0/24  -j MASQUERADE
$ sudo dhcpd wlan0
</code></pre>

<p>I add these two lines into the start file of awesome(My desktop environment).</p>
]]></content>
  </entry>
  
  <entry>
    <title type="html"><![CDATA[Chef TroubleShooting 2]]></title>
    <link href="http://purplepalmdash.github.io/blog/2015/06/08/chef-troubleshooting-2/"/>
    <updated>2015-06-08T19:43:13+08:00</updated>
    <id>http://purplepalmdash.github.io/blog/2015/06/08/chef-troubleshooting-2</id>
    <content type="html"><![CDATA[<p>The ssl checking for adding new nodes is still a horrible procedure, following shows the correct steps for adding new node:</p>

<p>On Chef Workstation, add node via its ip address rather than via its hostname:</p>

<pre><code>$ knife bootstrap 172.16.0.12 -x username_on_12 -P password_on_12 --sudo
</code></pre>

<p>The example knife.rb file should be written like following:</p>

<pre><code>current_dir = File.dirname(__FILE__)
log_level                :info
log_location             STDOUT
node_name                "nodename"
client_key               "#{current_dir}/node.pem"
validation_client_name   "nodename"
validation_key           "#{current_dir}/node_org.pem"
chef_server_url          "https://tmpChefServer/organizations/nodename"
syntax_check_cache_path  "#{ENV['HOME']}/.chef/syntaxcache"
cookbook_path            ["#{current_dir}/../cookbooks"]
</code></pre>

<p>On Chef Client, first fetching the ssl, then manually passed the verification.</p>

<pre><code>$ knife ssl fetch --config /etc/chef/client.rb
$ chef-client -l debug -S https://ChefServer/organizations/xxxxx -K /xxx/xxx/xxxxx.pem
</code></pre>

<p>On Chef Server, bootstrap again via the same command, now you could work.</p>
]]></content>
  </entry>
  
  <entry>
    <title type="html"><![CDATA[Quickly Change CentOS Networking]]></title>
    <link href="http://purplepalmdash.github.io/blog/2015/06/07/quickly-change-centos-networking/"/>
    <updated>2015-06-07T14:44:00+08:00</updated>
    <id>http://purplepalmdash.github.io/blog/2015/06/07/quickly-change-centos-networking</id>
    <content type="html"><![CDATA[<p>When adding the existing qcow2 files to a new machine, following steps needs to be done to enable the new configuration for the networking:</p>

<h3>Change udev rules</h3>

<p>Change the eth1 to eth0, and disable the previous defined eth0:</p>

<pre><code>[root@CentOSVM1 ~]# cat /etc/udev/rules.d/70-persistent-net.rules
# This file was automatically generated by the /lib/udev/write_net_rules
# program, run by the persistent-net-generator.rules rules file.
#
# You can modify it, as long as you keep each rule on a single
# line, and change only the value of the NAME= key.

# PCI device 0x1af4:0x1000 (virtio-pci)
#SUBSYSTEM=="net", ACTION=="add", DRIVERS=="?*", ATTR{address}=="52:54:00:23:14:96", ATTR{type}=="1", KERNEL=="eth*", NAME="eth0"

# PCI device 0x1af4:0x1000 (virtio-pci)
SUBSYSTEM=="net", ACTION=="add", DRIVERS=="?*", ATTR{address}=="52:54:00:bc:c6:f5", ATTR{type}=="1", KERNEL=="eth*", NAME="eth0"
</code></pre>

<h3>Change the ethernet configuration</h3>

<h4>Hostname</h4>

<p>The hostname and the gateway could be modified via:</p>

<pre><code># cat /etc/sysconfig/network
NETWORKING=yes
+ HOSTNAME=CentOSVM1
+ GATEWAY=172.16.0.1
</code></pre>

<h4>Change the IP configuration of the eth0</h4>

<pre><code>[root@CentOSVM1 ~]# cat /etc/sysconfig/network-scripts/ifcfg-eth0
DEVICE=eth0
TYPE=Ethernet
UUID=9d92e12c-54a3-404a-bd1c-ae033e8e968c
ONBOOT=yes
NM_CONTROLLED=yes
BOOTPROTO=none
+ IPADDR=172.16.0.20
PREFIX=24
GATEWAY=172.16.0.1
DNS1=114.114.114.114
DNS2=180.76.76.76
DEFROUTE=yes
IPV4_FAILURE_FATAL=yes
IPV6INIT=no
NAME="System eth0"
#HWADDR=52:54:00:23:14:96
+ HWADDR=52:54:00:BC:C6:F5
</code></pre>

<p>By now you could customize the network configuration of the CentOS using the same qcow2 disk file.</p>
]]></content>
  </entry>
  
</feed>
