<?xml version="1.0" encoding="utf-8"?>
<feed xmlns="http://www.w3.org/2005/Atom">

  <title><![CDATA[Category: Embedded | Dash]]></title>
  <link href="http://purplepalmdash.github.io/blog/categories/embedded/atom.xml" rel="self"/>
  <link href="http://purplepalmdash.github.io/"/>
  <updated>2016-02-29T21:54:20+08:00</updated>
  <id>http://purplepalmdash.github.io/</id>
  <author>
    <name><![CDATA[Dash]]></name>
    
  </author>
  <generator uri="http://octopress.org/">Octopress</generator>

  
  <entry>
    <title type="html"><![CDATA[Tips on V-USB and Arduino(3)--Others]]></title>
    <link href="http://purplepalmdash.github.io/blog/2016/02/29/tips-on-v-usb-and-arduino-3-others/"/>
    <updated>2016-02-29T11:50:09+08:00</updated>
    <id>http://purplepalmdash.github.io/blog/2016/02/29/tips-on-v-usb-and-arduino-3-others</id>
    <content type="html"><![CDATA[<h3>连线/电路</h3>

<p>不需要对电路做任何修改，仅替换arduino里的程序即可。</p>

<h3>代码</h3>

<p>代码如下:</p>

<pre><code>hid_custom_rq/
hid_data/
hid_mouse/
</code></pre>

<p>编译方法和上面一样。</p>

<p>值得注意的是, 这三个设备都是实现了HID设备，可以做到即插即用。</p>

<p><code>hid_data</code>的用法：</p>

<p>读取/写入例子:</p>

<pre><code>➜  commandline ./hidtool read
0x01 0x02 0x03 0x04 0x05 0x06 0x00 0x00 0x00 0x00 0x00 0x00 0x00 0x00 0x00 0x00
0x00 0x00 0x00 0x00 0x00 0x00 0x00 0x00 0x00 0x00 0x00 0x00 0x00 0x00 0x00 0x00
0x00 0x00 0x00 0x00 0x00 0x00 0x00 0x00 0x00 0x00 0x00 0x00 0x00 0x00 0x00 0x00
0x00 0x00 0x00 0x00 0x00 0x00 0x00 0x00 0x00 0x00 0x00 0x00 0x00 0x00 0x00 0x00
0x00 0x00 0x00 0x00 0x00 0x00 0x00 0x00 0x00 0x00 0x00 0x00 0x00 0x00 0x00 0x00
0x00 0x00 0x00 0x00 0x00 0x00 0x00 0x00 0x00 0x00 0x00 0x00 0x00 0x00 0x00 0x00
0x00 0x00 0x00 0x00 0x00 0x00 0x00 0x00 0x00 0x00 0x00 0x00 0x00 0x00 0x00 0x00
0x00 0x00 0x00 0x00 0x00 0x00 0x00 0x00 0x00 0x00 0x00 0x00 0x00 0x00 0x00 0x00
➜  commandline ./hidtool write 0x34 0x54 0x20 0x1f
➜  commandline ./hidtool read
0x34 0x54 0x20 0x1f 0x00 0x00 0x00 0x00 0x00 0x00 0x00 0x00 0x00 0x00 0x00 0x00
0x00 0x00 0x00 0x00 0x00 0x00 0x00 0x00 0x00 0x00 0x00 0x00 0x00 0x00 0x00 0x00
0x00 0x00 0x00 0x00 0x00 0x00 0x00 0x00 0x00 0x00 0x00 0x00 0x00 0x00 0x00 0x00
0x00 0x00 0x00 0x00 0x00 0x00 0x00 0x00 0x00 0x00 0x00 0x00 0x00 0x00 0x00 0x00
0x00 0x00 0x00 0x00 0x00 0x00 0x00 0x00 0x00 0x00 0x00 0x00 0x00 0x00 0x00 0x00
0x00 0x00 0x00 0x00 0x00 0x00 0x00 0x00 0x00 0x00 0x00 0x00 0x00 0x00 0x00 0x00
0x00 0x00 0x00 0x00 0x00 0x00 0x00 0x00 0x00 0x00 0x00 0x00 0x00 0x00 0x00 0x00
0x00 0x00 0x00 0x00 0x00 0x00 0x00 0x00 0x00 0x00 0x00 0x00 0x00 0x00 0x00 0x00
</code></pre>
]]></content>
  </entry>
  
  <entry>
    <title type="html"><![CDATA[Tips on V-USB and Arduino(2)--用v-usb控制LED]]></title>
    <link href="http://purplepalmdash.github.io/blog/2016/02/26/tips-on-v-usb-and-arduino-2/"/>
    <updated>2016-02-26T17:07:20+08:00</updated>
    <id>http://purplepalmdash.github.io/blog/2016/02/26/tips-on-v-usb-and-arduino-2</id>
    <content type="html"><![CDATA[<h3>参考</h3>

<p>参考链接如下(需翻墙):</p>

<p><a href="http://coopermaa2nd.blogspot.tw/2011/10/v-usb-examples-for-arduino.html">V-USB examples for Arduino</a></p>

<h3>连线图</h3>

<p>链接里的连线图如下:</p>

<p><img src="/images/image_thumb1354.png" alt="/images/image_thumb1354.png" /></p>

<p>这个图我想了很久，对比上一节里键盘的连线图对比，发现D+/D-的连线刚好是反过来的。此外就是
D-上加了一个上拉电阻， 电阻值为1.5K， 这个其实没关系，在我们的例子中，用到2.2K，是因为
我们用的参考电压是5V的。</p>

<p>对上一章我们的连线图进行修改，得出的连线图如下:</p>

<p><img src="/images/2016_02_29_10_52_38_769x625.jpg" alt="/images/2016_02_29_10_52_38_769x625.jpg" /></p>

<p>电路图如下:</p>

<p><img src="/images/2016_02_29_10_53_49_720x702.jpg" alt="/images/2016_02_29_10_53_49_720x702.jpg" /></p>

<p>上一章用到的开关可以不用拆除。</p>

<p>值得注意的是，2.2K的上拉电阻接到了5V输入。</p>

<h3>代码</h3>

<p>下载Windows版0022 Arduino，编译原帖中pde文件并上传，修改
hardware/arduino/cores/arduino/wiring.c里的:</p>

<pre><code>SIGNAL(TIMER0_OVF_vect) 
{
++++++   sei()
......
}
</code></pre>

<p>客户端程序编译:</p>

<pre><code>➜  pwd
......../custom_class/examples/custom_class_demo/commandline
➜  make clean
rm -f *.o set-led
➜  make
</code></pre>

<p>使用<code>./set-led</code>即可，编译前需要修改头文件:</p>

<pre><code>$ vim set-led.c
//#include "../firmware/requests.h"   /* custom request numbers */
//#include "../firmware/usbconfig.h"  /* device's VID/PID and names */
#include "../../../requests.h"   /* custom request numbers */
#include "../../../usbconfig.h"  /* device's VID/PID and names */
</code></pre>
]]></content>
  </entry>
  
  <entry>
    <title type="html"><![CDATA[Tips on V-USB and Arduino(1)- USB Keyboard]]></title>
    <link href="http://purplepalmdash.github.io/blog/2016/02/26/tips-on-v-usb-and-arduino-1/"/>
    <updated>2016-02-26T16:55:10+08:00</updated>
    <id>http://purplepalmdash.github.io/blog/2016/02/26/tips-on-v-usb-and-arduino-1</id>
    <content type="html"><![CDATA[<h3>参考</h3>

<p>主要参考了:</p>

<p><a href="http://www.geek-workshop.com/thread-1137-1-1.html">Arduino学习笔记A11 - Arduino模拟电脑键盘（基于AVR-USB的USB-HID设备）</a></p>

<h3>电路图</h3>

<p>安装Fritzing后，可以绘制出面包板连线图和电路图:</p>

<p><img src="/images/2016_02_26_16_57_48_761x613.jpg" alt="/images/2016_02_26_16_57_48_761x613.jpg" /></p>

<p>电路图:</p>

<p><img src="/images/2016_02_26_17_00_04_668x679.jpg" alt="/images/2016_02_26_17_00_04_668x679.jpg" /></p>

<p>注意事项:</p>

<p>电阻换成100欧也可以，原帖中是68欧电阻。  <br/>
注意齐纳二极管的极性，带有色条的一端是负极。</p>

<h3>代码</h3>

<p>值得注意的配置如下:</p>

<pre><code>#define USB_CFG_IOPORTNAME D

USB输入输出引脚使用AVR单片机的PORTD，如果改成B就是使用PORTB
#define USB_CFG_DMINUS_BIT 4

USB的D-接PORTD的第四位PD4，对应Arduino D4
#define USB_CFG_DPLUS_BIT  2

USB的D+接PORTD的第二位PD2，对应Arduino D2
#define USB_CFG_PULLUP_IOPORTNAME D

USB上拉引脚使用AVR单片机的PORTD，如果改成B就是使用PORTB
#define USB_CFG_PULLUP_BIT  5

USB的上拉电阻接PORTD的第五位PD5，对应Arduino  D5
</code></pre>

<p>在Arduino1.0.5上编译/配置都没有问题，最好在0022～1.05的版本范围内进行实验。</p>

<p>首先通过USBasp线写入编译后的程序，而后换上我们添加的USB线缆后，点击按键，每次即可输出
<code>hello world</code>字符串。</p>
]]></content>
  </entry>
  
  <entry>
    <title type="html"><![CDATA[Playing e-Buddy]]></title>
    <link href="http://purplepalmdash.github.io/blog/2016/02/23/playing-e-buddy/"/>
    <updated>2016-02-23T09:36:58+08:00</updated>
    <id>http://purplepalmdash.github.io/blog/2016/02/23/playing-e-buddy</id>
    <content type="html"><![CDATA[<h3>Python Library</h3>

<p>Clone the repository from google Code to github, then clone it to local:  <br/>
This library could makes the ebuddy dance and sing.</p>

<pre><code>$ git clone git@github.com:purplepalmdash/pybuddy-dx.git
</code></pre>

<h3>Environment</h3>

<p>Since ArchLinux runs python3, we need to create a virtualenv for running python2.7</p>

<pre><code>$ virtualenv2 venv2 --python=python2.7
 ✗ . ~/venv2/bin/activate
(venv2) ➜  _posts git:(master) ✗ python
Python 2.7.11 (default, Dec  6 2015, 15:43:46) 
[GCC 5.2.0] on linux2
$ pip install pyusb
</code></pre>

<h3>Modification</h3>

<p>Modify the source code, mainly change the following lines:</p>

<pre><code>    #except NoBuddyException, e:
    except NoBuddyException:
</code></pre>

<p>Start the ebuddy via:</p>

<pre><code>$ python pybuddyDX1.py
2016-02-23 15:51:39,242 INFO     Searching e-buddy...
2016-02-23 15:51:39,399 INFO     DX e-buddy found!
2016-02-23 15:51:39,962 INFO     Starting daemon...
</code></pre>

<p>Let buddy runs via:</p>

<pre><code># echo 03 | nc -q0 -u 127.0.0.1 8888
# echo 04 | nc -q0 -u 127.0.0.1 8888
.....
</code></pre>
]]></content>
  </entry>
  
  <entry>
    <title type="html"><![CDATA[USB Cute Things]]></title>
    <link href="http://purplepalmdash.github.io/blog/2016/02/19/usb-cute-things/"/>
    <updated>2016-02-19T02:04:42+08:00</updated>
    <id>http://purplepalmdash.github.io/blog/2016/02/19/usb-cute-things</id>
    <content type="html"><![CDATA[<p>Funny Things on Taobao:</p>

<pre><code>USB新奇特 带HUB HUB USB邮件通知提醒器 USB Webmail Notifier 
https://item.taobao.com/item.htm?spm=a230r.1.14.7.1r483a&amp;id=19165960441&amp;ns=1&amp;abbucket=5#detail

 Dream Cheeky USB Friends Alert 邮件消息提醒器
还用老旧的邮箱？来，一起怀个旧吧。这个小东西能帮你提醒邮件状态，支持Facebook、Twitter、
MSN的消息呢，哦，差点忘记了，只有MSN你偶尔可以玩一下。
https://item.taobao.com/item.htm?spm=a230r.1.14.13.1r483a&amp;id=523240173722&amp;ns=1&amp;abbucket=5#detail


i-buddy:
https://item.taobao.com/item.htm?spm=a230r.1.14.1.aWRsP6&amp;id=5177828698&amp;ns=1&amp;abbucket=5#detail
https://2.taobao.com/item.htm?id=521593051559&amp;spm=a230r.1.14.12.CcgnsG&amp;ns=1&amp;abbucket=5#detail

 USB Webmail Notifer USB邮件通知器 
USB Webmail Notifer USB邮件通知器
https://item.taobao.com/item.htm?spm=a230r.1.14.36.BVZqTi&amp;id=2719139321&amp;ns=1&amp;abbucket=5#detail




HX USB温度计TEMPer 机房/库房 温度计 环境监测 防水 邮件提醒 
https://detail.tmall.com/item.htm?spm=a230r.1.14.4.BVZqTi&amp;id=40327431222&amp;cm_id=140105335569ed55e27b&amp;abbucket=5

taobao ebuddy
http://www.computersolutions.cn/blog/category/tao-bao/


AIDA64 On Digital Frame
http://bbs.yleee.com.cn/thread-30787-1-1.html
</code></pre>
]]></content>
  </entry>
  
</feed>
