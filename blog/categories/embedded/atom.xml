<?xml version="1.0" encoding="utf-8"?>
<feed xmlns="http://www.w3.org/2005/Atom">

  <title><![CDATA[Category: Embedded | Dash]]></title>
  <link href="http://purplepalmdash.github.io/blog/categories/embedded/atom.xml" rel="self"/>
  <link href="http://purplepalmdash.github.io/"/>
  <updated>2016-02-25T22:48:14+08:00</updated>
  <id>http://purplepalmdash.github.io/</id>
  <author>
    <name><![CDATA[Dash]]></name>
    
  </author>
  <generator uri="http://octopress.org/">Octopress</generator>

  
  <entry>
    <title type="html"><![CDATA[Playing e-Buddy]]></title>
    <link href="http://purplepalmdash.github.io/blog/2016/02/23/playing-e-buddy/"/>
    <updated>2016-02-23T09:36:58+08:00</updated>
    <id>http://purplepalmdash.github.io/blog/2016/02/23/playing-e-buddy</id>
    <content type="html"><![CDATA[<h3>Python Library</h3>

<p>Clone the repository from google Code to github, then clone it to local:  <br/>
This library could makes the ebuddy dance and sing.</p>

<pre><code>$ git clone git@github.com:purplepalmdash/pybuddy-dx.git
</code></pre>

<h3>Environment</h3>

<p>Since ArchLinux runs python3, we need to create a virtualenv for running python2.7</p>

<pre><code>$ virtualenv2 venv2 --python=python2.7
 ✗ . ~/venv2/bin/activate
(venv2) ➜  _posts git:(master) ✗ python
Python 2.7.11 (default, Dec  6 2015, 15:43:46) 
[GCC 5.2.0] on linux2
$ pip install pyusb
</code></pre>

<h3>Modification</h3>

<p>Modify the source code, mainly change the following lines:</p>

<pre><code>    #except NoBuddyException, e:
    except NoBuddyException:
</code></pre>

<p>Start the ebuddy via:</p>

<pre><code>$ python pybuddyDX1.py
2016-02-23 15:51:39,242 INFO     Searching e-buddy...
2016-02-23 15:51:39,399 INFO     DX e-buddy found!
2016-02-23 15:51:39,962 INFO     Starting daemon...
</code></pre>

<p>Let buddy runs via:</p>

<pre><code># echo 03 | nc -q0 -u 127.0.0.1 8888
# echo 04 | nc -q0 -u 127.0.0.1 8888
.....
</code></pre>
]]></content>
  </entry>
  
  <entry>
    <title type="html"><![CDATA[USB Cute Things]]></title>
    <link href="http://purplepalmdash.github.io/blog/2016/02/19/usb-cute-things/"/>
    <updated>2016-02-19T02:04:42+08:00</updated>
    <id>http://purplepalmdash.github.io/blog/2016/02/19/usb-cute-things</id>
    <content type="html"><![CDATA[<p>Funny Things on Taobao:</p>

<pre><code>USB新奇特 带HUB HUB USB邮件通知提醒器 USB Webmail Notifier 
https://item.taobao.com/item.htm?spm=a230r.1.14.7.1r483a&amp;id=19165960441&amp;ns=1&amp;abbucket=5#detail

 Dream Cheeky USB Friends Alert 邮件消息提醒器
还用老旧的邮箱？来，一起怀个旧吧。这个小东西能帮你提醒邮件状态，支持Facebook、Twitter、
MSN的消息呢，哦，差点忘记了，只有MSN你偶尔可以玩一下。
https://item.taobao.com/item.htm?spm=a230r.1.14.13.1r483a&amp;id=523240173722&amp;ns=1&amp;abbucket=5#detail


i-buddy:
https://item.taobao.com/item.htm?spm=a230r.1.14.1.aWRsP6&amp;id=5177828698&amp;ns=1&amp;abbucket=5#detail
https://2.taobao.com/item.htm?id=521593051559&amp;spm=a230r.1.14.12.CcgnsG&amp;ns=1&amp;abbucket=5#detail

 USB Webmail Notifer USB邮件通知器 
USB Webmail Notifer USB邮件通知器
https://item.taobao.com/item.htm?spm=a230r.1.14.36.BVZqTi&amp;id=2719139321&amp;ns=1&amp;abbucket=5#detail




HX USB温度计TEMPer 机房/库房 温度计 环境监测 防水 邮件提醒 
https://detail.tmall.com/item.htm?spm=a230r.1.14.4.BVZqTi&amp;id=40327431222&amp;cm_id=140105335569ed55e27b&amp;abbucket=5

taobao ebuddy
http://www.computersolutions.cn/blog/category/tao-bao/


AIDA64 On Digital Frame
http://bbs.yleee.com.cn/thread-30787-1-1.html
</code></pre>
]]></content>
  </entry>
  
  <entry>
    <title type="html"><![CDATA[Hacking SteelSeries Engine 3 USB Mouse Under Linux]]></title>
    <link href="http://purplepalmdash.github.io/blog/2016/02/04/hacking-steelseries-engine-3-usb-mouse-under-linux/"/>
    <updated>2016-02-04T02:36:19+08:00</updated>
    <id>http://purplepalmdash.github.io/blog/2016/02/04/hacking-steelseries-engine-3-usb-mouse-under-linux</id>
    <content type="html"><![CDATA[<h3>Background</h3>

<p>Since SteelSeries Engine 3 USB mouse have only driver for Windows/MAC, I want to enable
the changing color under Linux, following is the hacking steps.</p>

<h3>Catching Packets</h3>

<p>Using Wireshark for capturing the USB Packages of mouse, at the meantime, use another
mouse for clicking the setting color area, to capture the setting color events, After
this we sent the captured packets to Linux machine for analysing.</p>

<p><img src="/images/2016_02_03_18_38_33_587x367.jpg" alt="/images/2016_02_03_18_38_33_587x367.jpg" /></p>

<h3>Setting Color</h3>

<p>With the filter and continue for anlysing, found each setting step includes 3 steps.</p>

<p>Result:</p>

<pre><code>44000000060000005c00000000000000db2a05007169cdb73c0000003c000000
44000000060000005c00000000000000db2a0500036a6db93c0000003c000000
44000000060000005c00000000000000db2a05005b3943ba3c0000003c000000
44000000060000005c00000000000000db2a05002b5930bb3c0000003c000000
44000000060000005c00000000000000db2a05005f51e1bb3c0000003c000000
</code></pre>

<p>Each time&rsquo;s color listed as(R,G,B):</p>

<pre><code>10ad73
2a10ad
ad8e10
ad3c10
ad109b
</code></pre>

<p>cleaning result:</p>

<pre><code>7169cdb7
036a6db9
5b3943ba
2b5930bb
5f51e1bb
</code></pre>

<p>Seems no relationship? need to verify the usb protocol mechanism.</p>
]]></content>
  </entry>
  
  <entry>
    <title type="html"><![CDATA[Bluetooth NAP How-To]]></title>
    <link href="http://purplepalmdash.github.io/blog/2015/12/05/bluetooth-nap-how-to/"/>
    <updated>2015-12-05T20:03:41+08:00</updated>
    <id>http://purplepalmdash.github.io/blog/2015/12/05/bluetooth-nap-how-to</id>
    <content type="html"><![CDATA[<h3>Notice</h3>

<p>Notice, this way is only for Bluez-5!!!!</p>

<p>Refers to:  <br/>
<a href="https://wiki.gentoo.org/wiki/Bluetooth_Network_Aggregation_Point">https://wiki.gentoo.org/wiki/Bluetooth_Network_Aggregation_Point</a> <br/>
<a href="https://wiki.gentoo.org/wiki/Bluetooth">https://wiki.gentoo.org/wiki/Bluetooth</a>   <br/>
<a href="http://blog.fraggod.net/2015/03/28/bluetooth-pan-network-setup-with-bluez-5x.html">http://blog.fraggod.net/2015/03/28/bluetooth-pan-network-setup-with-bluez-5x.html</a></p>

<p>Bluez-4 could be much more easier via <code>pand</code>. For example, in ubuntu you could
setup the bluetooth PAN via:</p>

<p><a href="http://blog.sumostyle.net/2009/11/ubuntu-tethering-via-bluetooth-pan/">http://blog.sumostyle.net/2009/11/ubuntu-tethering-via-bluetooth-pan/</a></p>

<h3>RF-KILL</h3>

<p>Use rfkill for unblock the soft-blocked bluetooth adapter:</p>

<pre><code>[root@xxxx dash]# rfkill list bluetooth
2: hp-bluetooth: Bluetooth
        Soft blocked: yes
        Hard blocked: no
5: hci1: Bluetooth
        Soft blocked: yes
        Hard blocked: no
[root@xxxx dash]# rfkill unblock bluetooth

# rfkill list bluetooth
2: hp-bluetooth: Bluetooth
        Soft blocked: no
        Hard blocked: no
5: hci1: Bluetooth
        Soft blocked: no
        Hard blocked: no
</code></pre>

<h3>bluetoothctl</h3>

<p>Use bluetoothctl for configurating the bluetooth adapter:</p>

<pre><code>[root@xxxx ]# bluetoothctl 
[NEW] Controller 40:2C:xx:xx:xx:xx xxxx #2 [default]
[bluetooth]# power on
Changing power on succeeded
[bluetooth]# discoverable on
Changing discoverable on succeeded
[bluetooth]# agent on
Agent registered
[bluetooth]# scan on
</code></pre>

<h3>PAN</h3>

<p>Refers to:  <br/>
<a href="http://blog.fraggod.net/2015/03/28/bluetooth-pan-network-setup-with-bluez-5x.html">http://blog.fraggod.net/2015/03/28/bluetooth-pan-network-setup-with-bluez-5x.html</a></p>

<pre><code>--- machine-1
% bluetoothctl
[NEW] Controller 00:02:72:XX:XX:XX malediction [default]
[bluetooth]# power on
Changing power on succeeded
[CHG] Controller 00:02:72:XX:XX:XX Powered: yes
[bluetooth]# discoverable on
Changing discoverable on succeeded
[CHG] Controller 00:02:72:XX:XX:XX Discoverable: yes
[bluetooth]# agent on
...

--- machine-2 (snipped)
% bluetoothctl
[NEW] Controller 00:02:72:YY:YY:YY rpbox [default]
[bluetooth]# power on
[bluetooth]# scan on
[bluetooth]# agent on
[bluetooth]# pair 00:02:72:XX:XX:XX
[bluetooth]# trust 00:02:72:XX:XX:XX
</code></pre>

<p>Then Download the script from:</p>

<p><a href="https://github.com/mk-fg/fgtk/blob/master/bt-pan">https://github.com/mk-fg/fgtk/blob/master/bt-pan</a></p>

<p>This <code>bt-pan</code> will setup both the server and the client.</p>

<p>In Server:</p>

<pre><code>$ bt-pan --debug server $br
</code></pre>

<p>While the <code>$br</code> could be setup via following command(Take Gentoo for example):</p>

<pre><code># vim /etc/conf.d/net

...
# Comment out this line, and add the following lines:
#config_eth0="dhcp"
config_eth0="null"
bridge_br1="eth0"
config_br1="dhcp"
# Next two lines, to make two values work (keep setfd before stp):
brctl_br1="setfd 1
stp on"
...
# ln -s net.lo /etc/init.d/net.br1
# rc-service net.eth0 stop &amp;&amp; rc-service net.br1 start
# rc-update add net.br1 default 
</code></pre>

<p>In the Client side, do following:</p>

<pre><code>$ bt-pan client 00:02:72:XX:XX:XX
</code></pre>

<p>Now check the both client and server, you will find <code>bnep0</code> interface has been
created, you could see it via <code>ifconfig bnep0</code>.</p>

<p>Assign the same IP network range address to the client side, as in the br1
side in server. After that you could ping each other via bluetooth!</p>
]]></content>
  </entry>
  
  <entry>
    <title type="html"><![CDATA[FRDM-KL02Z Tips(1)]]></title>
    <link href="http://purplepalmdash.github.io/blog/2015/11/05/frdm-kl02z-tips-1/"/>
    <updated>2015-11-05T09:53:38+08:00</updated>
    <id>http://purplepalmdash.github.io/blog/2015/11/05/frdm-kl02z-tips-1</id>
    <content type="html"><![CDATA[<p>Reference Material: <br/>
<a href="http://www.freescale.com/zh-Hans/products/arm-processors/kinetis-cortex-m/l-series/freedom-development-platform-for-the-kinetis-kl02-family:FRDM-KL02Z?tab=In-Depth_Tab">http://www.freescale.com/zh-Hans/products/arm-processors/kinetis-cortex-m/l-series/freedom-development-platform-for-the-kinetis-kl02-family:FRDM-KL02Z?tab=In-Depth_Tab</a></p>

<h3>Minicom</h3>

<p>115200/data-bit: 8/ no parity/stop bit 1.</p>
]]></content>
  </entry>
  
</feed>
