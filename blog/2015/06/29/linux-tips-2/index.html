
<!DOCTYPE html>
<!--[if IEMobile 7 ]><html class="no-js iem7"><![endif]-->
<!--[if lt IE 9]><html class="no-js lte-ie8"><![endif]-->
<!--[if (gt IE 8)|(gt IEMobile 7)|!(IEMobile)|!(IE)]><!--><html class="no-js" lang="en"><!--<![endif]-->
<head>
  <meta charset="utf-8">
  <title>Linux Tips(2) - Dash</title>
  <meta name="author" content="Dash">

  
  <meta name="description" content="1. XenCenter Installation Just use your windows&rsquo;s browser point to your XenServer IP Address, Download the XenCenter, and install it. Update &hellip;">
  

  <!-- http://t.co/dKP3o1e -->
  <meta name="HandheldFriendly" content="True">
  <meta name="MobileOptimized" content="320">
  <meta name="viewport" content="width=device-width, initial-scale=1">

  
  <link rel="canonical" href="http://purplepalmdash.github.io/blog/2015/06/29/linux-tips-2">
  <link href="/favicon.ico" rel="icon">
  <link href="/stylesheets/screen.css" media="screen, projection" rel="stylesheet" type="text/css">
  <link href="/purplepalmdash/atom.xml" rel="alternate" title="Dash" type="application/atom+xml">
  <script src="/javascripts/modernizr-2.0.js"></script>
  <script src="//libs.useso.com/js/jquery/1.9.1/jquery.min.js"></script>
  <script>!window.jQuery && document.write(unescape('%3Cscript src="./javascripts/libs/jquery.min.js"%3E%3C/script%3E'))</script>
  <script src="/javascripts/octopress.js" type="text/javascript"></script>
  <!--Fonts from Google"s Web font directory at http://google.com/webfonts -->
<link href="//fonts.googleapis.com/css?family=PT+Serif:regular,italic,bold,bolditalic" rel="stylesheet" type="text/css">
<link href="//fonts.googleapis.com/css?family=PT+Sans:regular,italic,bold,bolditalic" rel="stylesheet" type="text/css">

  

</head>

<body    class="collapse-sidebar sidebar-footer" >
  <header role="banner"><hgroup>
  <h1><a href="/">Dash</a></h1>
  
    <h2>Get busy living, or get busy dying.</h2>
  
</hgroup>

</header>
  <nav role="navigation"><ul class="subscription" data-subscription="rss">
  <li><a href="/purplepalmdash/atom.xml" rel="subscribe-rss" title="subscribe via RSS">RSS</a></li>
  
</ul>
  
<form action="https://www.google.com/search" method="get">
  <fieldset role="search">
    <input type="hidden" name="q" value="site:purplepalmdash.github.io" />
    <input class="search" type="text" name="q" results="0" placeholder="Search"/>
  </fieldset>
</form>
  
<ul class="main-navigation">
  <li><a href="/">Blog</a></li>
  <li><a href="/blog/archives">Archives</a></li>
</ul>

</nav>
  <div id="main">
    <div id="content">
      <div>
<article class="hentry" role="article">
  
  <header>
    
      <h1 class="entry-title">Linux Tips(2)</h1>
    
    
      <p class="meta">
        




<time class='entry-date' datetime='2015-06-29T09:27:17+08:00'><span class='date'><span class='date-month'>Jun</span> <span class='date-day'>29</span><span class='date-suffix'>th</span>, <span class='date-year'>2015</span></span> <span class='time'>9:27 am</span></time>
        
         | <a href="#disqus_thread">Comments</a>
        
      </p>
    
  </header>


<div class="entry-content"><h3>1. XenCenter Installation</h3>

<p>Just use your windows&rsquo;s browser point to your XenServer IP Address, Download the XenCenter, and install it.</p>

<p>Update Some tools on XenServer:</p>

<figure class='code'><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
<span class='line-number'>3</span>
<span class='line-number'>4</span>
<span class='line-number'>5</span>
</pre></td><td class='code'><pre><code class=''><span class='line'>$ vim /etc/yum.repos.d/CentOS-Base.repo
</span><span class='line'>...
</span><span class='line'>enabled=1
</span><span class='line'>...
</span><span class='line'>$ yum install -y lm_sensors</span></code></pre></td></tr></table></div></figure>


<p>After installation of lm_sensors you could see more detailed information on XenServer.</p>

<h3>2. Disable Specified Repository</h3>

<p>Since citrix have no data in its repository, simply disable it.</p>

<figure class='code'><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
</pre></td><td class='code'><pre><code class=''><span class='line'>$ yum update --disablerepo=citrix</span></code></pre></td></tr></table></div></figure>


<h3>3. Yum Shell</h3>

<figure class='code'><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
<span class='line-number'>3</span>
<span class='line-number'>4</span>
<span class='line-number'>5</span>
</pre></td><td class='code'><pre><code class=''><span class='line'>yum shell
</span><span class='line'>remove ffmpeg-libpostproc
</span><span class='line'>remove ffmpeg
</span><span class='line'>install ffmpeg-compat
</span><span class='line'>run</span></code></pre></td></tr></table></div></figure>


<h3>4. Install lm_sensors In XenServer</h3>

<p>The default lm_sensors could not be insalled due to dependency errors, so we download the source code from lm_sensors website and manually build and install it:</p>

<figure class='code'><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
<span class='line-number'>3</span>
<span class='line-number'>4</span>
<span class='line-number'>5</span>
<span class='line-number'>6</span>
<span class='line-number'>7</span>
<span class='line-number'>8</span>
</pre></td><td class='code'><pre><code class=''><span class='line'>$ wget http://dl.lm-sensors.org/lm-sensors/releases/lm_sensors-3.4.0.tar.bz2
</span><span class='line'>$ tar xzvf lm_sensors-3.4.0.tar.bz2
</span><span class='line'>$ cd lm_sensors
</span><span class='line'>$ yum install -y gcc make flex bison 
</span><span class='line'>$ make && make install
</span><span class='line'>$ export PATH=/usr/local/bin:$PATH
</span><span class='line'>$ sensors-detect
</span><span class='line'>$ sensors</span></code></pre></td></tr></table></div></figure>


<p>In 79 machine, sensors won&rsquo;t printout cpu fan, solved by:</p>

<figure class='code'><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
</pre></td><td class='code'><pre><code class=''><span class='line'>$ modprobe it87 force_id=0x8728</span></code></pre></td></tr></table></div></figure>


<p>Or configure the modprobe.d:</p>

<figure class='code'><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
<span class='line-number'>3</span>
<span class='line-number'>4</span>
<span class='line-number'>5</span>
</pre></td><td class='code'><pre><code class=''><span class='line'>[root:/etc/modprobe.d]# cat it87.conf 
</span><span class='line'>options it87 force_id=0x8603
</span><span class='line'>
</span><span class='line'>[root:/etc/modprobe.d]# pwd
</span><span class='line'>/etc/modprobe.d</span></code></pre></td></tr></table></div></figure>


<h3>5. Detect an AMD Chipset</h3>

<p>First using <code>sensors-detect</code> for detecting the sensors, the result is listed as:</p>

<figure class='code'><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
<span class='line-number'>3</span>
<span class='line-number'>4</span>
<span class='line-number'>5</span>
<span class='line-number'>6</span>
<span class='line-number'>7</span>
<span class='line-number'>8</span>
</pre></td><td class='code'><pre><code class=''><span class='line'>Now follows a summary of the probes I have just done.
</span><span class='line'>
</span><span class='line'>Driver `w83627ehf':
</span><span class='line'>  * ISA bus, address 0x290
</span><span class='line'>    Chip `Nuvoton W83677HG-I (NCT5572D/NCT6771F/NCT6772F/NCT6775F) Super IO Sensors' (confidence: 9)
</span><span class='line'>
</span><span class='line'>Driver `k10temp' (autoloaded):
</span><span class='line'>  * Chip `AMD Family 12h and 14h thermal sensors' (confidence: 9)</span></code></pre></td></tr></table></div></figure>


<p>Now go to the modules directory for finding out the corresponding driver:</p>

<figure class='code'><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
<span class='line-number'>3</span>
<span class='line-number'>4</span>
<span class='line-number'>5</span>
<span class='line-number'>6</span>
<span class='line-number'>7</span>
<span class='line-number'>8</span>
<span class='line-number'>9</span>
<span class='line-number'>10</span>
<span class='line-number'>11</span>
<span class='line-number'>12</span>
<span class='line-number'>13</span>
</pre></td><td class='code'><pre><code class=''><span class='line'>[root@xenserver-WolfHunter 3.10.0+2]# find . | grep -i w83
</span><span class='line'>./kernel/drivers/hwmon/w83795.ko
</span><span class='line'>./kernel/drivers/hwmon/w83627hf.ko
</span><span class='line'>./kernel/drivers/hwmon/w83l786ng.ko
</span><span class='line'>./kernel/drivers/hwmon/w83792d.ko
</span><span class='line'>./kernel/drivers/hwmon/w83l785ts.ko
</span><span class='line'>./kernel/drivers/hwmon/w83791d.ko
</span><span class='line'>./kernel/drivers/hwmon/w83793.ko
</span><span class='line'>./kernel/drivers/hwmon/w83781d.ko
</span><span class='line'>./kernel/drivers/hwmon/w83627ehf.ko
</span><span class='line'>[root@xenserver-WolfHunter 3.10.0+2]# pwd
</span><span class='line'>/lib/modules/3.10.0+2
</span><span class='line'>[root@xenserver-WolfHunter 3.10.0+2]# modprobe w83627ehf.ko</span></code></pre></td></tr></table></div></figure>


<p>Now you could detect more infos, add to automatically:</p>

<figure class='code'><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
<span class='line-number'>3</span>
</pre></td><td class='code'><pre><code class=''><span class='line'>[root@xenserver-WolfHunter modprobe.d]# cat w83627ehf.conf
</span><span class='line'>#!/bin/sh 
</span><span class='line'>/sbin/insmod /lib/modules/3.10.0+2/kernel/drivers/hwmon/w83627ehf.ko</span></code></pre></td></tr></table></div></figure>


<h3>6. Headless Ubuntu</h3>

<p>Headless Ubuntu, for updating grub.</p>

<figure class='code'><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
</pre></td><td class='code'><pre><code class=''><span class='line'>Add: GRUB_RECORDFAIL_TIMEOUT = 15 in /etc/default/grub, and run "sudo update-grub". You can change the 15 to any arbitrary number of seconds that you like.</span></code></pre></td></tr></table></div></figure>


<h3>7.Joggler Bootloader Configuration</h3>

<p>Notice there are 2 systems available on Joggler.</p>

<figure class='code'><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
<span class='line-number'>3</span>
<span class='line-number'>4</span>
<span class='line-number'>5</span>
<span class='line-number'>6</span>
<span class='line-number'>7</span>
<span class='line-number'>8</span>
<span class='line-number'>9</span>
<span class='line-number'>10</span>
<span class='line-number'>11</span>
<span class='line-number'>12</span>
<span class='line-number'>13</span>
<span class='line-number'>14</span>
<span class='line-number'>15</span>
<span class='line-number'>16</span>
</pre></td><td class='code'><pre><code class=''><span class='line'>[dash@/run/media/dash/linux-boot]$ cat grub.cfg
</span><span class='line'>loadfont /unicode.pf2
</span><span class='line'>terminal_output gfxterm
</span><span class='line'>set timeout=5
</span><span class='line'>menuentry "Ubuntu 12.04 LTS (Precise) - 3.2.32joggler1" {
</span><span class='line'>  # text mode
</span><span class='line'>  #linux /vmlinuz-3.2.32joggler1 root=LABEL=linux-root 3 ro text pci=routeirq
</span><span class='line'>  # Graphical mode
</span><span class='line'>  linux /vmlinuz-3.2.32joggler1 root=LABEL=linux-root 3 ro pci=routeirq
</span><span class='line'>  initrd /initrd.img-3.2.32joggler1
</span><span class='line'>}
</span><span class='line'>###############Xubuntu#####################3
</span><span class='line'>#menuentry "XUbuntu 12.04 LTS (Precise) - 3.2.32joggler1" {
</span><span class='line'>#  linux /vmlinuz-3.2.32joggler1 root=LABEL=Xubuntu ro quiet splash 
</span><span class='line'>#  initrd /initrd.img-3.2.32joggler1
</span><span class='line'>}</span></code></pre></td></tr></table></div></figure>


<h3>8. Use Joggler As a DigitalFrame</h3>

<figure class='code'><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
<span class='line-number'>3</span>
<span class='line-number'>4</span>
<span class='line-number'>5</span>
<span class='line-number'>6</span>
<span class='line-number'>7</span>
<span class='line-number'>8</span>
<span class='line-number'>9</span>
<span class='line-number'>10</span>
<span class='line-number'>11</span>
<span class='line-number'>12</span>
<span class='line-number'>13</span>
<span class='line-number'>14</span>
<span class='line-number'>15</span>
<span class='line-number'>16</span>
<span class='line-number'>17</span>
<span class='line-number'>18</span>
<span class='line-number'>19</span>
<span class='line-number'>20</span>
<span class='line-number'>21</span>
</pre></td><td class='code'><pre><code class=''><span class='line'>#!/bin/sh
</span><span class='line'>#
</span><span class='line'># Script to run Digital Picture Frame using Feh
</span><span class='line'># drware@thewares.net
</span><span class='line'>#
</span><span class='line'>
</span><span class='line'># Change number below to the duration, in seconds
</span><span class='line'># for each photo to be displayed
</span><span class='line'>DELAY="5"
</span><span class='line'>
</span><span class='line'># hide the cursor after 15 seconds
</span><span class='line'>#/usr/bin/unclutter -idle 15 &
</span><span class='line'>
</span><span class='line'># Start slide show
</span><span class='line'># /usr/bin/feh --quiet --recursive --randomize --full-screen \ --slideshow-delay $DELAY /home/dash/800480/
</span><span class='line'>/usr/bin/feh --hide-pointer -D $DELAY --quiet --recursive --randomize --full-screen \ --slideshow-delay $DELAY /home/dash/800480 &
</span><span class='line'>
</span><span class='line'># Phone home and sync
</span><span class='line'># /home/dsl/frame/rsync.sh
</span><span class='line'>
</span><span class='line'>exit 0</span></code></pre></td></tr></table></div></figure>


<h3>9. Resolving git conflicts</h3>

<p>Once you installed meld or other tools, using following commands.</p>

<figure class='code'><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
</pre></td><td class='code'><pre><code class=''><span class='line'>$ git mergetool</span></code></pre></td></tr></table></div></figure>


<h3>10. Enlarge Volume</h3>

<p>Enlarge the qemu disk via:</p>

<figure class='code'><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
</pre></td><td class='code'><pre><code class=''><span class='line'>$ sudo qemu-img resize abc.qcow2 +200GB</span></code></pre></td></tr></table></div></figure>


<p>Enlarge the disk via following command:</p>

<figure class='code'><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
<span class='line-number'>3</span>
<span class='line-number'>4</span>
<span class='line-number'>5</span>
<span class='line-number'>6</span>
<span class='line-number'>7</span>
<span class='line-number'>8</span>
<span class='line-number'>9</span>
<span class='line-number'>10</span>
</pre></td><td class='code'><pre><code class=''><span class='line'>[root@fuel ~]# df -h
</span><span class='line'>Filesystem            Size  Used Avail Use% Mounted on
</span><span class='line'>/dev/mapper/os-root   9.6G  976M  8.1G  11% /
</span><span class='line'>/dev/mapper/os-var     27G  5.4G   20G  22% /var
</span><span class='line'>[root@fuel ~]# lvs
</span><span class='line'>  LV           VG   Attr       LSize  Pool Origin Data%  Meta%  Move Log Cpy%Sync Convert
</span><span class='line'>  root         os   -wi-ao----  9.78g                                                    
</span><span class='line'>  swap         os   -wi-ao----  2.94g                                                    
</span><span class='line'>  var          os   -wi-ao---- 26.66g       
</span><span class='line'> </span></code></pre></td></tr></table></div></figure>


<p>Use gparted livecd for enlarge the disk, now you could enjoy the whole 300GiB disk size.</p>

<p>Resize the var partition:</p>

<figure class='code'><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
<span class='line-number'>3</span>
<span class='line-number'>4</span>
<span class='line-number'>5</span>
<span class='line-number'>6</span>
<span class='line-number'>7</span>
<span class='line-number'>8</span>
<span class='line-number'>9</span>
<span class='line-number'>10</span>
</pre></td><td class='code'><pre><code class=''><span class='line'>Disk /dev/mapper/os-var: 28.6 GB, 28621930496 bytes
</span><span class='line'>255 heads, 63 sectors/track, 3479 cylinders
</span><span class='line'>Units = cylinders of 16065 * 512 = 8225280 bytes
</span><span class='line'>Sector size (logical/physical): 512 bytes / 512 bytes
</span><span class='line'>I/O size (minimum/optimal): 512 bytes / 512 bytes
</span><span class='line'>[root@fuel ~]# lvextend -L+50G /dev/mapper/os-var
</span><span class='line'>  Size of logical volume os/var changed from 26.66 GiB (853 extents) to 76.66 GiB (2453 extents).
</span><span class='line'>  Logical volume var successfully resized
</span><span class='line'>######Reboot to gdisk iso, and resize2fs.   
</span><span class='line'># resize2fs /dev/mapper/os-var</span></code></pre></td></tr></table></div></figure>


<h3>11. gpg Generation</h3>

<figure class='code'><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
<span class='line-number'>3</span>
<span class='line-number'>4</span>
<span class='line-number'>5</span>
<span class='line-number'>6</span>
</pre></td><td class='code'><pre><code class=''><span class='line'>$ apt-get install -y rng-tools
</span><span class='line'>$ rngd -r /dev/urandom
</span><span class='line'>$ gpg --gen-key
</span><span class='line'>$ gpg --list-secret-keys
</span><span class='line'>$ gpg-agent --homedir /home/dash/.gnupg --use-standard-socket --daemon
</span><span class='line'>$ sudo apt-get install gnupg</span></code></pre></td></tr></table></div></figure>


<h3>12. Syslogd related</h3>

<p>Redirect bash script&rsquo;s output to syslogd:   <br/>
<a href="http://urbanautomaton.com/blog/2014/09/09/redirecting-bash-script-output-to-syslog/">http://urbanautomaton.com/blog/2014/09/09/redirecting-bash-script-output-to-syslog/</a></p>

<p>Then limit the syslogd activity:</p>

<p>via logrotate, syslogd don&rsquo;t care about the log file size.</p>

<figure class='code'><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
<span class='line-number'>3</span>
<span class='line-number'>4</span>
<span class='line-number'>5</span>
<span class='line-number'>6</span>
<span class='line-number'>7</span>
</pre></td><td class='code'><pre><code class=''><span class='line'>So in the end the top portion of my /etc/logrotate.conf file looks like this:
</span><span class='line'>
</span><span class='line'>size 250M
</span><span class='line'>rotate 2
</span><span class='line'>create
</span><span class='line'>#compress
</span><span class='line'>include /etc/logrotate.d</span></code></pre></td></tr></table></div></figure>


<h3>13. Brake</h3>

<figure class='code'><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
</pre></td><td class='code'><pre><code class=''><span class='line'>http://www.miroslavnovak.com/qemu-brake_en.php</span></code></pre></td></tr></table></div></figure>


<h3>14. install specified pip version</h3>

<figure class='code'><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
</pre></td><td class='code'><pre><code class=''><span class='line'>$ sudo pip install "PyOpenSSL&gt;=0.13"</span></code></pre></td></tr></table></div></figure>


<h3>15. Tips for using vFense</h3>

<figure class='code'><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
<span class='line-number'>3</span>
<span class='line-number'>4</span>
</pre></td><td class='code'><pre><code class=''><span class='line'>   57  sudo pip install "PyOpenSSL&gt;=0.13"
</span><span class='line'>   58  apt-cache search libffi
</span><span class='line'>   59  sudo apt-get install -y libffi-dev
</span><span class='line'>dash@fenseServer:~$ sudo mkdir /usr/share/rethinkdb
</span></code></pre></td></tr></table></div></figure>


<h3>16. Cgroup error</h3>

<figure class='code'><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
<span class='line-number'>3</span>
<span class='line-number'>4</span>
<span class='line-number'>5</span>
<span class='line-number'>6</span>
<span class='line-number'>7</span>
<span class='line-number'>8</span>
<span class='line-number'>9</span>
<span class='line-number'>10</span>
<span class='line-number'>11</span>
<span class='line-number'>12</span>
<span class='line-number'>13</span>
<span class='line-number'>14</span>
<span class='line-number'>15</span>
</pre></td><td class='code'><pre><code class=''><span class='line'>
</span><span class='line'>cloudstack4.5.1 在centos7.1 上的 bug 
</span><span class='line'>此bug 会导致 系统vm state 状态获取不到
</span><span class='line'>在agent的log中获取到的错误信息为
</span><span class='line'>Controller 'cpuacct' is not wanted, but 'cpu' is co-mounted: Invalid argument
</span><span class='line'>
</span><span class='line'>解决方法
</span><span class='line'>
</span><span class='line'>注释这个文件中的这行 /usr/lib64/python2.7/site-packages/cloudutils/serviceConfig.py
</span><span class='line'>cfo.addEntry("cgroup_controllers", "[\"cpu\"]")
</span><span class='line'>和这个文件中的这行 /etc/libvirt/qemu.conf
</span><span class='line'>cgroup_controllers=["cpu"]
</span><span class='line'>重启libvirtd服务
</span><span class='line'>
</span><span class='line'>官网bug连接：https://issues.apache.org/jira/browse/CLOUDSTACK-8443</span></code></pre></td></tr></table></div></figure>


<h3>17. PXE Boot Debian:</h3>

<figure class='code'><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
<span class='line-number'>3</span>
<span class='line-number'>4</span>
<span class='line-number'>5</span>
<span class='line-number'>6</span>
<span class='line-number'>7</span>
<span class='line-number'>8</span>
</pre></td><td class='code'><pre><code class=''><span class='line'>Install:   
</span><span class='line'>http://backreference.org/2013/12/23/diskless-iscsi-boot-with-pxe-howto/
</span><span class='line'>iscsi:    
</span><span class='line'>http://www.sysprobs.com/guide-how-to-create-iscsi-storage-disks-freenas-08
</span><span class='line'>Trouble Shooting: Use the latest version!!!
</span><span class='line'>https://www.howtoforge.com/community/threads/debian-boot-over-iscsi-problem.67536/#post-321516
</span><span class='line'>iscsi and kvm:
</span><span class='line'>https://www.berrange.com/posts/2010/05/05/provisioning-kvm-virtual-machines-on-iscsi-the-hard-way-part-2-of-2/</span></code></pre></td></tr></table></div></figure>


<h3>18. Quickly Connect to RDP</h3>

<figure class='code'><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
</pre></td><td class='code'><pre><code class=''><span class='line'># ssh -L 2333:10.0.0.2:3389 192.168.10.187 -l root
</span><span class='line'># rdesktop -u YourUseName -p YourPassword localhost:2333 -g 1400x800</span></code></pre></td></tr></table></div></figure>


<h3>18. nginx enable directory displaying and follow links:</h3>

<p>On CentOS 7, do following:</p>

<figure class='code'><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
<span class='line-number'>3</span>
<span class='line-number'>4</span>
<span class='line-number'>5</span>
<span class='line-number'>6</span>
<span class='line-number'>7</span>
<span class='line-number'>8</span>
<span class='line-number'>9</span>
<span class='line-number'>10</span>
<span class='line-number'>11</span>
</pre></td><td class='code'><pre><code class=''><span class='line'>$ sudo vim /etc/nginx/nginx.conf
</span><span class='line'>http {
</span><span class='line'>        disable_symlinks off;
</span><span class='line'>}
</span><span class='line'>
</span><span class='line'>server {
</span><span class='line'>        root         /var/www/html;
</span><span class='line'>
</span><span class='line'>        location / {
</span><span class='line'>                        autoindex on;
</span><span class='line'>        }</span></code></pre></td></tr></table></div></figure>


<p>Restart the nginx service now you could get the local directory avaiable in browser.</p>

<h3>20. Get Back the passwd</h3>

<p>In Grub, add <code>single</code> at the <code>linux   /boot/vmlinuz-</code>&hellip;&hellip;</p>

<p>Press F10, and now you can do whatever you want to do.</p>

<h3>21. Enable Nested KVM</h3>

<figure class='code'><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
<span class='line-number'>3</span>
<span class='line-number'>4</span>
<span class='line-number'>5</span>
<span class='line-number'>6</span>
<span class='line-number'>7</span>
</pre></td><td class='code'><pre><code class=''><span class='line'># virsh edit VM_NAME
</span><span class='line'>&lt;vcpu placement='static' cpuset='0-3'&gt;4&lt;/vcpu&gt;
</span><span class='line'>Also change the cpu model.  
</span><span class='line'>&lt;cpu&gt;
</span><span class='line'>....
</span><span class='line'>&lt;/cpu&gt; 
</span><span class='line'>remove the tsc related item.   </span></code></pre></td></tr></table></div></figure>


<h3>22. Restart Windows Under CMD</h3>

<p>Specify the timeout(5 seconds) under the cmd line:</p>

<figure class='code'><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
</pre></td><td class='code'><pre><code class=''><span class='line'># shutdown /r /t 5</span></code></pre></td></tr></table></div></figure>


<h3>23. Cleanup Windows7 Disk</h3>

<p>Right click the disk, and select <code>Disk Cleanup</code>, then select <code>Clean up system files</code>, then your winsxs directory will be cleaned, thus saved your partition volumn.</p>

<h3>24. vim spell checking</h3>

<figure class='code'><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
</pre></td><td class='code'><pre><code class=''><span class='line'>: set spell spelllang=en_us</span></code></pre></td></tr></table></div></figure>


<h3>25. Startup Synergy At System Startup</h3>

<figure class='code'><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
</pre></td><td class='code'><pre><code class=''><span class='line'># vim /etc/lightdm/lightdm.conf
</span><span class='line'>greeter-setup-script=/usr/bin/synergys --config /home/dash/mysynergy.conf</span></code></pre></td></tr></table></div></figure>


<h3>26. Install Cobbler On Ubuntu</h3>

<figure class='code'><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
<span class='line-number'>3</span>
<span class='line-number'>4</span>
</pre></td><td class='code'><pre><code class=''><span class='line'># wget -qO - http://download.opensuse.org/repositories/home:/libertas-ict:/cobbler26/xUbuntu_14.04/Release.key | sudo apt-key add -
</span><span class='line'>OK
</span><span class='line'># sudo add-apt-repository "deb http://download.opensuse.org/repositories/home:/libertas-ict:/cobbler26/xUbuntu_14.04/ ./"
</span><span class='line'># apt-get update</span></code></pre></td></tr></table></div></figure>


<h3>27. Install restricted extra packages</h3>

<p>Install it via:</p>

<figure class='code'><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
</pre></td><td class='code'><pre><code class=''><span class='line'> # sudo apt-get install ubuntu-restricted-extras</span></code></pre></td></tr></table></div></figure>


<h3>28. View Allocated DHCP Address</h3>

<figure class='code'><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
</pre></td><td class='code'><pre><code class=''><span class='line'>$ more /var/lib/dhcpd/dhcpd.leases</span></code></pre></td></tr></table></div></figure>


<h3>29. apt-mirror for launchpad</h3>

<p>The steps are the same as the ordinary repository.</p>

<figure class='code'><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
<span class='line-number'>3</span>
</pre></td><td class='code'><pre><code class=''><span class='line'># vim  /etc/apt/mirror.list
</span><span class='line'> deb http://ppa.launchpad.net/landscape/15.01/ubuntu trusty main
</span><span class='line'># apt-mirror</span></code></pre></td></tr></table></div></figure>


<h3>30. Specify architecture of sources.list</h3>

<p>Only include amd64:</p>

<figure class='code'><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
</pre></td><td class='code'><pre><code class=''><span class='line'>$ sudo vim /etc/apt.sources.list
</span><span class='line'>deb [arch=amd64] http://192.168.0.79/landscape/15.01/ubuntu/ trusty main</span></code></pre></td></tr></table></div></figure>

</div>


  <footer>
    <p class="meta">
      
  

<span class="byline author vcard">Posted by <span class="fn">Dash</span></span>

           




<time class='entry-date' datetime='2015-06-29T09:27:17+08:00'><span class='date'><span class='date-month'>Jun</span> <span class='date-day'>29</span><span class='date-suffix'>th</span>, <span class='date-year'>2015</span></span> <span class='time'>9:27 am</span></time>
      

<span class="categories">
  
    <a class='category' href='/blog/categories/linux/'>linux</a>
  
</span>


    </p>
    
      <div class="sharing">
  
  
  
</div>

    
    <br />
    <p class="meta">
      
        <a class="basic-alignment left" href="/blog/2015/06/25/for-deploying-148-tips/" title="Previous Post: For deploying 148 Tips">&laquo; For deploying 148 Tips</a>
      
      
        <a class="basic-alignment right" href="/blog/2015/06/29/insert-public-key-into-cobbler-deployed-system/" title="Next Post: Insert public key into Cobbler Deployed System">Insert public key into Cobbler Deployed System &raquo;</a>
      
    </p>
  </footer>
</article>

  <section>
    <h1>Comments</h1>
    <div id="disqus_thread" aria-live="polite"><noscript>Please enable JavaScript to view the <a href="http://disqus.com/?ref_noscript">comments powered by Disqus.</a></noscript>
</div>
  </section>

</div>

<aside class="sidebar">
  
    <section>
  <h1>Recent Posts</h1>
  <ul id="recent_posts">
    
      <li class="post">
        <a href="/blog/2015/07/28/worktips-on-landscape/">WorkTips on LandScape</a>
      </li>
    
      <li class="post">
        <a href="/blog/2015/07/27/tips-on-packer/">Tips on Packer</a>
      </li>
    
      <li class="post">
        <a href="/blog/2015/07/25/chromebook-kernel-issue/">Chromebook Kernel Issue</a>
      </li>
    
      <li class="post">
        <a href="/blog/2015/07/22/libvirtd-trouble-shooting-on-centos7-dot-1/">Libvirtd Trouble-Shooting on CentOS7.1</a>
      </li>
    
      <li class="post">
        <a href="/blog/2015/07/19/on-migration-of-kvm/">On Migration of KVM</a>
      </li>
    
  </ul>
</section>





  
</aside>


    </div>
  </div>
  <footer role="contentinfo"><p>
  Copyright &copy; 2015 - Dash -
  <span class="credit">Powered by <a href="http://octopress.org">Octopress</a></span>
</p>

</footer>
  

<script type="text/javascript">
      var disqus_shortname = 'dashsagittariussglory';
      
        
        // var disqus_developer = 1;
        var disqus_identifier = 'http://purplepalmdash.github.io/blog/2015/06/29/linux-tips-2/';
        var disqus_url = 'http://purplepalmdash.github.io/blog/2015/06/29/linux-tips-2/';
        var disqus_script = 'embed.js';
      
    (function () {
      var dsq = document.createElement('script'); dsq.type = 'text/javascript'; dsq.async = true;
      dsq.src = '//' + disqus_shortname + '.disqus.com/' + disqus_script;
      (document.getElementsByTagName('head')[0] || document.getElementsByTagName('body')[0]).appendChild(dsq);
    }());
</script>











</body>
</html>
