
<!DOCTYPE html>
<!--[if IEMobile 7 ]><html class="no-js iem7"><![endif]-->
<!--[if lt IE 9]><html class="no-js lte-ie8"><![endif]-->
<!--[if (gt IE 8)|(gt IEMobile 7)|!(IEMobile)|!(IE)]><!--><html class="no-js" lang="en"><!--<![endif]-->
<head>
  <meta charset="utf-8">
  <title>Tips on 30Days30Skills(5) - Dash</title>
  <meta name="author" content="Dash">

  
  <meta name="description" content="Since the RESTful API is a little bit hard for setup, I ignore the Day10 and Day11, jump to Day 12, OpenCV. Day 12 - OpenCV Get the jar file First &hellip;">
  

  <!-- http://t.co/dKP3o1e -->
  <meta name="HandheldFriendly" content="True">
  <meta name="MobileOptimized" content="320">
  <meta name="viewport" content="width=device-width, initial-scale=1">

  
  <link rel="canonical" href="http://purplepalmdash.github.io/blog/2014/12/06/tips-on-30days30skills-5">
  <link href="/favicon.ico" rel="icon">
  <link href="/stylesheets/screen.css" media="screen, projection" rel="stylesheet" type="text/css">
  <link href="/purplepalmdash/atom.xml" rel="alternate" title="Dash" type="application/atom+xml">
  <script src="/javascripts/modernizr-2.0.js"></script>
  <script src="//libs.useso.com/js/jquery/1.9.1/jquery.min.js"></script>
  <script>!window.jQuery && document.write(unescape('%3Cscript src="./javascripts/libs/jquery.min.js"%3E%3C/script%3E'))</script>
  <script src="/javascripts/octopress.js" type="text/javascript"></script>
  <!--Fonts from Google"s Web font directory at http://google.com/webfonts -->
<link href="//fonts.googleapis.com/css?family=PT+Serif:regular,italic,bold,bolditalic" rel="stylesheet" type="text/css">
<link href="//fonts.googleapis.com/css?family=PT+Sans:regular,italic,bold,bolditalic" rel="stylesheet" type="text/css">

  

</head>

<body    class="collapse-sidebar sidebar-footer" >
  <header role="banner"><hgroup>
  <h1><a href="/">Dash</a></h1>
  
    <h2>Get busy living, or get busy dying.</h2>
  
</hgroup>

</header>
  <nav role="navigation"><ul class="subscription" data-subscription="rss">
  <li><a href="/purplepalmdash/atom.xml" rel="subscribe-rss" title="subscribe via RSS">RSS</a></li>
  
</ul>
  
<form action="https://www.google.com/search" method="get">
  <fieldset role="search">
    <input type="hidden" name="q" value="site:purplepalmdash.github.io" />
    <input class="search" type="text" name="q" results="0" placeholder="Search"/>
  </fieldset>
</form>
  
<ul class="main-navigation">
  <li><a href="/">Blog</a></li>
  <li><a href="/blog/archives">Archives</a></li>
</ul>

</nav>
  <div id="main">
    <div id="content">
      <div>
<article class="hentry" role="article">
  
  <header>
    
      <h1 class="entry-title">Tips on 30Days30Skills(5)</h1>
    
    
      <p class="meta">
        




<time class='entry-date' datetime='2014-12-06T16:26:00+08:00'><span class='date'><span class='date-month'>Dec</span> <span class='date-day'>6</span><span class='date-suffix'>th</span>, <span class='date-year'>2014</span></span> <span class='time'>4:26 pm</span></time>
        
         | <a href="#disqus_thread">Comments</a>
        
      </p>
    
  </header>


<div class="entry-content"><p>Since the RESTful API is a little bit hard for setup, I ignore the Day10 and Day11, jump to Day 12, OpenCV.</p>

<h3>Day 12 - OpenCV</h3>

<h4>Get the jar file</h4>

<p>First download the opencv from:
<a href="http://sourceforge.net/projects/opencvlibrary/files/latest/download">http://sourceforge.net/projects/opencvlibrary/files/latest/download</a></p>

<figure class='code'><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
<span class='line-number'>3</span>
<span class='line-number'>4</span>
</pre></td><td class='code'><pre><code class=''><span class='line'>$ unzip *.zip
</span><span class='line'>$ cd opencv-2.4.10
</span><span class='line'>$ cmake -G "Unix Makefiles" -D CMAKE_CXX_COMPILER=/usr/bin/g++ -D CMAKE_C_COMPILER=/usr/bin/gcc -D WITH_CUDA=ON .. 
</span><span class='line'>$ make -j4 && make install
</span></code></pre></td></tr></table></div></figure>


<p>Trouble shooting when generating openCV jar file:  <br/>
Correct output should be:</p>

<figure class='code'><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
<span class='line-number'>3</span>
<span class='line-number'>4</span>
</pre></td><td class='code'><pre><code class=''><span class='line'>--   Java:
</span><span class='line'>--     ant:                         /bin/ant (ver 1.9.4)
</span><span class='line'>--     JNI:                         /usr/lib/jvm/java-7-openjdk/include /usr/lib/jvm/java-7-openjdk/include/linux /usr/lib/jvm/java-7-openjdk/include
</span><span class='line'>--     Java tests:                  YES
</span></code></pre></td></tr></table></div></figure>


<p>Add JNi</p>

<figure class='code'><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
</pre></td><td class='code'><pre><code class=''><span class='line'>export JAVA_HOME=/usr/lib/jvm/java-7-openjdk/
</span></code></pre></td></tr></table></div></figure>


<p>Then build with following command:</p>

<figure class='code'><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
</pre></td><td class='code'><pre><code class=''><span class='line'>$ cmake -G "Unix Makefiles" -D CMAKE_CXX_COMPILER=/usr/bin/g++ -D CMAKE_C_COMPILER=/usr/bin/gcc -D WITH_CUDA=ON -D BUILD_SHARED_LIBS=OFF -D BUILD_NEW_PYTHON_SUPPORT=NO .. && make
</span></code></pre></td></tr></table></div></figure>


<p>For MACOS, you should install:</p>

<figure class='code'><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
</pre></td><td class='code'><pre><code class=''><span class='line'>$ brew install ant
</span><span class='line'>$ export JAVA_HOME=`/usr/libexec/java_home -v 1.6`
</span></code></pre></td></tr></table></div></figure>


<p>Then re-compile and now you could get the jar file under build/bin/.</p>

<h4>Development on OpenCV</h4>

<p>Using eclipse LUNA.</p>

<figure class='code'><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
<span class='line-number'>3</span>
<span class='line-number'>4</span>
</pre></td><td class='code'><pre><code class=''><span class='line'>(venv)[Trusty@~/code/30days/Day12OpenCV/opencv-2.4.10/build/bin]$ pwd
</span><span class='line'>/home/Trusty/code/30days/Day12OpenCV/opencv-2.4.10/build/bin
</span><span class='line'>(venv)[Trusty@~/code/30days/Day12OpenCV/opencv-2.4.10/build/bin]$ ls *.jar
</span><span class='line'>opencv-2410.jar
</span></code></pre></td></tr></table></div></figure>


<p>Add the new User Libraries:</p>

<p><img src="/images/addjavalib.jpg" alt="/images/addjavalib.jpg" /></p>

<p>The detailed configuration steps could be refered to the <a href="http://segmentfault.com/a/1190000000358809">http://segmentfault.com/a/1190000000358809</a>,  After configuration your User Libraries should be looked like this:  <br/>
<img src="/images/javalib2.jpg" alt="/images/javalib2.jpg" /></p>

<p>Add User Libraries thus you could see the configuration of the lib is looked like:  <br/>
<img src="/images/libconfiguration.jpg" alt="/images/libconfiguration.jpg" /></p>

<p>Code is like following:</p>

<figure class='code'><figcaption><span></span></figcaption><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
<span class='line-number'>3</span>
<span class='line-number'>4</span>
<span class='line-number'>5</span>
<span class='line-number'>6</span>
<span class='line-number'>7</span>
<span class='line-number'>8</span>
<span class='line-number'>9</span>
<span class='line-number'>10</span>
<span class='line-number'>11</span>
<span class='line-number'>12</span>
<span class='line-number'>13</span>
<span class='line-number'>14</span>
<span class='line-number'>15</span>
<span class='line-number'>16</span>
<span class='line-number'>17</span>
<span class='line-number'>18</span>
<span class='line-number'>19</span>
<span class='line-number'>20</span>
<span class='line-number'>21</span>
<span class='line-number'>22</span>
<span class='line-number'>23</span>
<span class='line-number'>24</span>
<span class='line-number'>25</span>
<span class='line-number'>26</span>
<span class='line-number'>27</span>
<span class='line-number'>28</span>
<span class='line-number'>29</span>
<span class='line-number'>30</span>
<span class='line-number'>31</span>
<span class='line-number'>32</span>
<span class='line-number'>33</span>
<span class='line-number'>34</span>
<span class='line-number'>35</span>
</pre></td><td class='code'><pre><code class='java'><span class='line'><span class="kn">package</span> <span class="n">facedetection</span><span class="o">;</span>
</span><span class='line'><span class="kn">import</span> <span class="nn">org.opencv.core.Core</span><span class="o">;</span>
</span><span class='line'><span class="kn">import</span> <span class="nn">org.opencv.core.Mat</span><span class="o">;</span>
</span><span class='line'><span class="kn">import</span> <span class="nn">org.opencv.core.MatOfRect</span><span class="o">;</span>
</span><span class='line'><span class="kn">import</span> <span class="nn">org.opencv.core.Point</span><span class="o">;</span>
</span><span class='line'><span class="kn">import</span> <span class="nn">org.opencv.core.Rect</span><span class="o">;</span>
</span><span class='line'><span class="kn">import</span> <span class="nn">org.opencv.core.Scalar</span><span class="o">;</span>
</span><span class='line'><span class="kn">import</span> <span class="nn">org.opencv.highgui.Highgui</span><span class="o">;</span>
</span><span class='line'><span class="kn">import</span> <span class="nn">org.opencv.objdetect.CascadeClassifier</span><span class="o">;</span>
</span><span class='line'>
</span><span class='line'><span class="kd">public</span> <span class="kd">class</span> <span class="nc">MyFaceDetectionClass</span> <span class="o">{</span>
</span><span class='line'>    <span class="kd">public</span> <span class="kd">static</span> <span class="kt">void</span> <span class="nf">main</span><span class="o">(</span><span class="n">String</span><span class="o">[]</span> <span class="n">args</span><span class="o">)</span> <span class="o">{</span>
</span><span class='line'>
</span><span class='line'>        <span class="n">System</span><span class="o">.</span><span class="na">loadLibrary</span><span class="o">(</span><span class="n">Core</span><span class="o">.</span><span class="na">NATIVE_LIBRARY_NAME</span><span class="o">);</span>
</span><span class='line'>        <span class="n">System</span><span class="o">.</span><span class="na">out</span><span class="o">.</span><span class="na">println</span><span class="o">(</span><span class="s">&quot;\nRunning FaceDetector&quot;</span><span class="o">);</span>
</span><span class='line'>
</span><span class='line'>        <span class="n">CascadeClassifier</span> <span class="n">faceDetector</span> <span class="o">=</span> <span class="k">new</span> <span class="nf">CascadeClassifier</span><span class="o">(</span><span class="n">MyFaceDetectionClass</span><span class="o">.</span><span class="na">class</span><span class="o">.</span><span class="na">getResource</span><span class="o">(</span><span class="s">&quot;haarcascade_frontalface_alt.xml&quot;</span><span class="o">).</span><span class="na">getPath</span><span class="o">());</span>
</span><span class='line'>        <span class="n">Mat</span> <span class="n">image</span> <span class="o">=</span> <span class="n">Highgui</span>
</span><span class='line'>                <span class="o">.</span><span class="na">imread</span><span class="o">(</span><span class="n">MyFaceDetectionClass</span><span class="o">.</span><span class="na">class</span><span class="o">.</span><span class="na">getResource</span><span class="o">(</span><span class="s">&quot;shekhar.JPG&quot;</span><span class="o">).</span><span class="na">getPath</span><span class="o">());</span>
</span><span class='line'>
</span><span class='line'>        <span class="n">MatOfRect</span> <span class="n">faceDetections</span> <span class="o">=</span> <span class="k">new</span> <span class="nf">MatOfRect</span><span class="o">();</span>
</span><span class='line'>        <span class="n">faceDetector</span><span class="o">.</span><span class="na">detectMultiScale</span><span class="o">(</span><span class="n">image</span><span class="o">,</span> <span class="n">faceDetections</span><span class="o">);</span>
</span><span class='line'>
</span><span class='line'>        <span class="n">System</span><span class="o">.</span><span class="na">out</span><span class="o">.</span><span class="na">println</span><span class="o">(</span><span class="n">String</span><span class="o">.</span><span class="na">format</span><span class="o">(</span><span class="s">&quot;Detected %s faces&quot;</span><span class="o">,</span> <span class="n">faceDetections</span><span class="o">.</span><span class="na">toArray</span><span class="o">().</span><span class="na">length</span><span class="o">));</span>
</span><span class='line'>
</span><span class='line'>        <span class="k">for</span> <span class="o">(</span><span class="n">Rect</span> <span class="n">rect</span> <span class="o">:</span> <span class="n">faceDetections</span><span class="o">.</span><span class="na">toArray</span><span class="o">())</span> <span class="o">{</span>
</span><span class='line'>            <span class="n">Core</span><span class="o">.</span><span class="na">rectangle</span><span class="o">(</span><span class="n">image</span><span class="o">,</span> <span class="k">new</span> <span class="nf">Point</span><span class="o">(</span><span class="n">rect</span><span class="o">.</span><span class="na">x</span><span class="o">,</span> <span class="n">rect</span><span class="o">.</span><span class="na">y</span><span class="o">),</span> <span class="k">new</span> <span class="nf">Point</span><span class="o">(</span><span class="n">rect</span><span class="o">.</span><span class="na">x</span> <span class="o">+</span> <span class="n">rect</span><span class="o">.</span><span class="na">width</span><span class="o">,</span> <span class="n">rect</span><span class="o">.</span><span class="na">y</span> <span class="o">+</span> <span class="n">rect</span><span class="o">.</span><span class="na">height</span><span class="o">),</span>
</span><span class='line'>                    <span class="k">new</span> <span class="nf">Scalar</span><span class="o">(</span><span class="mi">0</span><span class="o">,</span> <span class="mi">255</span><span class="o">,</span> <span class="mi">0</span><span class="o">));</span>
</span><span class='line'>        <span class="o">}</span>
</span><span class='line'>
</span><span class='line'>        <span class="n">String</span> <span class="n">filename</span> <span class="o">=</span> <span class="s">&quot;ouput.png&quot;</span><span class="o">;</span>
</span><span class='line'>        <span class="n">System</span><span class="o">.</span><span class="na">out</span><span class="o">.</span><span class="na">println</span><span class="o">(</span><span class="n">String</span><span class="o">.</span><span class="na">format</span><span class="o">(</span><span class="s">&quot;Writing %s&quot;</span><span class="o">,</span> <span class="n">filename</span><span class="o">));</span>
</span><span class='line'>        <span class="n">Highgui</span><span class="o">.</span><span class="na">imwrite</span><span class="o">(</span><span class="n">filename</span><span class="o">,</span> <span class="n">image</span><span class="o">);</span>
</span><span class='line'>    <span class="o">}</span>
</span><span class='line'><span class="o">}</span>
</span></code></pre></td></tr></table></div></figure>


<p>Then you should place the xml file and the JPG file under the java class, after doing this, run the application, then you will got the png file generate with face detected.</p>

<h3>Day 13 - Dropwizard</h3>

<p>First you should install mondb in ArchLinux:</p>

<figure class='code'><figcaption><span></span></figcaption><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
</pre></td><td class='code'><pre><code class='java'><span class='line'><span class="n">$</span> <span class="n">sudo</span> <span class="n">pacman</span> <span class="o">-</span><span class="n">S</span> <span class="n">mongodb</span>
</span></code></pre></td></tr></table></div></figure>


<p>Then in eclipse, create a new Maven project with the template of &ldquo;maven-archetype-quickstart&rdquo;, with the following configuration of Artifact Id and Group id.  <br/>
<img src="/images/blogjava.jpg" alt="/images/blogjava.jpg" /></p>

<p>The default pom.xml should be modified,</p>

<p>Since the network environment is not stable, I created a vncserver at the VPS, and use VPS for developing.  <br/>
In vps:</p>

<figure class='code'><figcaption><span></span></figcaption><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
</pre></td><td class='code'><pre><code class='java'><span class='line'><span class="n">sudo</span> <span class="n">apt</span><span class="o">-</span><span class="n">get</span> <span class="n">install</span> <span class="n">eclipse</span>
</span><span class='line'><span class="n">sudo</span> <span class="n">apt</span><span class="o">-</span><span class="n">get</span> <span class="n">install</span> <span class="n">mongodb</span>
</span></code></pre></td></tr></table></div></figure>


<p>then install the maven from: <a href="http://download.eclipse.org/technology/m2e/releases/1.3">http://download.eclipse.org/technology/m2e/releases/1.3</a></p>
</div>


  <footer>
    <p class="meta">
      
  

<span class="byline author vcard">Posted by <span class="fn">Dash</span></span>

           




<time class='entry-date' datetime='2014-12-06T16:26:00+08:00'><span class='date'><span class='date-month'>Dec</span> <span class='date-day'>6</span><span class='date-suffix'>th</span>, <span class='date-year'>2014</span></span> <span class='time'>4:26 pm</span></time>
      

<span class="categories">
  
    <a class='category' href='/blog/categories/web/'>web</a>
  
</span>


    </p>
    
      <div class="sharing">
  
  
  
</div>

    
    <br />
    <p class="meta">
      
        <a class="basic-alignment left" href="/blog/2014/12/06/use-vccw-for-deploying-wp/" title="Previous Post: Use VCCW For Deploying WP">&laquo; Use VCCW For Deploying WP</a>
      
      
        <a class="basic-alignment right" href="/blog/2014/12/10/re-write-weatherapp/" title="Next Post: Re-Write WeatherAPP">Re-Write WeatherAPP &raquo;</a>
      
    </p>
  </footer>
</article>

  <section>
    <h1>Comments</h1>
    <div id="disqus_thread" aria-live="polite"><noscript>Please enable JavaScript to view the <a href="http://disqus.com/?ref_noscript">comments powered by Disqus.</a></noscript>
</div>
  </section>

</div>

<aside class="sidebar">
  
    <section>
  <h1>Recent Posts</h1>
  <ul id="recent_posts">
    
      <li class="post">
        <a href="/blog/2015/05/25/san-jie-dian-da-jian-openstack-juno-3/">三节点搭建OpenStack Juno(3)</a>
      </li>
    
      <li class="post">
        <a href="/blog/2015/05/25/lxcize-the-kvm-machine/">LXCize the KVM Machine</a>
      </li>
    
      <li class="post">
        <a href="/blog/2015/05/24/san-jie-dian-da-jian-openstack-juno-2/">三节点搭建OpenStack Juno(2)</a>
      </li>
    
      <li class="post">
        <a href="/blog/2015/05/24/san-jie-dian-da-jian-openstack-juno/">三节点搭建OpenStack Juno(1)</a>
      </li>
    
      <li class="post">
        <a href="/blog/2015/05/23/use-apt-cacher-for-speeding-up-deployment/">Use Apt-cacher for Speeding Up Deployment</a>
      </li>
    
  </ul>
</section>





  
</aside>


    </div>
  </div>
  <footer role="contentinfo"><p>
  Copyright &copy; 2015 - Dash -
  <span class="credit">Powered by <a href="http://octopress.org">Octopress</a></span>
</p>

</footer>
  

<script type="text/javascript">
      var disqus_shortname = 'dashsagittariussglory';
      
        
        // var disqus_developer = 1;
        var disqus_identifier = 'http://purplepalmdash.github.io/blog/2014/12/06/tips-on-30days30skills-5/';
        var disqus_url = 'http://purplepalmdash.github.io/blog/2014/12/06/tips-on-30days30skills-5/';
        var disqus_script = 'embed.js';
      
    (function () {
      var dsq = document.createElement('script'); dsq.type = 'text/javascript'; dsq.async = true;
      dsq.src = '//' + disqus_shortname + '.disqus.com/' + disqus_script;
      (document.getElementsByTagName('head')[0] || document.getElementsByTagName('body')[0]).appendChild(dsq);
    }());
</script>











</body>
</html>
