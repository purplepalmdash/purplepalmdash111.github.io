+++
date = "2017-03-03T11:14:34+08:00"
categories = ["Linux"]
keywords = ["Linux"]
description = "Linux tips series 7"
title = "Linux Tips(7)"

+++
### 1. CloudStack Issue
On ubuntu1404/1604, the template should enable HVM.    
Its partition size should less than the primary storage size.    
Password reset issue: Ubuntu1604, failed.    

Ubuntu14.04 startup too slow, because of ntp, remove it `sudo update-rc.d -f ntp remove
`

### 2. Ubuntu16.04 cloudstack-pass issue
The reset-password script is located as
`/etc/init.d/cloud-set-guest-password`, then we could do following
configurations:    

Remove the services via:    

```
# update-rc.d -f cloud-set-guest-password remove
# cp /etc/init.d/cloud-setup-guest-password /usr/bin/
# chmod 777 /usr/bin/cloud-setup-guest-password
```
Before because you set `update-rc.d cloud-set-guest-password defaults 98`, so
first you should remove it.    

Then Create a systemd service as `/lib/systemd/system/cloudpassword.service`:    

```
[Unit]
Description=cloudpass container

[Service]
Type=idle
Restart=always
ExecStart=/usr/bin/cloud-set-guest-password
ExecStop=/usr/bin/echo hello

[Install]
WantedBy=multi-user.target

```
Enable the service via:    

```
# systemctl enable cloudpassword
```
After the network is online:    

```
# systemctl enable systemd-networkd-wait-online.service
```
The steps could refers to another article.    

### 3. XenServer Timezone
Switch to UTC time:    

```
# cp /usr/share/zoneinfo/UTC /etc/localtime
```

### 4. Gitbook serve ports
Listening on other ports:    

```
$ gitbook --port 14001 serve
```

