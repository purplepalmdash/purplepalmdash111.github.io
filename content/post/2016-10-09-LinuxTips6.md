+++
categories = ["Linux"]
date = "2016-10-09T17:24:03+08:00"
description = "Linux Tips"
keywords = ["Tips"]
title = "LinuxTips6"

+++
### 1.  Working tips for remove dulipcate chars
[http://codereview.stackexchange.com/questions/5441/removing-any-duplicate-characters-in-a-string](http://codereview.stackexchange.com/questions/5441/removing-any-duplicate-characters-in-a-string)    

### 2. pip reinstallation
Uninstall all of the pip installed packages:    

```
# pip freeze | xargs pip uninstall -y
```
### 3. ipython notebook
Install on ArchLinux via:    

```
$  sudo pip install "ipython[all]"
```
Be sure to make your internet connection stable.    

Run it via:    

```
$ ipython notebook
```
ipython2 installation issue:    

```
$ python2 -m pip install ipykernel
$ python2 -m ipykernel install --user
$ python2 -m pip  install "ipython[all]"
$ ipython3 notebook
```
Now you could create python2&python3 notebooks.    

### 4. wkhtmltoimage
wkhtmltoimage could convert webpage into image files, like following command:    

```
$ wkhtmltoimage http://purplepalmdash.github.io dash.jpg
```

### 5. Synergyc
Add following into `~/.config/awesome/rc.lua`, then you could let synergyc auto-login
into another server:    

```
"synergyc 192.168.0.219",
```

### 6. vromerc
vromerc configuration:    

```
set userletters=0
```

### 7. Docker Registry
[https://www.digitalocean.com/community/tutorials/how-to-set-up-a-private-docker-registry-on-ubuntu-14-04](https://www.digitalocean.com/community/tutorials/how-to-set-up-a-private-docker-registry-on-ubuntu-14-04)     

### 8. Trouble-Shooting In Libvirt
After installing archlinux, the virsh list will be failed with following message:    

```
[root@Arch8G ~]# virsh list
error: failed to connect to the hypervisor
error: Failed to connect socket to '/var/run/libvirt/libvirt-sock': No such file or
directory
```
Solved via:    

```
# systemctl enable libvirtd.service
# systemctl enable virtlogd.service
# systemctl restart libvirtd.service
# systemctl restart virtlogd.service
```
Now `virsh list` will be OK.    

For user, you should add polkit related items, see:    

[https://wiki.archlinux.org/index.php/Libvirt#Using_polkit](https://wiki.archlinux.org/index.php/Libvirt#Using_polkit)    

also remember add yourself into the group `kvm`.    

### 9. Docker using daocloud registry
Edit following file(Or you could edit it via: `sudo systemctl edit docker.service`):    

```
# vim /etc/systemd/system/docker.service.d/override.conf 
[Service]
ExecStart=
ExecStart=/usr/bin/dockerd --registry-mirror=http://1a653205.m.daocloud.io -H fd://
```
Now reload the service and restart docker.service via:    

```
# systemctl daemon-reload
# systemctl restart docker.service
```
Now your docker pulling will from the daocloud website.    

### 10. DEB Local Repository How-TO
In a ubuntu system, generate package repository metadatas:    

```
# sudo apt-get install -y dpkg-dev
# dpkg-scanpackages . /dev/null | gzip -9c > Packages.gz
```
Now copy the directory into a webserver, like in `192.168.177.11`, visit your
webpage, you will see `http://192.168.177.11/xxxx` contains all of the
packages and their metadata.    

In the systems which you want to use this repository, do following:    

```
$ sudo vim /etc/apt/sources.list.d/docker.list 
deb http://192.168.177.11/ubuntu1604dockerrepo/	/
$ sudo apt-get update
```
Now examine the package `docker-engine` which in the private repository:    

```
# apt-cache policy docker-engine
docker-engine:
  Installed: 1.12.3-0~xenial
  Candidate: 1.12.3-0~xenial
  Version table:
 *** 1.12.3-0~xenial 500
        500 http://192.168.177.11/ubuntu1604dockerrepo  Packages
        100 /var/lib/dpkg/status
```
Install this package via:    

```
$ sudo apt-get install -y docker-engine --allow-unauthenticated
```
### 11. vagrant initial scripts for setting docker
Create the initial.sh under the vagrant folder:     

```
# Use apt-cacher server
echo 'Acquire::http::Proxy "http://192.168.177.11:3142";'>/etc/apt/apt.conf.d/01proxy
# Added the primary repository
echo 'deb http://192.168.177.11/ubuntu1604dockerrepo/    /'>/etc/apt/sources.list.d/dockerrepo.list
apt-get update
apt-get -y install vim
apt-get install -y docker-engine --allow-unauthenticated
```
Using local docker registry:    

```
# Use apt-cacher server
echo 'Acquire::http::Proxy
"http://192.168.177.11:3142";'>/etc/apt/apt.conf.d/01proxy
# Added the primary repository
echo 'deb http://192.168.177.11/ubuntu1604dockerrepo/
/'>/etc/apt/sources.list.d/dockerrepo.list
apt-get update
apt-get -y install vim
apt-get install -y docker-engine --allow-unauthenticated
# Added local docker registry
sed -i 's#fd://#fd:// --registry-mirror http://192.168.177.11:5000
--insecure-registry 192.168.177.11:5000#' /lib/systemd/system/docker.service
systemctl daemon-reload
systemctl restart docker
```
### 12. nginx docker way
Run via:    

```
$ sudo docker run --name docker-nginx -p 80:80 -d -v ~/serve:/usr/share/nginx/html
nginx
```
With auto-index:    

```
$ sudo docker run --name docker-nginx -p 80:80 -d -v ~/serve:/usr/share/nginx/html
jrelva/nginx-autoindex
```
