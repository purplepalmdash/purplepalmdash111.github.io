+++
title = "LinuxTips8"
date = "2017-10-30T09:50:23+08:00"
description = "Linux Tips 8"
keywords = ["Linux"]
categories = ["Linux"]
+++
### 1. pigz for multi-core compression
In case you need multi-core compression for speeding up compression procedure,
please do following steps:    

```
# pacman -S pigz
# tar -c transfer/ | pigz -c | split -a 5 -d -b 1650m - mysplit
# ls -l
total 8296652
-rw-r--r-- 1 root root 1730150400 Oct 30 09:20 mysplit00000
-rw-r--r-- 1 root root 1730150400 Oct 30 09:20 mysplit00001
-rw-r--r-- 1 root root 1730150400 Oct 30 09:22 mysplit00002
-rw-r--r-- 1 root root 1730150400 Oct 30 09:23 mysplit00003
-rw-r--r-- 1 root root 1575143431 Oct 30 09:23 mysplit00004
drwxr-xr-x 3 root root       4096 Oct 30 08:59 transfer
```
Decompression these files:    

```
# cat mysplit*>mysplit
# tar xzvf mysplit
```
After decompression you got the same directory shows the same as the origin
one.   

### 2. Skip Checksum check in yaourt
Via `yaourt --m-arg --skipchecksums --m-arg --skippgpcheck -Sb`, you could
skip checksum check in yaourt package.   

### 3. yaourt hivex and libguestfs
In hivex:    

```
Since some users may have set INSTALL_BASE in PERL_MM_OPT, you should consider adding 'unset PERL_MM_OPT' before configuring.

Compiles with line 23 in PKGBUILD changed from

./configure\ 
to...
./configure --disable-ocaml\
```
In libguestfs, simply ignore the checksum checking for source code.   

### 4. virt-resize bug
In CentOS 7, you have to upgrading the lvm2, then you get libguestfs working
properly.   

To enable the debug, do following:  `export LIBGUESTFS_DEBUG=1` 

List all of the ip address via:    

```
# virsh net-dhcp-leases $network
```

### 5. Add user to sudo
First you create user via `adduser YourName`, then you add user to sudo group
via:   `adduser YourName sudo`.    

### 6. linuxkit
[http://collabnix.com/getting-started-with-multi-node-kubernetes-cluster-using-linuxkit/](http://collabnix.com/getting-started-with-multi-node-kubernetes-cluster-using-linuxkit/)    

### 7. teamviewer on rpi
Search rpi's teamviewer solution.

### 8. bash debugging
If you have a bash script, simply use `bash -x xxx.sh` for debugging this
script, it will display all of the excution steps.   

### 9. RaspberryPi Keyboard layout
Configure them via:    

```
# dpkg-reconfigure keyboard-configuration
```

### 10. sonoff
use sonoff for controlling the electricity at home. 

### 11. Debian QTcreator
Just for writing the software for managing the sd card writer. 

### 12. hugo issue
via some mis-typing I commited some files into master branch(`.travis.yml`),
thus every time's commitment will trigger 2 building in travisCI!!!     

Solution:    

```
# git checkout master
# git rm .travis.yml
# git commit -m "remove travis yml"
# git push origin master
# git checkout source
```
Continue to edit and publish in source tree, now your commitment will be OK.

### 13. gitk
For viewing all of the changing of your git branch, use `gitk` for viewing the
code changes and branches.   

### 14. pyinstaller to exe
Windows terminal, press following:    

```
# pyinstaller.exe ThinClientSDWriter.py
```
After pyinstall.exe, it will build the output in dist directory.  

Debugging, for  

```
import sip
sip.setapi(u'QString',2)
sip.setapi(u'QVariable',2)
```
If you encounter the api version 1 has been set, simply add 3 lines in:    

`support/rthooks/pyi_rth_qt4plugins.py` in PyInstaller

[https://github.com/pyinstaller/pyinstaller/wiki/Recipe-PyQt4-API-Version](https://github.com/pyinstaller/pyinstaller/wiki/Recipe-PyQt4-API-Version)    

### 15. sip setapi
Detailed explanation:    

```
sip.setapi("QString" ,2)
  
的意义就是取消掉 PyQt 里面 QString 的使用，原来凡是接受 QString 参数的地方，都变成了接受 Python 的 unicode 类型。原来返回 QString 的函数也变成返回 unicode 类型。
  
这个行为在 PyQt5 里面是默认行为。而且使用上也方便非常多，推荐新代码里面尽量使用这个行为。
  
同样的还有  
  
sip.setapi("QDateTime", 2)
sip.setapi("QDate", 2)
sip.setapi("QVariant", 2)
#QTextStream的第一个版本会导致Python的hex(),bin()被PyQt覆盖
sip.setapi("QTextStream", 2)
sip.setapi("QUrl", 2)
  
在使用这个 setapi() 调用的时候，建议包在 try/except 块里面，因为不能调用两次。并且不能在导入 PyQt 之后使用，所以应该放在程序的最开始处。  
  
try:
     sip.setapi("QString", 2)
     sip.setapi(...)
except ValueError:
     pass
from PyQt4.QtCore import * 
```

### 16. rdesktop enable remote
Via following command:    

```
# rdesktop -r disk:share=/xxxx/yyy/ccc
```

### 17. debian VBox Guest Additional installation

```
# apt-get install build-essential linux-headers-amd64 linux-source
$ ./autorun.sh
```

### 18. tune linpack
[http://www.advancedclustering.com/act_kb/tune-hpl-dat-file/](http://www.advancedclustering.com/act_kb/tune-hpl-dat-file/)    

### 19. docker restart policy
Change restart policy from always to no:    

```
#  docker update --restart=no my-container
```

### 20. apt-mirror configuration for arm64
The configuration file is listed as following:     

```
# vim /etc/apt/mirror.list 
#
set base_path    /var/spool/apt-mirror
#
# set mirror_path  $base_path/mirror
# set skel_path    $base_path/skel
# set var_path     $base_path/var
# set cleanscript $var_path/clean.sh
set defaultarch  arm64
# set postmirror_script $var_path/postmirror.sh
# set run_postmirror 0
set nthreads     20
set _tilde 0

deb http://ports.ubuntu.com xenial main restricted universe multiverse
deb http://ports.ubuntu.com xenial-security main restricted universe multiverse
deb http://ports.ubuntu.com xenial-updates main restricted universe multiverse
deb http://ports.ubuntu.com xenial-proposed main restricted universe multiverse
deb http://ports.ubuntu.com xenial-backports main restricted universe multiverse
clean http://ports.ubuntu.com

```
